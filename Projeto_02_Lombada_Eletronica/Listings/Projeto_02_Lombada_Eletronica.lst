A51 MACRO ASSEMBLER  PROJETO_02_LOMBADA_ELETRONICA                                        04/28/2017 16:39:47 PAGE     1


MACRO ASSEMBLER A51 V8.2.5.0
OBJECT MODULE PLACED IN .\Objects\Projeto_02_Lombada_Eletronica.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE Projeto_02_Lombada_Eletronica.a51 SET(SMALL) DEBUG PRINT(.\Listings\Pro
                      jeto_02_Lombada_Eletronica.lst) OBJECT(.\Objects\Projeto_02_Lombada_Eletronica.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     

                       2     

                       3     

                       4     

                       5     

                       6     

                       7     

                       8     

                       9     

                      10     

                      11     

                      12     

                      13     

                      14     

                      15     

                      16     

                      17     

                      18     

                      19     

                      20     

                      21     

                      22     

                      23     

                      24     

                      25     

                      26     

                      27     

                      28     

                      29     

0000                  30     org 000h  

0000 020030           31     ljmp __STARTUP__

                      32     

0003                  33     org 003h  

0003 020197           34     ljmp INT_EXT0

                      35     

000B                  36     org 00Bh  

000B 0201A9           37     ljmp INT_TIMER0

                      38     

0013                  39     org 013h  

0013 0201AA           40     ljmp INT_EXT1

                      41     

001B                  42     org 01Bh  

001B 0201C0           43     ljmp INT_TIMER1

                      44     

0023                  45     org 023h  

0023 0201EB           46     ljmp INT_SERIAL

                      47     

                      48     

                      49     

                      50     

                      51     

  0090                52     PINO_LED_VERDE                          EQU P1.0

  0091                53     PINO_LED_VERMELHO                       EQU P1.1

  0092                54     PINO_LED_AMARELO                        EQU     P1.2    

                      55     

                      56     

  0093                57     BUZZER                                          EQU P1.3

A51 MACRO ASSEMBLER  PROJETO_02_LOMBADA_ELETRONICA                                        04/28/2017 16:39:47 PAGE     2

                      58             

                      59     

                      60     

                      61     

                      62     

  00B6                63     LED_SEG                                         EQU     P3.6

  00B7                64     LED1                                            EQU     P3.7

                      65             

  0000                66     PWM_FLAG                                        EQU 0    

                      67     

  0031                68     PWM_DUTY_CYCLE                          EQU 31h  

                      69     

  0032                70     PWM_COUNTER                                     EQU 32h

                      71     

                      72     

  0033                73     PWM_PERIODO_LSB                         EQU 33h

  0034                74     PWM_PERIODO_MED                         EQU 34h 

  0035                75     PWM_PERIODO_MSB                         EQU 35h

                      76             

  0036                77     PWM_QTDADE_PERIODOS                     EQU 36h

                      78             

  0037                79     DISTANCIA_SENSORES                      EQU 37h   

                      80     

  0038                81     FLAG_PASSOU_PRIMEIRO_SENSOR EQU 38h

  0039                82     FLAG_CALCULAR_VELOCIDADE        EQU 39h   

                      83             

                      84     

  0040                85     VELOCIDADE_VEICULO_UNIDADE      EQU     40h

  0041                86     VELOCIDADE_VEICULO_DEZENA       EQU     41h

  0042                87     VELOCIDADE_VEICULO                      EQU 42h 

                      88     

  0043                89     VELOCIDADE_LIMITE                       EQU 43h  

                      90             

  0044                91     TIMER_MEDICOES_LOW                      EQU     44h

                      92     

                      93     

                      94     

  0045                95     TIMER_MEDICOES_LSB                      EQU     45h

  0046                96     TIMER_MEDICOES_MSB                      EQU     46h

                      97             

                      98     

                      99     

                     100     

                     101     

0030                 102     org 030h

                     103     

                     104             

                     105     

                     106     

                     107     

                     108     

                     109     

0030                 110     __STARTUP__:

0030 12004C          111                     LCALL   SETA_VARIAVEIS_INICIAIS

0033 1200C3          112                     LCALL   TIMER_CONFIGURA_TIMER

0036 120182          113                     LCALL   INT_CONFIGURA_INTERRUPCOES

                     114     

0039                 115     INICIO:

0039 120067          116                     LCALL   RESETA_TIMER_MEDICOES

                     117                     

003C                 118     ESPERA_SENSOR_2:

003C 120074          119                     LCALL   SINALIZA_LOMBADA_LIGADA

                     120                     

003F E539            121                     MOV             A, FLAG_CALCULAR_VELOCIDADE

0041 B401F8          122                     CJNE    A, #01h, ESPERA_SENSOR_2

                     123                     

A51 MACRO ASSEMBLER  PROJETO_02_LOMBADA_ELETRONICA                                        04/28/2017 16:39:47 PAGE     3

0044 120084          124                     LCALL   CALCULA_VELOCIDADE

                     125                     

0047 12004C          126                     LCALL   SETA_VARIAVEIS_INICIAIS

004A 0139            127                     AJMP    INICIO

                     128     

                     129     

                     130     

                     131     

                     132     

                     133     

                     134     

                     135     

004C                 136     SETA_VARIAVEIS_INICIAIS:

004C C290            137                     CLR             PINO_LED_VERDE

004E C291            138                     CLR             PINO_LED_VERMELHO

0050 C292            139                     CLR             PINO_LED_AMARELO

0052 C293            140                     CLR             BUZZER

                     141                     

0054 753764          142                     MOV             DISTANCIA_SENSORES,             #100d    

0057 754328          143                     MOV             VELOCIDADE_LIMITE,                      #040d    

005A 753800          144                     MOV             FLAG_PASSOU_PRIMEIRO_SENSOR,#00h 

005D 753900          145                     MOV             FLAG_CALCULAR_VELOCIDADE,       #00h

0060 754000          146                     MOV             VELOCIDADE_VEICULO_UNIDADE, #00h

0063 754100          147                     MOV             VELOCIDADE_VEICULO_DEZENA,      #00h

                     148                     

0066 22              149                     RET

                     150                     

                     151     

                     152     

                     153     

                     154     

                     155     

                     156     

                     157     

0067                 158     RESETA_TIMER_MEDICOES:

0067 754400          159                     MOV             TIMER_MEDICOES_LOW,     #00h

006A 754500          160                     MOV             TIMER_MEDICOES_LSB,     #00h

006D 754600          161                     MOV             TIMER_MEDICOES_MSB,     #00h

                     162                     

0070 754200          163                     MOV             VELOCIDADE_VEICULO,     #00h

                     164                     

0073 22              165                     RET

                     166                     

                     167     

                     168     

                     169     

                     170     

                     171     

                     172     

                     173     

                     174     

                     175     

0074                 176     SINALIZA_LOMBADA_LIGADA:

0074 7801            177                     MOV             R0, #001h  

0076 7980            178                     MOV             R1, #128d  

                     179                     

                     180                     

                     181                     

                     182                     

0078 7A29            183                     MOV             R2, #029h

007A 7BFF            184                     MOV             R3, #0FFh

007C 7CFF            185                     MOV             R4, #0FFh

007E 7D04            186                     MOV             R5, #00000100b  

                     187                     

0080 1200EE          188                     LCALL   PWM_SQUARE_WAVE_SETUP_AND_START

                     189                     

A51 MACRO ASSEMBLER  PROJETO_02_LOMBADA_ELETRONICA                                        04/28/2017 16:39:47 PAGE     4

0083 22              190                     RET     

                     191     

                     192     

                     193     

                     194     

                     195     

                     196     

                     197     

                     198     

0084                 199     CALCULA_VELOCIDADE:

0084 C3              200                     CLR             C  

                     201                     

                     202                     

                     203                     

                     204     

                     205                     

                     206                     

                     207                     

                     208                     

                     209                     

                     210                     

0085 74FF            211                     MOV             A, #0FFh

0087 9543            212                     SUBB    A, VELOCIDADE_LIMITE

                     213                     

0089 3542            214                     ADDC    A, VELOCIDADE_VEICULO

                     215                     

008B 4004            216                     JC              ACIMA_DO_LIMITE

008D 120095          217                     LCALL   VELOCIDADE_ABAIXO_DO_LIMITE

                     218                     

0090 22              219                     RET

                     220     

0091                 221     ACIMA_DO_LIMITE:

0091 1200A5          222                     LCALL   VELOCIDADE_ACIMA_DO_LIMITE

                     223                     

0094 22              224                     RET     

                     225                     

                     226     

                     227     

                     228     

                     229     

                     230     

                     231     

                     232     

                     233     

0095                 234     VELOCIDADE_ABAIXO_DO_LIMITE:

0095 7802            235                     MOV             R0, #02h  

0097 7980            236                     MOV             R1, #128d  

                     237                     

                     238                     

                     239                     

                     240                     

0099 7A29            241                     MOV             R2, #029h

009B 7BFF            242                     MOV             R3, #0FFh

009D 7CFF            243                     MOV             R4, #0FFh

009F 7D01            244                     MOV             R5, #00000001b  

                     245                     

00A1 1200EE          246                     LCALL   PWM_SQUARE_WAVE_SETUP_AND_START

                     247                     

00A4 22              248                     RET

                     249     

                     250     

                     251     

                     252     

                     253     

                     254     

                     255     

A51 MACRO ASSEMBLER  PROJETO_02_LOMBADA_ELETRONICA                                        04/28/2017 16:39:47 PAGE     5

                     256     

                     257     

00A5                 258     VELOCIDADE_ACIMA_DO_LIMITE:

00A5 7802            259                     MOV             R0, #02h  

00A7 7980            260                     MOV             R1, #128d  

                     261                     

                     262                     

                     263                     

                     264                     

00A9 7A29            265                     MOV             R2, #029h

00AB 7BFF            266                     MOV             R3, #0FFh

00AD 7CFF            267                     MOV             R4, #0FFh

00AF 7D0A            268                     MOV             R5, #00001010b  

                     269                     

00B1 1200EE          270                     LCALL   PWM_SQUARE_WAVE_SETUP_AND_START

                     271                     

00B4 22              272                     RET

                     273     

                     274     

                     275     

                     276     

                     277     

                     278     

                     279     

                     280     

                     281     

                     282     

                     283     

                     284     

00B5                 285     ACIONA_BUZZER_X20MS:

00B5 D293            286                     SETB    BUZZER

00B7 11D6            287                     ACALL   TIMER_DELAY_20_MS

00B9 C293            288                     CLR     BUZZER

                     289                     

00BB 22              290                     RET

                     291                     

                     292     

                     293     

                     294     

                     295     

                     296     

                     297     

                     298     

00BC                 299     ACIONA_BUZZER_X1S:

00BC D293            300                     SETB    BUZZER

00BE 11E7            301                     ACALL   TIMER_DELAY_1_S

00C0 C293            302                     CLR     BUZZER

                     303                     

00C2 22              304                     RET

                     305     

                     306     

                     307     

                     308     

                     309     

                     310     

                     311     

                     312     

                     313     

                     314     

                     315     

                     316     

00C3                 317     TIMER_CONFIGURA_TIMER:

00C3 758921          318                     MOV     TMOD, #00100001b  

                     319                     

00C6 11CF            320                     ACALL   TIMER_SETA_VALORES_TIMER_PADRAO

                     321                     

A51 MACRO ASSEMBLER  PROJETO_02_LOMBADA_ELETRONICA                                        04/28/2017 16:39:47 PAGE     6

                     322                     

                     323                     

                     324                     

                     325                     

                     326                     

                     327                     

00C8 758DFF          328                     MOV     TH1, #0FFh

00CB 758B7A          329                     MOV             TL1, #122d

                     330                                     

00CE 22              331                     RET

                     332                     

                     333     

                     334     

                     335     

                     336     

                     337     

                     338     

                     339     

00CF                 340     TIMER_SETA_VALORES_TIMER_PADRAO:

                     341                     

                     342                     

00CF 758C2F          343                     MOV     TH0, #HIGH(65535 - 53330)

00D2 758AAD          344                     MOV     TL0, #LOW(65535 - 53330)

                     345                                     

00D5 22              346                     RET

                     347     

                     348     

                     349     

                     350     

                     351     

                     352     

                     353     

                     354     

00D6                 355     TIMER_DELAY_20_MS:

00D6 1200CF          356                     LCALL   TIMER_SETA_VALORES_TIMER_PADRAO

                     357                     

00D9 C28D            358                     CLR     TF0

00DB D28C            359                     SETB    TR0

                     360             

00DD 308DFD          361                     JNB     TF0, $

                     362                     

00E0 C28D            363                     CLR     TF0

00E2 C28C            364                     CLR     TR0

                     365             

00E4 D8F0            366                     DJNZ    R0, TIMER_DELAY_20_MS

                     367             

00E6 22              368                     RET

                     369                     

                     370     

                     371     

                     372     

                     373     

                     374     

                     375     

                     376     

00E7                 377     TIMER_DELAY_1_S:

00E7 7832            378                     MOV             R0, #50d

00E9 11D6            379                     CALL    TIMER_DELAY_20_MS

                     380                     

00EB D9FA            381                     DJNZ    R1, TIMER_DELAY_1_S

                     382             

00ED 22              383                     RET

                     384                     

                     385     

                     386     

                     387     

A51 MACRO ASSEMBLER  PROJETO_02_LOMBADA_ELETRONICA                                        04/28/2017 16:39:47 PAGE     7

                     388     

                     389     

                     390     

                     391     

                     392     

                     393     

                     394     

                     395     

                     396     

                     397     

                     398     

                     399     

                     400     

                     401     

                     402     

                     403     

                     404     

00EE                 405     PWM_SQUARE_WAVE_SETUP_AND_START:

00EE 8931            406                     MOV     PWM_DUTY_CYCLE, R1

                     407             

00F0 120104          408                     LCALL   PWM_SQUARE_WAVE_CONFIG_PERIOD

                     409             

00F3 D28C            410                     SETB    TR0

                     411     

00F5                 412     CONTINUA_PWM:

00F5 12011C          413                     LCALL   PWM_SQUARE_WAVE

                     414                     

00F8 E532            415                     MOV     A, PWM_COUNTER

00FA B536F8          416                     CJNE    A, PWM_QTDADE_PERIODOS, CONTINUA_PWM

                     417     

00FD                 418     PWM_PARAR:

00FD 120119          419                     LCALL   PWM_STOP

                     420                     

0100 753200          421                     MOV             PWM_COUNTER, #00h

                     422                     

0103 22              423                     RET

                     424     

                     425     

                     426     

                     427     

                     428     

                     429     

                     430     

                     431     

                     432     

                     433     

                     434     

0104                 435     PWM_SQUARE_WAVE_CONFIG_PERIOD:

0104 8A35            436                     MOV             PWM_PERIODO_MSB, R2

0106 8B34            437                     MOV             PWM_PERIODO_MED, R3

0108 8C33            438                     MOV             PWM_PERIODO_LSB, R4

                     439                     

                     440                     

                     441                     

010A E8              442                     MOV             A, R0

010B 28              443                     ADD             A, R0

010C F536            444                     MOV             PWM_QTDADE_PERIODOS, A

                     445                     

010E AE34            446                     MOV             R6, PWM_PERIODO_MED

0110 AF35            447                     MOV             R7, PWM_PERIODO_MSB

                     448                     

0112 758CFF          449                     MOV     TH0, #0FFh

0115 85338A          450                     MOV             TL0, PWM_PERIODO_LSB

                     451                     

0118 22              452                     RET

                     453     

A51 MACRO ASSEMBLER  PROJETO_02_LOMBADA_ELETRONICA                                        04/28/2017 16:39:47 PAGE     8

                     454     

                     455     

                     456     

                     457     

                     458     

                     459     

                     460     

0119                 461     PWM_STOP:

0119 C28C            462                     CLR     TR0

                     463                     

011B 22              464                     RET

                     465             

                     466     

                     467     

                     468     

                     469     

                     470     

                     471     

                     472     

                     473     

                     474     

                     475     

                     476     

                     477     

011C                 478     PWM_SQUARE_WAVE:        

011C 308DFD          479                     JNB     TF0, $

                     480             

011F DE2B            481                     DJNZ    R6, CONTINUE_SQUARE

0121 AE34            482                     MOV             R6, PWM_PERIODO_MED

                     483                     

0123 DF27            484                     DJNZ    R7, CONTINUE_SQUARE

0125 AF35            485                     MOV             R7, PWM_PERIODO_MSB     

                     486     

                     487                     

0127 0532            488                     INC             PWM_COUNTER

                     489     

0129 20000E          490                     JB              PWM_FLAG, HIGH_DONE

                     491             

012C                 492     LOW_DONE:                       

012C D200            493                     SETB    PWM_FLAG

                     494                     

012E 120165          495                     LCALL   DEFINE_PINOS_A_SEREM_ATIVADOS_DESATIVADOS

                     496                     

0131 758CFF          497                     MOV             TH0, #0FFh

0134 85318A          498                     MOV     TL0, PWM_DUTY_CYCLE             

                     499                     

0137 C28D            500                     CLR     TF0

                     501                     

0139 22              502                     RET

                     503                                     

013A                 504     HIGH_DONE:

013A C200            505                     CLR     PWM_FLAG                         

                     506                             

013C 120165          507                     LCALL   DEFINE_PINOS_A_SEREM_ATIVADOS_DESATIVADOS

                     508                     

013F 74FF            509                     MOV     A, #0FFh                 

0141 C3              510                     CLR             C

0142 9531            511                     SUBB    A, PWM_DUTY_CYCLE

                     512                     

0144 758CFF          513                     MOV     TH0, #0FFh                       

0147 F58A            514                     MOV             TL0, A

                     515                     

0149 C28D            516                     CLR     TF0                                      

                     517                     

014B 22              518                     RET

                     519     

A51 MACRO ASSEMBLER  PROJETO_02_LOMBADA_ELETRONICA                                        04/28/2017 16:39:47 PAGE     9

014C                 520     CONTINUE_SQUARE:

014C 30000D          521                     JNB             PWM_FLAG, CONTINUE_SQUARE_LOW

                     522             

014F                 523     CONTINUE_SQUARE_HIGH:

014F 74FF            524                     MOV     A, #0FFh                 

0151 C3              525                     CLR             C

0152 9531            526                     SUBB    A, PWM_DUTY_CYCLE

                     527                     

0154 758CFF          528                     MOV     TH0, #0FFh                       

0157 F58A            529                     MOV             TL0, A

                     530                     

0159 C28D            531                     CLR     TF0

                     532     

015B 22              533                     RET

                     534                     

015C                 535     CONTINUE_SQUARE_LOW:

015C 758CFF          536                     MOV             TH0, #0FFh

015F 85318A          537                     MOV     TL0, PWM_DUTY_CYCLE

                     538                     

0162 C28D            539                     CLR     TF0

                     540                     

0164 22              541                     RET

                     542     

                     543     

                     544     

                     545     

                     546     

                     547     

                     548     

                     549     

                     550     

                     551     

                     552     

                     553     

0165                 554     DEFINE_PINOS_A_SEREM_ATIVADOS_DESATIVADOS:

0165 7401            555                     MOV             A, #01h

0167 5D              556                     ANL             A, R5

0168 6002            557                     JZ              NAO_ATIVA_BIT_0

                     558                     

016A B290            559                     CPL     PINO_LED_VERDE

                     560                     

016C                 561     NAO_ATIVA_BIT_0:

016C 7402            562                     MOV             A, #02h

016E 5D              563                     ANL             A, R5

016F 6002            564                     JZ              NAO_ATIVA_BIT_1

                     565                     

0171 B291            566                     CPL     PINO_LED_VERMELHO

                     567     

0173                 568     NAO_ATIVA_BIT_1:

0173 7404            569                     MOV             A, #04h

0175 5D              570                     ANL             A, R5

0176 6002            571                     JZ              NAO_ATIVA_BIT_2

                     572                     

0178 B292            573                     CPL     PINO_LED_AMARELO

                     574     

017A                 575     NAO_ATIVA_BIT_2:

017A 7408            576                     MOV             A, #08h

017C 5D              577                     ANL             A, R5

017D 6002            578                     JZ              NAO_ATIVA_BIT_3

                     579                     

017F B293            580                     CPL     BUZZER

                     581     

0181                 582     NAO_ATIVA_BIT_3:

0181 22              583                     RET

                     584     

                     585     

A51 MACRO ASSEMBLER  PROJETO_02_LOMBADA_ELETRONICA                                        04/28/2017 16:39:47 PAGE    10

                     586     

                     587     

                     588     

                     589     

                     590     

                     591     

                     592     

                     593     

                     594     

                     595     

                     596     

0182                 597     INT_CONFIGURA_INTERRUPCOES:

                     598                     

0182 D2AF            599                     SETB    EA

0184 D2A8            600                     SETB    EX0

0186 D2AA            601                     SETB    EX1

0188 D2AB            602                     SETB    ET1

                     603                     

                     604                     

018A D2B8            605                     SETB    PX0              

018C D2BA            606                     SETB    PX1              

018E C2BB            607                     CLR             PT1              

                     608                     

                     609                     

0190 D289            610                     SETB    IE0              

0192 D28B            611                     SETB    IE1              

0194 C28A            612                     CLR             IT1              

                     613                     

0196 22              614                     RET

                     615     

                     616     

                     617     

                     618     

                     619     

                     620     

                     621     

                     622     

0197                 623     INT_EXT0:

0197 C0E0            624                     PUSH    ACC

0199 C0D0            625                     PUSH    PSW

                     626                     

019B 7805            627                     MOV     R0, #05h                 

019D 11D6            628                     ACALL   TIMER_DELAY_20_MS

                     629                     

019F D28E            630                     SETB    TR1

01A1 753801          631                     MOV             FLAG_PASSOU_PRIMEIRO_SENSOR, #01h

                     632                     

01A4 D0D0            633                     POP             PSW

01A6 D0E0            634                     POP             ACC

                     635                     

01A8 32              636                     RETI

                     637     

                     638     

                     639     

                     640     

                     641     

                     642     

                     643     

                     644     

01A9                 645     INT_TIMER0:

01A9 32              646                     RETI

                     647             

                     648     

                     649     

                     650     

                     651     

A51 MACRO ASSEMBLER  PROJETO_02_LOMBADA_ELETRONICA                                        04/28/2017 16:39:47 PAGE    11

                     652     

                     653     

                     654     

01AA                 655     INT_EXT1:

01AA C0E0            656                     PUSH    ACC

01AC C0D0            657                     PUSH    PSW

                     658                     

01AE 7805            659                     MOV     R0, #05h                 

01B0 11D6            660                     ACALL   TIMER_DELAY_20_MS

                     661                     

01B2 E538            662                     MOV             A, FLAG_PASSOU_PRIMEIRO_SENSOR

01B4 6005            663                     JZ              FINALIZA_INT_EXT1       

                     664                     

01B6 C28E            665                     CLR             TR1

                     666                     

01B8 753901          667                     MOV             FLAG_CALCULAR_VELOCIDADE, #01h

                     668                     

01BB                 669     FINALIZA_INT_EXT1:

01BB D0D0            670                     POP             PSW

01BD D0E0            671                     POP             ACC

                     672                     

01BF 32              673                     RETI

                     674     

                     675     

                     676     

                     677     

                     678     

                     679     

                     680     

                     681     

                     682     

                     683     

                     684     

01C0                 685     INT_TIMER1:

01C0 C0E0            686                     PUSH    ACC

01C2 C0D0            687                     PUSH    PSW

                     688                     

01C4 758B7A          689                     MOV             TL1, #122d

01C7 C28F            690                     CLR             TF1

                     691                     

01C9 E544            692                     MOV             A, TIMER_MEDICOES_LOW

01CB B4140F          693                     CJNE    A, #014h, INCREMENTA_TIMER_MEDICOES_LOW

                     694             

01CE E545            695                     MOV             A, TIMER_MEDICOES_LSB

01D0 B4FF0E          696                     CJNE    A, #0FFh, INCREMENTA_TIMER_MEDICOES_LSB

                     697                     

01D3 754400          698                     MOV             TIMER_MEDICOES_LOW, #00h

01D6 754500          699                     MOV             TIMER_MEDICOES_LSB, #00h

01D9 0546            700                     INC             TIMER_MEDICOES_MSB

01DB 21E6            701                     AJMP    FINALIZA_TIMER_1

                     702             

01DD                 703     INCREMENTA_TIMER_MEDICOES_LOW:

01DD 0544            704                     INC             TIMER_MEDICOES_LOW

01DF 21E6            705                     AJMP    FINALIZA_TIMER_1

                     706                     

01E1                 707     INCREMENTA_TIMER_MEDICOES_LSB:

01E1 754400          708                     MOV             TIMER_MEDICOES_LOW, #00h

01E4 0545            709                     INC             TIMER_MEDICOES_LSB

                     710     

01E6                 711     FINALIZA_TIMER_1:

01E6 D0D0            712                     POP             PSW

01E8 D0E0            713                     POP             ACC

                     714                     

01EA 32              715                     RETI

                     716             

                     717     

A51 MACRO ASSEMBLER  PROJETO_02_LOMBADA_ELETRONICA                                        04/28/2017 16:39:47 PAGE    12

                     718     

                     719     

                     720     

                     721     

                     722     

                     723     

01EB                 724     INT_SERIAL:

01EB 32              725                     RETI

                     726             

01EC                 727     FIM:

01EC 80FE            728                     JMP $

                     729                     END

A51 MACRO ASSEMBLER  PROJETO_02_LOMBADA_ELETRONICA                                        04/28/2017 16:39:47 PAGE    13

SYMBOL TABLE LISTING
------ ----- -------


N A M E                                    T Y P E  V A L U E   ATTRIBUTES

ACC . . . . . . . . . . . . . . . . . .    D ADDR   00E0H   A   
ACIMA_DO_LIMITE . . . . . . . . . . . .    C ADDR   0091H   A   
ACIONA_BUZZER_X1S . . . . . . . . . . .    C ADDR   00BCH   A   
ACIONA_BUZZER_X20MS . . . . . . . . . .    C ADDR   00B5H   A   
BUZZER. . . . . . . . . . . . . . . . .    B ADDR   0090H.3 A   
CALCULA_VELOCIDADE. . . . . . . . . . .    C ADDR   0084H   A   
CONTINUA_PWM. . . . . . . . . . . . . .    C ADDR   00F5H   A   
CONTINUE_SQUARE . . . . . . . . . . . .    C ADDR   014CH   A   
CONTINUE_SQUARE_HIGH. . . . . . . . . .    C ADDR   014FH   A   
CONTINUE_SQUARE_LOW . . . . . . . . . .    C ADDR   015CH   A   
DEFINE_PINOS_A_SEREM_ATIVADOS_DESATIVADOS  C ADDR   0165H   A   
DISTANCIA_SENSORES. . . . . . . . . . .    N NUMB   0037H   A   
EA. . . . . . . . . . . . . . . . . . .    B ADDR   00A8H.7 A   
ESPERA_SENSOR_2 . . . . . . . . . . . .    C ADDR   003CH   A   
ET1 . . . . . . . . . . . . . . . . . .    B ADDR   00A8H.3 A   
EX0 . . . . . . . . . . . . . . . . . .    B ADDR   00A8H.0 A   
EX1 . . . . . . . . . . . . . . . . . .    B ADDR   00A8H.2 A   
FIM . . . . . . . . . . . . . . . . . .    C ADDR   01ECH   A   
FINALIZA_INT_EXT1 . . . . . . . . . . .    C ADDR   01BBH   A   
FINALIZA_TIMER_1. . . . . . . . . . . .    C ADDR   01E6H   A   
FLAG_CALCULAR_VELOCIDADE. . . . . . . .    N NUMB   0039H   A   
FLAG_PASSOU_PRIMEIRO_SENSOR . . . . . .    N NUMB   0038H   A   
HIGH_DONE . . . . . . . . . . . . . . .    C ADDR   013AH   A   
IE0 . . . . . . . . . . . . . . . . . .    B ADDR   0088H.1 A   
IE1 . . . . . . . . . . . . . . . . . .    B ADDR   0088H.3 A   
INCREMENTA_TIMER_MEDICOES_LOW . . . . .    C ADDR   01DDH   A   
INCREMENTA_TIMER_MEDICOES_LSB . . . . .    C ADDR   01E1H   A   
INICIO. . . . . . . . . . . . . . . . .    C ADDR   0039H   A   
INT_CONFIGURA_INTERRUPCOES. . . . . . .    C ADDR   0182H   A   
INT_EXT0. . . . . . . . . . . . . . . .    C ADDR   0197H   A   
INT_EXT1. . . . . . . . . . . . . . . .    C ADDR   01AAH   A   
INT_SERIAL. . . . . . . . . . . . . . .    C ADDR   01EBH   A   
INT_TIMER0. . . . . . . . . . . . . . .    C ADDR   01A9H   A   
INT_TIMER1. . . . . . . . . . . . . . .    C ADDR   01C0H   A   
IT1 . . . . . . . . . . . . . . . . . .    B ADDR   0088H.2 A   
LED1. . . . . . . . . . . . . . . . . .    B ADDR   00B0H.7 A   
LED_SEG . . . . . . . . . . . . . . . .    B ADDR   00B0H.6 A   
LOW_DONE. . . . . . . . . . . . . . . .    C ADDR   012CH   A   
NAO_ATIVA_BIT_0 . . . . . . . . . . . .    C ADDR   016CH   A   
NAO_ATIVA_BIT_1 . . . . . . . . . . . .    C ADDR   0173H   A   
NAO_ATIVA_BIT_2 . . . . . . . . . . . .    C ADDR   017AH   A   
NAO_ATIVA_BIT_3 . . . . . . . . . . . .    C ADDR   0181H   A   
P1. . . . . . . . . . . . . . . . . . .    D ADDR   0090H   A   
P3. . . . . . . . . . . . . . . . . . .    D ADDR   00B0H   A   
PINO_LED_AMARELO. . . . . . . . . . . .    B ADDR   0090H.2 A   
PINO_LED_VERDE. . . . . . . . . . . . .    B ADDR   0090H.0 A   
PINO_LED_VERMELHO . . . . . . . . . . .    B ADDR   0090H.1 A   
PSW . . . . . . . . . . . . . . . . . .    D ADDR   00D0H   A   
PT1 . . . . . . . . . . . . . . . . . .    B ADDR   00B8H.3 A   
PWM_COUNTER . . . . . . . . . . . . . .    N NUMB   0032H   A   
PWM_DUTY_CYCLE. . . . . . . . . . . . .    N NUMB   0031H   A   
PWM_FLAG. . . . . . . . . . . . . . . .    N NUMB   0000H   A   
PWM_PARAR . . . . . . . . . . . . . . .    C ADDR   00FDH   A   
PWM_PERIODO_LSB . . . . . . . . . . . .    N NUMB   0033H   A   
PWM_PERIODO_MED . . . . . . . . . . . .    N NUMB   0034H   A   
PWM_PERIODO_MSB . . . . . . . . . . . .    N NUMB   0035H   A   
PWM_QTDADE_PERIODOS . . . . . . . . . .    N NUMB   0036H   A   
PWM_SQUARE_WAVE . . . . . . . . . . . .    C ADDR   011CH   A   
PWM_SQUARE_WAVE_CONFIG_PERIOD . . . . .    C ADDR   0104H   A   
PWM_SQUARE_WAVE_SETUP_AND_START . . . .    C ADDR   00EEH   A   
A51 MACRO ASSEMBLER  PROJETO_02_LOMBADA_ELETRONICA                                        04/28/2017 16:39:47 PAGE    14

PWM_STOP. . . . . . . . . . . . . . . .    C ADDR   0119H   A   
PX0 . . . . . . . . . . . . . . . . . .    B ADDR   00B8H.0 A   
PX1 . . . . . . . . . . . . . . . . . .    B ADDR   00B8H.2 A   
RESETA_TIMER_MEDICOES . . . . . . . . .    C ADDR   0067H   A   
SETA_VARIAVEIS_INICIAIS . . . . . . . .    C ADDR   004CH   A   
SINALIZA_LOMBADA_LIGADA . . . . . . . .    C ADDR   0074H   A   
TF0 . . . . . . . . . . . . . . . . . .    B ADDR   0088H.5 A   
TF1 . . . . . . . . . . . . . . . . . .    B ADDR   0088H.7 A   
TH0 . . . . . . . . . . . . . . . . . .    D ADDR   008CH   A   
TH1 . . . . . . . . . . . . . . . . . .    D ADDR   008DH   A   
TIMER_CONFIGURA_TIMER . . . . . . . . .    C ADDR   00C3H   A   
TIMER_DELAY_1_S . . . . . . . . . . . .    C ADDR   00E7H   A   
TIMER_DELAY_20_MS . . . . . . . . . . .    C ADDR   00D6H   A   
TIMER_MEDICOES_LOW. . . . . . . . . . .    N NUMB   0044H   A   
TIMER_MEDICOES_LSB. . . . . . . . . . .    N NUMB   0045H   A   
TIMER_MEDICOES_MSB. . . . . . . . . . .    N NUMB   0046H   A   
TIMER_SETA_VALORES_TIMER_PADRAO . . . .    C ADDR   00CFH   A   
TL0 . . . . . . . . . . . . . . . . . .    D ADDR   008AH   A   
TL1 . . . . . . . . . . . . . . . . . .    D ADDR   008BH   A   
TMOD. . . . . . . . . . . . . . . . . .    D ADDR   0089H   A   
TR0 . . . . . . . . . . . . . . . . . .    B ADDR   0088H.4 A   
TR1 . . . . . . . . . . . . . . . . . .    B ADDR   0088H.6 A   
VELOCIDADE_ABAIXO_DO_LIMITE . . . . . .    C ADDR   0095H   A   
VELOCIDADE_ACIMA_DO_LIMITE. . . . . . .    C ADDR   00A5H   A   
VELOCIDADE_LIMITE . . . . . . . . . . .    N NUMB   0043H   A   
VELOCIDADE_VEICULO. . . . . . . . . . .    N NUMB   0042H   A   
VELOCIDADE_VEICULO_DEZENA . . . . . . .    N NUMB   0041H   A   
VELOCIDADE_VEICULO_UNIDADE. . . . . . .    N NUMB   0040H   A   
__STARTUP__ . . . . . . . . . . . . . .    C ADDR   0030H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
