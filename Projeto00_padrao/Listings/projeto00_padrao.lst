A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE     1


MACRO ASSEMBLER A51 V8.2.5.0
OBJECT MODULE PLACED IN .\Objects\projeto00_padrao.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE projeto00_padrao.a51 SET(SMALL) DEBUG PRINT(.\Listings\projeto00_padrao
                      .lst) OBJECT(.\Objects\projeto00_padrao.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     

                       2     

                       3     

                       4     

                       5     

                       6     

                       7     

                       8     

                       9     

                      10     $nomod51 

                      11     ;#include <at89c5131.h>

                +1    12     

                +1    13     

                +1    14     

                +1    15     

                +1    16     

                +1    17     

                +1    18     

                +1    19     

                +1    20     

                +1    21     

                +1    22     

                +1    23     

                +1    24     

                +1    25     

                +1    26     

                +1    27     

                +1    28     

                +1    29     

                +1    30     

                +1    31     

                +1    32     

                +1    33     

                +1    34     

                +1    35     

                +1    36     

                +1    37     

                +1    38     

                +1    39     

                +1    40     

  00E0          +1    41     sfr ACC = 0xE0 ;        /* Sfr ( ACC, bit addressable)*/

  00F0          +1    42     sfr B = 0xF0 ;        /* Sfr ( B,   bit addressable)*/

  00D0          +1    43     sfr PSW = 0xD0 ;        /* Sfr ( PSW, bit addressable)*/

  0081          +1    44     sfr SP = 0x81 ;

  0082          +1    45     sfr DPL = 0x82 ;

  0083          +1    46     sfr DPH = 0x83 ;

                +1    47     

                +1    48     

                +1    49     

                +1    50     

                +1    51     

                +1    52     

  0080          +1    53     sfr P0 = 0x80 ;        /* Sfr ( P0, bit addressable)*/

                +1    54     

  0087          +1    55     sbit P0_7 = P0 ^ 7 ;

  0086          +1    56     sbit P0_6 = P0 ^ 6 ;

  0085          +1    57     sbit P0_5 = P0 ^ 5 ;

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE     2

  0084          +1    58     sbit P0_4 = P0 ^ 4 ;

  0083          +1    59     sbit P0_3 = P0 ^ 3 ;

  0082          +1    60     sbit P0_2 = P0 ^ 2 ;

  0081          +1    61     sbit P0_1 = P0 ^ 1 ;

  0080          +1    62     sbit P0_0 = P0 ^ 0 ;

                +1    63     

  0090          +1    64     sfr P1 = 0x90 ;        /* Sfr ( P1, bit addressable)*/

                +1    65     

  0097          +1    66     sbit P1_7 = P1 ^ 7 ;

  0096          +1    67     sbit P1_6 = P1 ^ 6 ;

  0095          +1    68     sbit P1_5 = P1 ^ 5 ;

  0094          +1    69     sbit P1_4 = P1 ^ 4 ;

  0093          +1    70     sbit P1_3 = P1 ^ 3 ;

  0092          +1    71     sbit P1_2 = P1 ^ 2 ;

  0091          +1    72     sbit P1_1 = P1 ^ 1 ;

  0090          +1    73     sbit P1_0 = P1 ^ 0 ;

                +1    74     

  00A0          +1    75     sfr P2 = 0xA0 ;        /* Sfr ( P2, bit addressable)*/

                +1    76     

  00A7          +1    77     sbit P2_7 = P2 ^ 7 ;

  00A6          +1    78     sbit P2_6 = P2 ^ 6 ;

  00A5          +1    79     sbit P2_5 = P2 ^ 5 ;

  00A4          +1    80     sbit P2_4 = P2 ^ 4 ;

  00A3          +1    81     sbit P2_3 = P2 ^ 3 ;

  00A2          +1    82     sbit P2_2 = P2 ^ 2 ;

  00A1          +1    83     sbit P2_1 = P2 ^ 1 ;

  00A0          +1    84     sbit P2_0 = P2 ^ 0 ;

                +1    85     

  00B0          +1    86     sfr P3 = 0xB0 ;        /* Sfr ( P3, bit addressable)*/

                +1    87     

  00B7          +1    88     sbit P3_7 = P3 ^ 7 ;

  00B6          +1    89     sbit P3_6 = P3 ^ 6 ;

  00B5          +1    90     sbit P3_5 = P3 ^ 5 ;

  00B4          +1    91     sbit P3_4 = P3 ^ 4 ;

  00B3          +1    92     sbit P3_3 = P3 ^ 3 ;

  00B2          +1    93     sbit P3_2 = P3 ^ 2 ;

  00B1          +1    94     sbit P3_1 = P3 ^ 1 ;

  00B0          +1    95     sbit P3_0 = P3 ^ 0 ;

                +1    96     

  00C0          +1    97     sfr P4 = 0xC0 ;        /* Sfr ( P4, bit addressable)*/

                +1    98     

  00C1          +1    99     sbit P4_1 = P4 ^ 1 ;

  00C0          +1   100     sbit P4_0 = P4 ^ 0 ;

                +1   101     

                +1   102     

                +1   103     

                +1   104     

  008C          +1   105     sfr TH0 = 0x8C ; 

  008A          +1   106     sfr TL0 = 0x8A ;

  008D          +1   107     sfr TH1 = 0x8D ;

  008B          +1   108     sfr TL1 = 0x8B ;

  00CD          +1   109     sfr TH2 = 0xCD ;

  00CC          +1   110     sfr TL2 = 0xCC ;

  0088          +1   111     sfr TCON = 0x88 ;        /* Sfr ( TCON,  bit addressable)*/

  0089          +1   112     sfr TMOD = 0x89 ;

  00C8          +1   113     sfr T2CON = 0xC8 ;        /* Sfr ( T2CON, bit addressable)*/

  00C9          +1   114     sfr T2MOD = 0xC9 ;

  00CB          +1   115     sfr RCAP2H = 0xCB ;

  00CA          +1   116     sfr RCAP2L = 0xCA ;

  00A6          +1   117     sfr WDTRST = 0xA6 ;

  00A7          +1   118     sfr WDTPRG = 0xA7 ;

                +1   119     

                +1   120                                 

  008F          +1   121     sbit TF1 = TCON ^ 7 ;

  008E          +1   122     sbit TR1 = TCON ^ 6 ;

  008D          +1   123     sbit TF0 = TCON ^ 5 ;

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE     3

  008C          +1   124     sbit TR0 = TCON ^ 4 ;

  008B          +1   125     sbit IE1_ = TCON ^ 3 ;

  008A          +1   126     sbit IT1 = TCON ^ 2 ;

  0089          +1   127     sbit IE0_ = TCON ^ 1 ;

  0088          +1   128     sbit IT0 = TCON ^ 0 ;

                +1   129                                 

  00CF          +1   130     sbit TF2 = T2CON ^ 7 ;

  00CE          +1   131     sbit EXF2 = T2CON ^ 6 ;

  00CD          +1   132     sbit RCLK = T2CON ^ 5 ;

  00CC          +1   133     sbit TCLK = T2CON ^ 4 ;

  00CB          +1   134     sbit EXEN2 = T2CON ^ 3 ;

  00CA          +1   135     sbit TR2 = T2CON ^ 2 ;

  00C9          +1   136     sbit C_T2 = T2CON ^ 1 ;

  00C8          +1   137     sbit CP_RL2 = T2CON ^ 0 ;

                +1   138     

                +1   139     

                +1   140     

                +1   141     

  0098          +1   142     sfr SCON = 0x98 ;

  0099          +1   143     sfr SBUF = 0x99 ;

  00B9          +1   144     sfr SADEN = 0xB9 ;

  00A9          +1   145     sfr SADDR = 0xA9 ;

                +1   146     

  009F          +1   147     sbit FE_SM0 = SCON ^ 7 ;

  009E          +1   148     sbit SM1 = SCON ^ 6 ;

  009D          +1   149     sbit SM2 = SCON ^ 5 ;

  009C          +1   150     sbit REN = SCON ^ 4 ;

  009B          +1   151     sbit TB8 = SCON ^ 3 ;

  009A          +1   152     sbit RB8 = SCON ^ 2 ;

  0099          +1   153     sbit TI = SCON ^ 1 ;

  0098          +1   154     sbit RI = SCON ^ 0 ;

                +1   155     

                +1   156     

                +1   157     

  009A          +1   158     sfr BRL = 0x9A ;

  009B          +1   159     sfr BDRCON = 0x9B ;

                +1   160     

                +1   161     

                +1   162     

  00D8          +1   163     sfr CCON = 0xD8 ;      /* Sfr ( CCON, bit addressable)*/

  00D9          +1   164     sfr CMOD = 0xD9 ;

  00E9          +1   165     sfr CL = 0xE9 ;

  00F9          +1   166     sfr CH = 0xF9 ;

  00DA          +1   167     sfr CCAPM0 = 0xDA ;

  00DB          +1   168     sfr CCAPM1 = 0xDB ;

  00DC          +1   169     sfr CCAPM2 = 0xDC ;

  00DD          +1   170     sfr CCAPM3 = 0xDD ;

  00DE          +1   171     sfr CCAPM4 = 0xDE ;

  00FA          +1   172     sfr CCAP0H = 0xFA ;

  00FB          +1   173     sfr CCAP1H = 0xFB ;

  00FC          +1   174     sfr CCAP2H = 0xFC ;

  00FD          +1   175     sfr CCAP3H = 0xFD ;

  00FE          +1   176     sfr CCAP4H = 0xFE ;

  00EA          +1   177     sfr CCAP0L = 0xEA ;

  00EB          +1   178     sfr CCAP1L = 0xEB ;

  00EC          +1   179     sfr CCAP2L = 0xEC ;

  00ED          +1   180     sfr CCAP3L = 0xED ;

  00EE          +1   181     sfr CCAP4L = 0xEE ;

                +1   182     

                +1   183                                  

  00DF          +1   184     sbit CF = CCON ^ 7 ;

  00DE          +1   185     sbit CR = CCON ^ 6 ;

  00DC          +1   186     sbit CCF4 = CCON ^ 4 ;

  00DB          +1   187     sbit CCF3 = CCON ^ 3 ;

  00DA          +1   188     sbit CCF2 = CCON ^ 2 ;

  00D9          +1   189     sbit CCF1 = CCON ^ 1 ;

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE     4

  00D8          +1   190     sbit CCF0 = CCON ^ 0 ;

                +1   191     

                +1   192     

                +1   193     

                +1   194     

  00A8          +1   195     sfr IEN0 = 0xA8 ;       /* Sfr ( IEN0,  bit addressable                 */

  00B1          +1   196     sfr IEN1 = 0xB1 ;

  00B8          +1   197     sfr IPL0 = 0xB8 ;       /* Sfr ( IPL0, bit addressable          */

  00B7          +1   198     sfr IPH0 = 0xB7 ;

  00B2          +1   199     sfr IPL1 = 0xB2 ;

  00B3          +1   200     sfr IPH1 = 0xB3 ;

                +1   201     

                +1   202                                  

  00AF          +1   203     sbit EA = IEN0 ^ 7 ;

  00AE          +1   204     sbit EC = IEN0 ^ 6 ;

  00AD          +1   205     sbit ET2 = IEN0 ^ 5 ;

  00AC          +1   206     sbit ES = IEN0 ^ 4 ;

  00AB          +1   207     sbit ET1 = IEN0 ^ 3 ;

  00AA          +1   208     sbit EX1 = IEN0 ^ 2 ;

  00A9          +1   209     sbit ET0 = IEN0 ^ 1 ;

  00A8          +1   210     sbit EX0 = IEN0 ^ 0 ;

                +1   211                                  

  00BE          +1   212     sbit PPCL = IPL0 ^ 6 ;

  00BD          +1   213     sbit PT2L = IPL0 ^ 5 ;

  00BC          +1   214     sbit PSL = IPL0 ^ 4 ;

  00BB          +1   215     sbit PTIL = IPL0 ^ 3 ;

  00BA          +1   216     sbit PXIL = IPL0 ^ 2 ;

  00B9          +1   217     sbit PT0L = IPL0 ^ 1 ;

  00B8          +1   218     sbit PX0L = IPL0 ^ 0 ;

                +1   219     

                +1   220     

                +1   221     

  00A3          +1   222     sfr PLLCON = 0xA3 ;

  00A4          +1   223     sfr PLLDIV = 0xA4 ;

                +1   224     

                +1   225     

                +1   226     

  009E          +1   227     sfr KBF = 0x9E ;

  009D          +1   228     sfr KBE = 0x9D ;

  009C          +1   229     sfr KBLS = 0x9C ;

                +1   230     

                +1   231     

                +1   232     

  0093          +1   233     sfr SSCON = 0x93 ;

  0094          +1   234     sfr SSCS = 0x94 ;

  0095          +1   235     sfr SSDAT = 0x95 ;

  0096          +1   236     sfr SSADR = 0x96 ;

                +1   237     

                +1   238     

                +1   239     

  00C3          +1   240     sfr SPCON = 0xC3 ;

  00C4          +1   241     sfr SPSTA = 0xC4 ;

  00C5          +1   242     sfr SPDAT = 0xC5 ;

                +1   243     

                +1   244     

                +1   245     

  00BC          +1   246     sfr USBCON = 0xBC ;

  00C6          +1   247     sfr USBADDR = 0xC6 ;

  00BD          +1   248     sfr USBINT = 0xBD ;

  00BE          +1   249     sfr USBIEN = 0xBE ;

  00C7          +1   250     sfr UEPNUM = 0xC7 ;

  00D4          +1   251     sfr UEPCONX = 0xD4 ;

  00CE          +1   252     sfr UEPSTAX = 0xCE ;

  00D5          +1   253     sfr UEPRST = 0xD5 ;

  00F8          +1   254     sfr UEPINT = 0xF8 ;         /* Sfr ( UEPINT, bit addressable) */

  00C2          +1   255     sfr UEPIEN = 0xC2 ;

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE     5

  00CF          +1   256     sfr UEPDATX = 0xCF ;

  00E2          +1   257     sfr UBYCTLX = 0xE2 ;

  00E3          +1   258     sfr UBYCTHX = 0xE3 ;

  00D6          +1   259     sfr UDPADDL = 0xD6 ;

  00D7          +1   260     sfr UDPADDH = 0xD7 ;

  00BA          +1   261     sfr UFNUML = 0xBA ;

  00BB          +1   262     sfr UFNUMH = 0xBB ;

                +1   263                                     

  00FE          +1   264     sbit EP6INT = UEPINT ^ 6 ;

  00FD          +1   265     sbit EP5INT = UEPINT ^ 5 ;

  00FC          +1   266     sbit EP4INT = UEPINT ^ 4 ;

  00FB          +1   267     sbit EP3INT = UEPINT ^ 3 ;

  00FA          +1   268     sbit EP2INT = UEPINT ^ 2 ;

  00F9          +1   269     sbit EP1INT = UEPINT ^ 1 ;

  00F8          +1   270     sbit EP0INT = UEPINT ^ 0 ;

                +1   271     

                +1   272     

                +1   273     

  0087          +1   274     sfr PCON = 0x87 ;

  008E          +1   275     sfr AUXR = 0x8E ;

  00A2          +1   276     sfr AUXR1 = 0xA2 ;

  008F          +1   277     sfr CKCON0 = 0x8F ;

  00AF          +1   278     sfr CKCON1 = 0xAF ;

  0085          +1   279     sfr CKSEL = 0x85 ;

  00F1          +1   280     sfr LEDCON = 0xF1 ;

  00D1          +1   281     sfr FCON = 0xD1 ;

  00D2          +1   282     sfr EECON = 0xD2 ;

                +1   283     

                +1   284     

                +1   285     

                +1   286     

                     287     

                     288     ;#include "lcd16x2.a51"

                +1   289     

                +1   290     

                +1   291     

                +1   292     

                +1   293     

                +1   294     

                +1   295     

                +1   296     

                +1   297     

                +1   298     

                +1   299     

                +1   300     

0F00            +1   301     ORG             0F00h

                +1   302     

                +1   303     

                +1   304     

                +1   305     

                +1   306     

                +1   307     

  0080          +1   308     DISPLAY EQU P0

  0087          +1   309     BUSYF   EQU     P0.7                     

                +1   310     

  00A5          +1   311     RS              EQU     P2.5                     

  00A7          +1   312     E_LCD   EQU     P2.7                     

  00A6          +1   313     RW              EQU     P2.6                     

                +1   314     

                +1   315     

                +1   316     

                +1   317     

                +1   318     

                +1   319     

                +1   320     

                +1   321     

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE     6

                +1   322     

                +1   323     

0F00            +1   324     INIDISP:

0F00 7838       +1   325             MOV     R0,#38h           

0F02 7A05       +1   326             MOV     R2,#05h           

0F04 F11F       +1   327             CALL    ESCINST           

                +1   328             

0F06 7838       +1   329                     MOV     R0,#38h           

0F08 7A01       +1   330             MOV     R2,#01h           

0F0A F11F       +1   331             CALL    ESCINST           

                +1   332             

0F0C 7806       +1   333                     MOV     R0,#06h           

0F0E 7A01       +1   334             MOV     R2,#01h           

0F10 F11F       +1   335             CALL    ESCINST           

                +1   336             

0F12 780C       +1   337                     MOV     R0,#0Ch           

0F14 7A01       +1   338             MOV     R2,#01h           

0F16 F11F       +1   339             CALL    ESCINST           

                +1   340             

0F18 7801       +1   341                     MOV     R0,#01h           

0F1A 7A02       +1   342             MOV     R2,#02h           

0F1C F11F       +1   343             CALL    ESCINST           

                +1   344             

0F1E 22         +1   345                     RET

                +1   346                     

                +1   347     

                +1   348     

                +1   349     

                +1   350     

                +1   351     

                +1   352     

                +1   353     

                +1   354     

                +1   355     

0F1F            +1   356     ESCINST:  

0F1F C2A6       +1   357                     CLR             RW                               

0F21 C2A5       +1   358                     CLR     RS               

0F23 D2A7       +1   359                     SETB    E_LCD            

                +1   360                     

0F25 8880       +1   361                     MOV     DISPLAY, R0      

                +1   362                     

0F27 C2A7       +1   363                     CLR     E_LCD            

                +1   364                     

0F29 7580FF     +1   365                     MOV             DISPLAY,#0xFF    

                +1   366                     

0F2C D2A6       +1   367                     SETB    RW                               

0F2E D2A7       +1   368                     SETB    E_LCD            

                +1   369     

0F30 2087FD     +1   370                     JB              BUSYF, $                 

                +1   371                     

0F33 C2A7       +1   372                     CLR     E_LCD            

                +1   373             

0F35 22         +1   374                     RET

                +1   375                     

                +1   376     

                +1   377     

                +1   378     

                +1   379     

                +1   380     

                +1   381     

                +1   382     

                +1   383     

0F36            +1   384     GOTOXY: 

0F36 C0E0       +1   385                     PUSH    ACC

                +1   386             

0F38 7480       +1   387                     MOV     A, #80h

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE     7

0F3A B80102     +1   388             CJNE    R0, #01h, GT1       

                +1   389             

0F3D 74C0       +1   390                     MOV     A, #0C0h

                +1   391                     

0F3F 49         +1   392     GT1:    ORL     A, R1              

0F40 F8         +1   393             MOV     R0, A

0F41 7A01       +1   394             MOV     R2, #01h           

                +1   395             

0F43 F11F       +1   396                     CALL    ESCINST            

                +1   397             

0F45 D0E0       +1   398                     POP     ACC

                +1   399             

0F47 22         +1   400                     RET

                +1   401             

                +1   402     

                +1   403     

                +1   404     

                +1   405     

                +1   406     

                +1   407     

                +1   408     

                +1   409     

0F48            +1   410     CLR1L:    

0F48 C0E0       +1   411             PUSH   ACC

                +1   412             

0F4A 7800       +1   413                     MOV    R0, #00h               

0F4C 7900       +1   414             MOV    R1, #00h

                +1   415             

0F4E F136       +1   416                     CALL   GOTOXY

                +1   417             

0F50 7910       +1   418                     MOV    R1, #16              

                +1   419     

0F52 7420       +1   420     CLR1L1: MOV    A,#' '               

                +1   421             

0F54 F17A       +1   422                     CALL   ESCDADO

                +1   423             

0F56 D9FA       +1   424                     DJNZ   R1, CLR1L1

0F58 7800       +1   425             MOV    R0, #00               

0F5A 7900       +1   426             MOV    R1, #00

                +1   427             

0F5C F136       +1   428                     CALL   GOTOXY

                +1   429             

0F5E D0E0       +1   430                     POP    ACC

                +1   431             

0F60 22         +1   432                     RET

                +1   433                     

                +1   434     

                +1   435     

                +1   436     

                +1   437     

                +1   438     

                +1   439     

                +1   440     

                +1   441     

0F61            +1   442     CLR2L:    

0F61 C0E0       +1   443             PUSH   ACC

                +1   444             

0F63 7801       +1   445                     MOV    R0,#01               

0F65 7900       +1   446             MOV    R1,#00

                +1   447             

0F67 F136       +1   448                     CALL   GOTOXY

                +1   449             

0F69 7910       +1   450                     MOV    R1,#16               

                +1   451     

0F6B 7420       +1   452     CLR2L1: MOV    A,#' '               

                +1   453             

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE     8

0F6D F17A       +1   454                     CALL   ESCDADO

                +1   455             

0F6F D9FA       +1   456                     DJNZ   R1,CLR2L1

0F71 7801       +1   457             MOV    R0,#01               

0F73 7900       +1   458             MOV    R1,#00

                +1   459             

0F75 F136       +1   460                     CALL   GOTOXY

                +1   461             

0F77 D0E0       +1   462                     POP    ACC

                +1   463             

0F79 22         +1   464                     RET

                +1   465                

                +1   466     

                +1   467     

                +1   468     

                +1   469     

                +1   470     

                +1   471     

                +1   472     

0F7A            +1   473     ESCDADO:  

0F7A C2A6       +1   474                     CLR             RW                               

0F7C D2A5       +1   475             SETB    RS               

0F7E D2A7       +1   476             SETB    E_LCD            

                +1   477                     

0F80 F580       +1   478             MOV     DISPLAY, A       

                +1   479             

0F82 C2A7       +1   480                     CLR     E_LCD            

                +1   481                     

0F84 7580FF     +1   482                     MOV             DISPLAY,#0xFF    

                +1   483                     

0F87 D2A6       +1   484                     SETB    RW                               

0F89 C2A5       +1   485                     CLR             RS                               

0F8B D2A7       +1   486                     SETB    E_LCD            

                +1   487     

0F8D 2087FD     +1   488                     JB              BUSYF, $                 

                +1   489     

0F90 C2A7       +1   490                     CLR     E_LCD            

                +1   491     

0F92 22         +1   492             RET

                +1   493                     

                +1   494     

                +1   495     

                +1   496     

                +1   497     

                +1   498     

                +1   499     

                +1   500     

                +1   501     

                +1   502     

0F93            +1   503     MSTRING:  

0F93 E4         +1   504                     CLR     A

                +1   505                       

0F94 93         +1   506             MOVC    A, @A+DPTR       

                +1   507               

0F95 6006       +1   508                     JZ      MSTR1

                +1   509               

0F97 120F7A     +1   510                     LCALL   ESCDADO         

                +1   511               

0F9A A3         +1   512                     INC     DPTR

                +1   513               

0F9B 80F6       +1   514                     SJMP    MSTRING

                +1   515                       

0F9D            +1   516     MSTR1:  

0F9D 22         +1   517                     RET

                +1   518                

                +1   519     

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE     9

                +1   520     

                +1   521     

                +1   522     

                +1   523     

                +1   524     

                +1   525     

                +1   526     

                +1   527     

0F9E            +1   528     MSTRINGX: 

0F9E E0         +1   529                     MOVX    A, @DPTR         

                +1   530               

0F9F 6006       +1   531                     JZ      MSTR21

                +1   532               

0FA1 120F7A     +1   533                     LCALL   ESCDADO         

                +1   534               

0FA4 A3         +1   535                     INC     DPTR

                +1   536               

0FA5 80F7       +1   537                     SJMP    MSTRINGX

                +1   538     

0FA7            +1   539     MSTR21:   

0FA7 22         +1   540                     RET

                +1   541     

                +1   542     

                +1   543     

                +1   544     

                +1   545     

                +1   546     

                +1   547     

                +1   548     

                +1   549     

                +1   550     

0FA8            +1   551     ESC_STR1: 

                +1   552                       

0FA8 7800       +1   553                       MOV    R0, #00         

0FAA 7900       +1   554               MOV    R1, #00

0FAC 8004       +1   555                       JMP    ESC_S

                +1   556               

                +1   557     

                +1   558     

                +1   559     

                +1   560     

                +1   561     

                +1   562     

                +1   563     

                +1   564     

                +1   565     

0FAE            +1   566     ESC_STR2: 

                +1   567                       

0FAE 7801       +1   568                       MOV    R0,#01         

0FB0 7900       +1   569               MOV    R1,#00

                +1   570                       

0FB2 120F36     +1   571     ESC_S:    LCALL  GOTOXY          

                +1   572               

0FB5 120F93     +1   573                       LCALL  MSTRING

                +1   574               

0FB8 22         +1   575                       RET

                +1   576     

                +1   577     

                +1   578     

                +1   579     

                +1   580     

                +1   581     

                +1   582     

                +1   583     ; DESTROI: R0,R2                                                                        //

                +1   584     

0FB9            +1   585     CUR_ON:   

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    10

0FB9 780F       +1   586                       MOV    R0,#0Fh               

0FBB 8002       +1   587               SJMP   CUR1

                +1   588                       

0FBD            +1   589     CUR_OFF:  

0FBD 780C       +1   590                       MOV    R0,#0Ch               

                +1   591                       

0FBF 7A01       +1   592     CUR1:     MOV    R2,#01

                +1   593               

0FC1 F11F       +1   594                       CALL   ESCINST               

                +1   595               

0FC3 22         +1   596                       RET

                +1   597                       

                +1   598     

                +1   599     

                +1   600     

                +1   601     

                +1   602     

                +1   603     

                +1   604     

0FC4            +1   605     ESCREVE_ASTERISCO:

0FC4 C0E0       +1   606                     PUSH    ACC

                +1   607                     

0FC6 742A       +1   608                     MOV     A, #2Ah  

0FC8 F17A       +1   609                     CALL    ESCDADO

                +1   610             

0FCA D0E0       +1   611                     POP             ACC

                +1   612             

0FCC 22         +1   613                     RET

                     614     

                     615     ;#include "display_7_segmentos.a51"

                +1   616     

                +1   617     

                +1   618     

                +1   619     

                +1   620     

                +1   621     

                +1   622     

                +1   623     

                +1   624     

                +1   625     

                +1   626     

                +1   627     

                +1   628     

                +1   629     

                +1   630     

0E00            +1   631     ORG             0E00h

                +1   632     

                +1   633     

                +1   634     

                +1   635     

                +1   636     

  0080          +1   637     PORT_DISPLAY                            EQU     P0

  0090          +1   638     DISPLAY_UNIDADE                         EQU P1.0

  0091          +1   639     DISPLAY_DEZENA                          EQU P1.1

  0092          +1   640     DISPLAY_CENTENA                         EQU     P1.2

                +1   641             

  00FF          +1   642     QTD_DIGITOS                                     EQU 0FFh

                +1   643             

                +1   644     

                +1   645     

                +1   646     

                +1   647     

0E00            +1   648     TAB7SEG:

0E00 3F065B4F   +1   649             DB 3Fh, 06h, 5Bh, 4Fh, 66h, 6Dh, 7Dh, 07h, 7Fh, 6Fh, 77h, 7Ch, 39h, 5Eh, 79h, 71h

0E04 666D7D07                
0E08 7F6F777C                
A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    11

0E0C 395E7971                
                +1   650                     

                +1   651     

                +1   652     

                +1   653     

                +1   654     

                +1   655     

                +1   656     

                +1   657     

0E10            +1   658     MOSTRA_DIGITO_DISPLAY:

0E10 C083       +1   659                     PUSH    DPH

0E12 C082       +1   660                     PUSH    DPL

                +1   661     

0E14 900E00     +1   662                     MOV     DPTR, #TAB7SEG   

                +1   663                     

0E17 93         +1   664                     MOVC    A, @A + DPTR     

0E18 F4         +1   665             CPL     A                

0E19 F580       +1   666                     MOV     PORT_DISPLAY, A  

                +1   667                     

0E1B D082       +1   668                     POP     DPL

0E1D D083       +1   669                     POP     DPH

                +1   670                     

0E1F 22         +1   671                     RET

                +1   672                     

                +1   673     

                +1   674     

                +1   675     

                +1   676     

                +1   677     

                +1   678     

                +1   679     

                +1   680     

                +1   681     

                +1   682     

                +1   683     

                +1   684     

                +1   685     

                +1   686     

                +1   687     

0E20            +1   688     BINARIO_BCD:

0E20 C0E0       +1   689                     PUSH    ACC

0E22 C0F0       +1   690                     PUSH    B

                +1   691     

0E24 C290       +1   692                     CLR             DISPLAY_UNIDADE

0E26 C291       +1   693                     CLR             DISPLAY_DEZENA

0E28 C292       +1   694                     CLR             DISPLAY_CENTENA

                +1   695                     

                +1   696                     

0E2A E9         +1   697                     MOV             A, R1

0E2B FB         +1   698                     MOV             R3, A

                +1   699     

0E2C            +1   700     CONTINUA_BINARIO_BCD:

0E2C E8         +1   701                     MOV     A, R0

0E2D 75F064     +1   702                     MOV     B, #100d  

                +1   703                     

0E30 84         +1   704                     DIV     AB

0E31 D290       +1   705                     SETB    DISPLAY_UNIDADE

0E33 D110       +1   706                     ACALL   MOSTRA_DIGITO_DISPLAY

                +1   707                     

0E35 7801       +1   708                     MOV             R0,     #01h

0E37 120D13     +1   709                     LCALL   TIMER_DELAY_1_MS

                +1   710                     

0E3A E5F0       +1   711                     MOV     A, B

0E3C 75F00A     +1   712                     MOV     B, #10d

                +1   713                     

0E3F 84         +1   714                     DIV     AB

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    12

0E40 C290       +1   715                     CLR     DISPLAY_UNIDADE

0E42 D291       +1   716                     SETB    DISPLAY_DEZENA

0E44 D110       +1   717                     ACALL   MOSTRA_DIGITO_DISPLAY

                +1   718                     

0E46 7801       +1   719                     MOV             R0,     #01h

0E48 120D13     +1   720                     LCALL   TIMER_DELAY_1_MS

                +1   721                     

0E4B E5F0       +1   722                     MOV     A, B

                +1   723                     

0E4D C291       +1   724                     CLR     DISPLAY_DEZENA

0E4F D292       +1   725                     SETB    DISPLAY_CENTENA

0E51 D110       +1   726                     ACALL   MOSTRA_DIGITO_DISPLAY

                +1   727                     

0E53 7801       +1   728                     MOV             R0,     #01h

0E55 120D13     +1   729                     LCALL   TIMER_DELAY_1_MS

                +1   730                     

0E58 C292       +1   731                     CLR             DISPLAY_CENTENA

                +1   732                     

                +1   733                     

0E5A D9D0       +1   734                     DJNZ    R1, CONTINUA_BINARIO_BCD

                +1   735                     

0E5C EB         +1   736                     MOV             A, R3

0E5D F9         +1   737                     MOV             R1, A

                +1   738                     

0E5E DACC       +1   739                     DJNZ    R2, CONTINUA_BINARIO_BCD  

                +1   740                     

0E60 D0F0       +1   741                     POP     B

0E62 D0E0       +1   742                     POP             ACC

                +1   743                     

0E64 22         +1   744                     RET

                     745     

                     746     ;#include "timer.a51"

                +1   747     

                +1   748     

                +1   749     

                +1   750     

                +1   751     

                +1   752     

                +1   753     

                +1   754     

                +1   755     

0D00            +1   756     ORG             0D00h

                +1   757     

                +1   758     

                +1   759     

                +1   760     

                +1   761     

                +1   762     

                +1   763     

                +1   764     

                +1   765     

                +1   766     

                +1   767     

                +1   768     

                +1   769     

                +1   770     

                +1   771     

                +1   772     

0D00            +1   773     TIMER_CONFIGURA_TIMER_SEM_INT:

0D00 8F89       +1   774                     MOV     TMOD, R7  

                +1   775                     

0D02 B105       +1   776                     ACALL   SETA_VALORES_TIMER_SEM_INT

                +1   777                     

0D04 22         +1   778                     RET

                +1   779                     

                +1   780     

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    13

                +1   781     

                +1   782     

                +1   783     

                +1   784     

                +1   785     

                +1   786     

                +1   787     

                +1   788     

                +1   789     

0D05            +1   790     SETA_VALORES_TIMER_SEM_INT:

0D05 8E8D       +1   791                     MOV     TH1, R6

0D07 8D8B       +1   792                     MOV     TL1, R5

0D09 8C8C       +1   793                     MOV     TH0, R4

0D0B 8B8A       +1   794                     MOV     TL0, R3

                +1   795                     

0D0D 22         +1   796                     RET

                +1   797     

                +1   798     

                +1   799     

                +1   800     

                +1   801     

                +1   802     

                +1   803     

                +1   804     

0D0E            +1   805     TIMER_DELAY_10_US: 

0D0E 7E02       +1   806                     MOV     R6, #02d     

0D10 DEFE       +1   807                     DJNZ    R6, $

                +1   808                     

0D12 22         +1   809                     RET

                +1   810                     

                +1   811     

                +1   812     

                +1   813     

                +1   814     

                +1   815     

                +1   816     

                +1   817     

                +1   818     

                +1   819     

                +1   820     

0D13            +1   821     TIMER_DELAY_1_MS:

                +1   822                     

0D13 7F01       +1   823                     MOV             R7, #00000001b

0D15 7E00       +1   824                     MOV             R6, #00h

0D17 7D00       +1   825                     MOV             R5, #00h

0D19 7CF8       +1   826                     MOV     R4, #HIGH(65535 - 1984)

0D1B 7B3F       +1   827                     MOV     R3, #LOW(65535 - 1984)

0D1D B100       +1   828                     ACALL   TIMER_CONFIGURA_TIMER_SEM_INT

                +1   829     

0D1F            +1   830     CONTINUA_TIMER_1_MS:

0D1F C28D       +1   831                     CLR     TF0

0D21 D28C       +1   832                     SETB    TR0

                +1   833             

0D23 308DFD     +1   834                     JNB     TF0, $

                +1   835                             

0D26 B105       +1   836                     ACALL   SETA_VALORES_TIMER_SEM_INT

                +1   837                     

0D28 C28D       +1   838                     CLR     TF0

0D2A C28C       +1   839                     CLR     TR0

                +1   840             

0D2C D8F1       +1   841                     DJNZ    R0, CONTINUA_TIMER_1_MS

                +1   842             

0D2E 22         +1   843                     RET

                +1   844     

                +1   845     

                +1   846     

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    14

                +1   847     

                +1   848     

                +1   849     

                +1   850     

                +1   851     

0D2F            +1   852     TIMER_DELAY_200_MS:

0D2F 78C8       +1   853                     MOV             R0, #0C8h 

                +1   854     

0D31 B113       +1   855                     ACALL   TIMER_DELAY_1_MS

                +1   856                     

0D33 D9FA       +1   857                     DJNZ    R1, TIMER_DELAY_200_MS

                +1   858             

0D35 22         +1   859                     RET

                +1   860             

                +1   861     

                +1   862     

                +1   863     

                +1   864     

                +1   865     

                +1   866     

                +1   867     

0D36            +1   868     TIMER_DELAY_1_S:

0D36 7905       +1   869                     MOV             R1, #05h

0D38 B12F       +1   870                     ACALL   TIMER_DELAY_200_MS

                +1   871                     

0D3A DAFA       +1   872                     DJNZ    R2, TIMER_DELAY_1_S

                +1   873             

0D3C 22         +1   874                     RET

                +1   875                     

                +1   876     

                +1   877     

                +1   878     

                +1   879     

                +1   880     

                +1   881     

                +1   882     

                +1   883     

                +1   884     

                +1   885     

                +1   886     

                +1   887     

0D3D            +1   888     TIMER_DELAY:

0D3D C0E0       +1   889                     PUSH    ACC

0D3F C0F0       +1   890                     PUSH    B

                +1   891     

0D41 BA0013     +1   892                     CJNE    R2, #00h, CHAMA_TIMER_1_S

                +1   893     

0D44            +1   894     VERIFICA_R1:

0D44 B90009     +1   895                     CJNE    R1, #00h, CHAMA_TIMER_200_MS

                +1   896                     

0D47            +1   897     VERIFICA_R0:

0D47 B80002     +1   898                     CJNE    R0, #00h, CHAMA_TIMER_1_MS

                +1   899                     

0D4A A161       +1   900                     AJMP    FINALIZA_TIMER_DELAY

                +1   901                     

0D4C            +1   902     CHAMA_TIMER_1_MS:

0D4C B113       +1   903                     ACALL   TIMER_DELAY_1_MS

0D4E A161       +1   904                     AJMP    FINALIZA_TIMER_DELAY

                +1   905     

0D50            +1   906     CHAMA_TIMER_200_MS:

0D50 EE         +1   907                     MOV             A, R6

0D51 E8         +1   908                     MOV             A, R0

                +1   909                     

0D52 B12F       +1   910                     ACALL   TIMER_DELAY_200_MS

                +1   911                     

0D54 F8         +1   912                     MOV             R0, A

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    15

                +1   913                     

0D55 A147       +1   914                     AJMP    VERIFICA_R0

                +1   915                     

0D57            +1   916     CHAMA_TIMER_1_S:

0D57 E8         +1   917                     MOV             A, R0

0D58 89F0       +1   918                     MOV             B, R1

                +1   919     

0D5A B136       +1   920                     ACALL   TIMER_DELAY_1_S

                +1   921                     

0D5C F8         +1   922                     MOV             R0, A

0D5D A9F0       +1   923                     MOV             R1, B

                +1   924                     

0D5F A144       +1   925                     AJMP    VERIFICA_R1

                +1   926     

0D61            +1   927     FINALIZA_TIMER_DELAY:

0D61 D0F0       +1   928                     POP             B

0D63 D0E0       +1   929                     POP     ACC

                +1   930                     

0D65 22         +1   931                     RET

                     932     

                     933     ;#include "teclado_matricial_4x4.a51"

                +1   934     

                +1   935     

                +1   936     

                +1   937     

                +1   938     

                +1   939     

                +1   940     

                +1   941     

                +1   942     

                +1   943     

                +1   944     

0C00            +1   945     ORG             0C00h

                +1   946     

  0090          +1   947     TECLADO         EQU     P1

                +1   948             

                +1   949     

  0090          +1   950     COL1            EQU P1.0

  0091          +1   951     COL2            EQU P1.1

  0092          +1   952     COL3            EQU P1.2

  0093          +1   953     COL4            EQU P1.3

                +1   954             

  0094          +1   955     LIN1            EQU P1.4

  0095          +1   956     LIN2            EQU P1.5

  0096          +1   957     LIN3            EQU P1.6

  0097          +1   958     LIN4            EQU P1.7

                +1   959     

                +1   960     

                +1   961     

                +1   962     

                +1   963     

                +1   964     

                +1   965     

                +1   966     

0C00            +1   967     PRESS_ENT:

0C00 75907F     +1   968                     MOV             TECLADO, #01111111b              

                +1   969                     

0C03            +1   970     VARRE_ENT:

0C03 309302     +1   971                     JNB     COL4, CONTINUA_PROG      

                +1   972                     

0C06 80FB       +1   973                     JMP     VARRE_ENT

0C08            +1   974     CONTINUA_PROG:

0C08 22         +1   975                     RET

                +1   976                     

                +1   977     

                +1   978     

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    16

                +1   979     

                +1   980     

                +1   981     

                +1   982     

                +1   983     

0C09            +1   984     VARREDURA_TECLADO:

0C09 C294       +1   985                     CLR     LIN1

0C0B D295       +1   986                     SETB    LIN2

0C0D D296       +1   987                     SETB    LIN3

0C0F D297       +1   988                     SETB    LIN4

                +1   989                     

0C11 309129     +1   990                     JNB     COL2, DIGITO1

0C14 30922A     +1   991                     JNB     COL3, DIGITO2

0C17 30932B     +1   992                     JNB     COL4, DIGITO3

                +1   993                     

0C1A C295       +1   994                     CLR     LIN2

0C1C D294       +1   995                     SETB    LIN1

                +1   996                     

0C1E 309128     +1   997                     JNB     COL2, DIGITO4

0C21 309229     +1   998                     JNB     COL3, DIGITO5

0C24 30932A     +1   999                     JNB     COL4, DIGITO6

                +1  1000                     

0C27 C296       +1  1001                     CLR     LIN3

0C29 D295       +1  1002                     SETB    LIN2

                +1  1003                     

0C2B 309127     +1  1004                     JNB     COL2, DIGITO7

0C2E 309228     +1  1005                     JNB     COL3, DIGITO8

0C31 309329     +1  1006                     JNB     COL4, DIGITO9

                +1  1007                     

0C34 C297       +1  1008                     CLR     LIN4

0C36 D296       +1  1009                     SETB    LIN3

                +1  1010                     

                +1  1011                     

0C38 309226     +1  1012                     JNB     COL3, DIGITO0

                +1  1013                     

                +1  1014                     

0C3B 80CC       +1  1015                     JMP     VARREDURA_TECLADO

                +1  1016                     

                +1  1017     

                +1  1018     

                +1  1019     

                +1  1020     

                +1  1021     

                +1  1022     

                +1  1023     

                +1  1024     

0C3D            +1  1025     DIGITO1: 

0C3D 7401       +1  1026                     MOV A, #1h

0C3F 8165       +1  1027                     AJMP GRAVA_DIGITO

0C41            +1  1028     DIGITO2:

0C41 7402       +1  1029                     MOV A, #2h

0C43 8165       +1  1030                     AJMP GRAVA_DIGITO

0C45            +1  1031     DIGITO3: 

0C45 7403       +1  1032                     MOV A, #3h

0C47 8165       +1  1033                     AJMP GRAVA_DIGITO

0C49            +1  1034     DIGITO4:

0C49 7404       +1  1035                     MOV A, #4h

0C4B 8165       +1  1036                     AJMP GRAVA_DIGITO

0C4D            +1  1037     DIGITO5:

0C4D 7405       +1  1038                     MOV A, #5h

0C4F 8165       +1  1039                     AJMP GRAVA_DIGITO

0C51            +1  1040     DIGITO6:

0C51 7406       +1  1041                     MOV A, #6h

0C53 8165       +1  1042                     AJMP GRAVA_DIGITO

0C55            +1  1043     DIGITO7:

0C55 7407       +1  1044                     MOV A, #7h

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    17

0C57 8165       +1  1045                     AJMP GRAVA_DIGITO

0C59            +1  1046     DIGITO8:

0C59 7408       +1  1047                     MOV A, #8h

0C5B 8165       +1  1048                     AJMP GRAVA_DIGITO

0C5D            +1  1049     DIGITO9:

0C5D 7409       +1  1050                     MOV A, #9h

0C5F 8165       +1  1051                     AJMP GRAVA_DIGITO

0C61            +1  1052     DIGITO0:

0C61 7400       +1  1053                     MOV A, #0h

0C63 8165       +1  1054                     AJMP GRAVA_DIGITO

                +1  1055                      

0C65            +1  1056     GRAVA_DIGITO:

0C65 F7         +1  1057                     MOV @R1, A

                +1  1058             

0C66 22         +1  1059                     RET

                    1060     

                    1061     ;#include "motor_de_passos.a51"

                +1  1062     

                +1  1063     

                +1  1064     

                +1  1065     

                +1  1066     

                +1  1067     

                +1  1068     

                +1  1069     

                +1  1070     

                +1  1071     

                +1  1072     

                +1  1073     

0B00            +1  1074     ORG             0B00h

                +1  1075     

                +1  1076     

  00B1          +1  1077     ESTADO_UM               EQU P3.1

  00B2          +1  1078     ESTADO_DOIS     EQU P3.2

  00B3          +1  1079     ESTADO_TRES     EQU P3.3

  00B4          +1  1080     ESTADO_QUATRO   EQU P3.4

                +1  1081     

                +1  1082     

                +1  1083     

                +1  1084     

                +1  1085     

                +1  1086     

                +1  1087     

                +1  1088     

                +1  1089     

                +1  1090     

                +1  1091     

                +1  1092     

0B00            +1  1093     INICIA_MOTOR_DE_PASSOS:

0B00 D2B1       +1  1094                     SETB    ESTADO_UM

0B02 C2B2       +1  1095                     CLR             ESTADO_DOIS

0B04 C2B3       +1  1096                     CLR             ESTADO_TRES

0B06 C2B4       +1  1097                     CLR             ESTADO_QUATRO

                +1  1098                     

0B08 120D3D     +1  1099                     LCALL   TIMER_DELAY

                +1  1100                     

0B0B C2B1       +1  1101                     CLR             ESTADO_UM

0B0D D2B2       +1  1102                     SETB    ESTADO_DOIS

                +1  1103                     

0B0F 120D3D     +1  1104                     LCALL   TIMER_DELAY

                +1  1105                     

0B12 C2B2       +1  1106                     CLR             ESTADO_DOIS

0B14 D2B3       +1  1107                     SETB    ESTADO_TRES

                +1  1108                     

0B16 120D3D     +1  1109                     LCALL   TIMER_DELAY

                +1  1110                     

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    18

0B19 C2B3       +1  1111                     CLR             ESTADO_TRES

0B1B D2B4       +1  1112                     SETB    ESTADO_QUATRO

                +1  1113                     

0B1D 120D3D     +1  1114                     LCALL   TIMER_DELAY

                +1  1115                     

0B20 DBDE       +1  1116                     DJNZ    R3, INICIA_MOTOR_DE_PASSOS

                +1  1117                     

0B22 22         +1  1118                     RET

                +1  1119     

                +1  1120     

                +1  1121     

                +1  1122     

                +1  1123     

                +1  1124     

                +1  1125     

                +1  1126     

                +1  1127     

                +1  1128     

                +1  1129     

                +1  1130     

0B23            +1  1131     RETORNA_MOTOR_DE_PASSOS:

0B23 C2B1       +1  1132                     CLR             ESTADO_UM

0B25 C2B2       +1  1133                     CLR             ESTADO_DOIS

0B27 C2B3       +1  1134                     CLR             ESTADO_TRES

0B29 D2B4       +1  1135                     SETB    ESTADO_QUATRO

                +1  1136                     

0B2B 120D3D     +1  1137                     LCALL   TIMER_DELAY

                +1  1138                     

0B2E D2B3       +1  1139                     SETB    ESTADO_TRES

0B30 C2B4       +1  1140                     CLR             ESTADO_QUATRO

                +1  1141                     

0B32 120D3D     +1  1142                     LCALL   TIMER_DELAY

                +1  1143                     

0B35 D2B2       +1  1144                     SETB    ESTADO_DOIS

0B37 C2B3       +1  1145                     CLR             ESTADO_TRES

                +1  1146                     

0B39 120D3D     +1  1147                     LCALL   TIMER_DELAY

                +1  1148                     

0B3C D2B1       +1  1149                     SETB    ESTADO_UM

0B3E C2B2       +1  1150                     CLR             ESTADO_DOIS

                +1  1151                     

0B40 120D3D     +1  1152                     LCALL   TIMER_DELAY

                +1  1153                     

0B43 DBDE       +1  1154                     DJNZ    R3, RETORNA_MOTOR_DE_PASSOS

                +1  1155     

0B45 22         +1  1156                     RET

                    1157     

                    1158     ;#include "serial.a51"

                +1  1159     

                +1  1160     

                +1  1161     

                +1  1162     

                +1  1163     

                +1  1164     

                +1  1165     

                +1  1166     

                +1  1167             

0A00            +1  1168     ORG             0A00h

                +1  1169             

                +1  1170     

                +1  1171     

                +1  1172     

                +1  1173     

                +1  1174     

                +1  1175     

                +1  1176     

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    19

                +1  1177     

                +1  1178     

                +1  1179     

                +1  1180     

0A00            +1  1181     CONFIGURA_SERIAL:

0A00 8887       +1  1182                     MOV     PCON, R0

0A02 8998       +1  1183                     MOV     SCON, R1

                +1  1184                     

0A04 C298       +1  1185                     CLR             RI

0A06 C299       +1  1186                     CLR             TI

                +1  1187     

0A08 22         +1  1188                     RET

                +1  1189             

                +1  1190     

                +1  1191     

                +1  1192     

                +1  1193     

                +1  1194     

                +1  1195     

                +1  1196     

                +1  1197     

                +1  1198     

                +1  1199     

0A09            +1  1200     CONFIGURA_BAUD_RATE:

0A09 8889       +1  1201                     MOV     TMOD, R0  

0A0B 888D       +1  1202                     MOV     TH1, R0   

                +1  1203                     

0A0D D28E       +1  1204                     SETB    TR1

                +1  1205     

0A0F 22         +1  1206                     RET

                +1  1207                     

                +1  1208     

                +1  1209     

                +1  1210     

                +1  1211     

                +1  1212     

                +1  1213     

                +1  1214     

0A10            +1  1215     RECEBE_DADO:

0A10 3098FD     +1  1216                     JNB             RI, $

                +1  1217                     

0A13 C298       +1  1218                     CLR             RI

                +1  1219                     

0A15 E599       +1  1220                     MOV             A, SBUF

                +1  1221     

0A17 22         +1  1222                     RET

                +1  1223     

                +1  1224     

                +1  1225     

                +1  1226     

                +1  1227     

                +1  1228     

                +1  1229     

                +1  1230     

0A18            +1  1231     ENVIA_DADO:

0A18 F599       +1  1232                     MOV             SBUF, A

                +1  1233                     

0A1A 3099FD     +1  1234                     JNB             TI, $

                +1  1235                     

0A1D C299       +1  1236                     CLR             TI

                +1  1237                     

0A1F 22         +1  1238                     RET

                +1  1239     

                +1  1240     

                +1  1241     

                +1  1242     

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    20

                +1  1243     

                +1  1244     

                +1  1245     

                +1  1246     

0A20            +1  1247     ENVIA_OK:

0A20 C0E0       +1  1248                     PUSH    ACC

                +1  1249     

0A22 C299       +1  1250                     CLR     TI

                +1  1251                     

0A24 744F       +1  1252                     MOV     A, #'O'

0A26 F599       +1  1253                     MOV             SBUF, A

                +1  1254                     

0A28 3099FD     +1  1255                     JNB             TI, $

                +1  1256                     

0A2B C299       +1  1257                     CLR             TI      

                +1  1258                     

0A2D 744B       +1  1259                     MOV     A, #'K'

0A2F F599       +1  1260                     MOV     SBUF, A

                +1  1261                     

0A31 3099FD     +1  1262                     JNB     TI, $

                +1  1263                     

0A34 C299       +1  1264                     CLR             TI

                +1  1265                     

0A36 D0E0       +1  1266                     POP             ACC

                +1  1267                     

0A38 22         +1  1268                     RET

                    1269     

                    1270     ;#include "pwm_com_timer.a51"

                +1  1271     

                +1  1272     

                +1  1273     

                +1  1274     

                +1  1275     

                +1  1276     

                +1  1277     

                +1  1278     

                +1  1279     

0500            +1  1280     ORG             0500h

                +1  1281     

  0090          +1  1282     PWM_PORT                        EQU     P1

  0090          +1  1283     PWM_PIN_0                       EQU P1.0

  0091          +1  1284     PWM_PIN_1                       EQU P1.1

  0092          +1  1285     PWM_PIN_2                       EQU P1.2

                +1  1286             

  0000          +1  1287     PWM_FLAG                        EQU 0    

                +1  1288     

  00FE          +1  1289     WAVE_FORM_SINE          EQU 0FEh

  00FD          +1  1290     WAVE_FORM_SQUARE        EQU 0FDh

                +1  1291     

  00FC          +1  1292     WAVE_FORM                       EQU 0FCh         

  00FB          +1  1293     PWM_DUTY_CYCLE          EQU 0FBh  

  00FA          +1  1294     PWM_COUNTER                     EQU 0FAh

                +1  1295     

                +1  1296     

  00F9          +1  1297     PWM_PERIODO_LSB         EQU 0F9h

  00F8          +1  1298     PWM_PERIODO_MED         EQU 0F8h        

  00F7          +1  1299     PWM_PERIODO_MSB         EQU 0F7h

  00F6          +1  1300     PWM_QTDADE_PERIODOS     EQU 0F6h

                +1  1301     

                +1  1302     

                +1  1303     

                +1  1304     

0A50            +1  1305     org 0A50h

0A50            +1  1306     SINE_WAVE_25_SAMPLES:

0A50 7FA0BFD9   +1  1307             DB 127, 160, 191, 217, 237, 250, 255, 250, 237, 217, 191, 160, 127, 94, 63, 37, 17,
                              4, 0, 4, 17, 37, 63, 94, 127

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    21

0A54 EDFAFFFA                
0A58 EDD9BFA0                
0A5C 7F5E3F25                
0A60 11040004                
0A64 11253F5E                
0A68 7F                      
0A69            +1  1308     SINE_WAVE_37_SAMPLES:

0A69 8096ACC0   +1  1309             DB 128, 150, 172, 192, 210, 226, 239, 248, 254, 255, 254, 248, 239, 226, 210, 192, 
                             172, 150, 128, 106, 84, 64, 46, 30, 17, 8, 2, 0, 2, 8, 17, 30, 46, 64, 84, 106, 128

0A6D D2E2EFF8                
0A71 FEFFFEF8                
0A75 EFE2D2C0                
0A79 AC96806A                
0A7D 54402E1E                
0A81 11080200                
0A85 0208111E                
0A89 2E40546A                
0A8D 80                      
0A8E            +1  1310     SINE_WAVE_71_SAMPLES:

0A8E 808B96A1   +1  1311             DB 128, 139, 150, 161, 172, 182, 192, 201, 210, 218, 226, 233, 239, 245, 248, 253, 
                             254, 255, 254, 253, 248, 245, 239, 233, 226, 218, 210, 201, 192, 182, 172, 161, 150, 139, 1
                             28, 117, 106, 95, 84, 74, 64, 55, 46, 38, 30, 24, 17, 13, 8, 5, 2, 1, 0, 1, 2, 5, 8, 13, 17
                             , 24, 30, 38, 46, 55, 64, 74, 84, 95, 106, 117, 128

0A92 ACB6C0C9                
0A96 D2DAE2E9                
0A9A EFF5F8FD                
0A9E FEFFFEFD                
0AA2 F8F5EFE9                
0AA6 E2DAD2C9                
0AAA C0B6ACA1                
0AAE 968B8075                
0AB2 6A5F544A                
0AB6 40372E26                
0ABA 1E18110D                
0ABE 08050201                
0AC2 00010205                
0AC6 080D1118                
0ACA 1E262E37                
0ACE 404A545F                
0AD2 6A7580                  
                +1  1312     

                +1  1313     

                +1  1314     

                +1  1315     

                +1  1316     

                +1  1317     

                +1  1318     

                +1  1319     

                +1  1320     

                +1  1321     

                +1  1322     

                +1  1323     

                +1  1324     

                +1  1325     

                +1  1326     

                +1  1327     

                +1  1328     

                +1  1329     

                +1  1330     

                +1  1331     

                +1  1332     

                +1  1333     

                +1  1334     

                +1  1335     

                +1  1336     

                +1  1337     

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    22

0AD5            +1  1338     PWM_SQUARE_WAVE_SETUP_AND_START:

0AD5 ED         +1  1339                     MOV             A, R5

                +1  1340                     

0AD6 7F01       +1  1341                     MOV             R7, #00000001b

0AD8 7E2F       +1  1342                     MOV     R6, #HIGH(65535 - 53330)

0ADA 7DAD       +1  1343                     MOV     R5, #LOW(65535 - 53330)

0ADC 120D00     +1  1344                     LCALL   TIMER_CONFIGURA_TIMER_SEM_INT

                +1  1345                     

0ADF FD         +1  1346                     MOV             R5, A

                +1  1347                     

0AE0 89FB       +1  1348                     MOV     PWM_DUTY_CYCLE, R1

                +1  1349             

0AE2 120AF6     +1  1350                     LCALL   PWM_SQUARE_WAVE_CONFIG_PERIOD

                +1  1351             

0AE5 D28C       +1  1352                     SETB    TR0

                +1  1353     

0AE7            +1  1354     CONTINUA_PWM:

0AE7 120B0E     +1  1355                     LCALL   PWM_SQUARE_WAVE

                +1  1356                     

0AEA E5FA       +1  1357                     MOV     A, PWM_COUNTER

0AEC B5F6F8     +1  1358                     CJNE    A, PWM_QTDADE_PERIODOS, CONTINUA_PWM

                +1  1359     

0AEF            +1  1360     PWM_PARAR:

0AEF 120B0B     +1  1361                     LCALL   PWM_STOP

                +1  1362                     

0AF2 75FA00     +1  1363                     MOV             PWM_COUNTER, #00h

                +1  1364                     

0AF5 22         +1  1365                     RET

                +1  1366     

                +1  1367     

                +1  1368     

                +1  1369     

                +1  1370     

                +1  1371     

                +1  1372     

                +1  1373     

                +1  1374     

                +1  1375     

                +1  1376     

0AF6            +1  1377     PWM_SQUARE_WAVE_CONFIG_PERIOD:

0AF6 8AF7       +1  1378                     MOV             PWM_PERIODO_MSB, R2

0AF8 8BF8       +1  1379                     MOV             PWM_PERIODO_MED, R3

0AFA 8CF9       +1  1380                     MOV             PWM_PERIODO_LSB, R4

                +1  1381                     

                +1  1382                     

                +1  1383                     

0AFC E8         +1  1384                     MOV             A, R0

0AFD 28         +1  1385                     ADD             A, R0

0AFE F5F6       +1  1386                     MOV             PWM_QTDADE_PERIODOS, A

                +1  1387                     

0B00 AEF8       +1  1388                     MOV             R6, PWM_PERIODO_MED

0B02 AFF7       +1  1389                     MOV             R7, PWM_PERIODO_MSB

                +1  1390                     

0B04 758CFF     +1  1391                     MOV     TH0, #0FFh

0B07 85F98A     +1  1392                     MOV             TL0, PWM_PERIODO_LSB

                +1  1393                     

0B0A 22         +1  1394                     RET

                +1  1395     

                +1  1396     

                +1  1397     

                +1  1398     

                +1  1399     

                +1  1400     

                +1  1401     

                +1  1402     

0B0B            +1  1403     PWM_STOP:

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    23

0B0B C28C       +1  1404                     CLR     TR0

                +1  1405                     

0B0D 22         +1  1406                     RET

                +1  1407     

                +1  1408     

                +1  1409     

                +1  1410     

                +1  1411     

                +1  1412     

                +1  1413     

                +1  1414     

                +1  1415     

                +1  1416     

                +1  1417     

                +1  1418     

                +1  1419     

0B0E            +1  1420     PWM_SQUARE_WAVE:        

0B0E 308DFD     +1  1421                     JNB     TF0, $

                +1  1422             

0B11 DE2B       +1  1423                     DJNZ    R6, CONTINUE_SQUARE

0B13 AEF8       +1  1424                     MOV             R6, PWM_PERIODO_MED

                +1  1425                     

0B15 DF27       +1  1426                     DJNZ    R7, CONTINUE_SQUARE

0B17 AFF7       +1  1427                     MOV             R7, PWM_PERIODO_MSB     

                +1  1428     

                +1  1429                     

0B19 05FA       +1  1430                     INC             PWM_COUNTER

                +1  1431     

0B1B 20000E     +1  1432                     JB              PWM_FLAG, HIGH_DONE

                +1  1433             

0B1E            +1  1434     LOW_DONE:                       

0B1E D200       +1  1435                     SETB    PWM_FLAG

                +1  1436                     

0B20 120B57     +1  1437                     LCALL   DEFINE_PINOS_A_SEREM_ATIVADOS_DESATIVADOS

                +1  1438                     

0B23 758CFF     +1  1439                     MOV             TH0, #0FFh

0B26 85FB8A     +1  1440                     MOV     TL0, PWM_DUTY_CYCLE             

                +1  1441                     

0B29 C28D       +1  1442                     CLR     TF0

                +1  1443                     

0B2B 22         +1  1444                     RET

                +1  1445                                     

0B2C            +1  1446     HIGH_DONE:

0B2C C200       +1  1447                     CLR     PWM_FLAG                         

                +1  1448                             

0B2E 120B57     +1  1449                     LCALL   DEFINE_PINOS_A_SEREM_ATIVADOS_DESATIVADOS

                +1  1450                     

0B31 74FF       +1  1451                     MOV     A, #0FFh                 

0B33 C3         +1  1452                     CLR             C

0B34 95FB       +1  1453                     SUBB    A, PWM_DUTY_CYCLE

                +1  1454                     

0B36 758CFF     +1  1455                     MOV     TH0, #0FFh                       

0B39 F58A       +1  1456                     MOV             TL0, A

                +1  1457                     

0B3B C28D       +1  1458                     CLR     TF0                                      

                +1  1459                     

0B3D 22         +1  1460                     RET

                +1  1461     

0B3E            +1  1462     CONTINUE_SQUARE:

0B3E 30000D     +1  1463                     JNB             PWM_FLAG, CONTINUE_SQUARE_LOW

                +1  1464             

0B41            +1  1465     CONTINUE_SQUARE_HIGH:

0B41 74FF       +1  1466                     MOV     A, #0FFh                 

0B43 C3         +1  1467                     CLR             C

0B44 95FB       +1  1468                     SUBB    A, PWM_DUTY_CYCLE

                +1  1469                     

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    24

0B46 758CFF     +1  1470                     MOV     TH0, #0FFh                       

0B49 F58A       +1  1471                     MOV             TL0, A

                +1  1472                     

0B4B C28D       +1  1473                     CLR     TF0

                +1  1474     

0B4D 22         +1  1475                     RET

                +1  1476                     

0B4E            +1  1477     CONTINUE_SQUARE_LOW:

0B4E 758CFF     +1  1478                     MOV             TH0, #0FFh

0B51 85FB8A     +1  1479                     MOV     TL0, PWM_DUTY_CYCLE

                +1  1480                     

0B54 C28D       +1  1481                     CLR     TF0

                +1  1482                     

0B56 22         +1  1483                     RET

                +1  1484     

                +1  1485     

                +1  1486     

                +1  1487     

                +1  1488     

                +1  1489     

                +1  1490     

                +1  1491     

                +1  1492     

                +1  1493     

                +1  1494     

0B57            +1  1495     DEFINE_PINOS_A_SEREM_ATIVADOS_DESATIVADOS:

0B57 7401       +1  1496                     MOV             A, #01h

0B59 5D         +1  1497                     ANL             A, R5

0B5A 6002       +1  1498                     JZ              NAO_ATIVA_BIT_0

                +1  1499                     

0B5C B290       +1  1500                     CPL     PWM_PIN_0

                +1  1501                     

0B5E            +1  1502     NAO_ATIVA_BIT_0:

0B5E 7402       +1  1503                     MOV             A, #02h

0B60 5D         +1  1504                     ANL             A, R5

0B61 6002       +1  1505                     JZ              NAO_ATIVA_BIT_1

                +1  1506                     

0B63 B291       +1  1507                     CPL     PWM_PIN_1

                +1  1508     

0B65            +1  1509     NAO_ATIVA_BIT_1:

0B65 7404       +1  1510                     MOV             A, #04h

0B67 5D         +1  1511                     ANL             A, R5

0B68 6002       +1  1512                     JZ              NAO_ATIVA_BIT_2

                +1  1513                     

0B6A B292       +1  1514                     CPL     PWM_PIN_2

                +1  1515     

0B6C            +1  1516     NAO_ATIVA_BIT_2:

0B6C 22         +1  1517                     RET

                +1  1518                     

                +1  1519     

                +1  1520     

                +1  1521     

                +1  1522     

                +1  1523     

                +1  1524     

                +1  1525     

                +1  1526     

                +1  1527     

                +1  1528     

                +1  1529     

                +1  1530     

                +1  1531     

                +1  1532     

                +1  1533     

                +1  1534     

                +1  1535     

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    25

                +1  1536     

                +1  1537     

                +1  1538     

                +1  1539     

                +1  1540     

                +1  1541     

                +1  1542     

                +1  1543     

                +1  1544     

                +1  1545     

                +1  1546     

                +1  1547     

                +1  1548     

                +1  1549     

                +1  1550     

                +1  1551     

                +1  1552     

                +1  1553     

                +1  1554     

                +1  1555     

                +1  1556     

                +1  1557     

                +1  1558     

                +1  1559     

                +1  1560     

                +1  1561     

                +1  1562     

                +1  1563     

                +1  1564     

                +1  1565     

                +1  1566     

                +1  1567     

                +1  1568     

                +1  1569     

                +1  1570     

                +1  1571     

                +1  1572     

                +1  1573     

                +1  1574     

                +1  1575     

                +1  1576     

                +1  1577     

                +1  1578     

                +1  1579     

                +1  1580     

                +1  1581     

                +1  1582     

                +1  1583     

                +1  1584     

                +1  1585     

                +1  1586     

                +1  1587     

                +1  1588     

                +1  1589     

                +1  1590     

                +1  1591     

                +1  1592     

                +1  1593     

                +1  1594     

                +1  1595     

                +1  1596     

                +1  1597     

                +1  1598     

                +1  1599     

                +1  1600     

                +1  1601     

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    26

                +1  1602     

                +1  1603     

                +1  1604     

                +1  1605     

                +1  1606     

                +1  1607     

                +1  1608     

                +1  1609     

                +1  1610     

                +1  1611     

                +1  1612     

                +1  1613     

                +1  1614     

                +1  1615     

                +1  1616     

                +1  1617     

                +1  1618     

                +1  1619     

                +1  1620     

                +1  1621     

                +1  1622     

                +1  1623     

                +1  1624     

                +1  1625     

                +1  1626     

                +1  1627     

                +1  1628     

                +1  1629     

                +1  1630     

                +1  1631     

                +1  1632     

                +1  1633     

                +1  1634     

                +1  1635     

                +1  1636     

                +1  1637     

                +1  1638     

                +1  1639     

                +1  1640     

                +1  1641     

                +1  1642     

                +1  1643     

                +1  1644     

                +1  1645     

                +1  1646     

                +1  1647     

                +1  1648     

                +1  1649     

                +1  1650     

                +1  1651     

                +1  1652     

                +1  1653     

                +1  1654     

                +1  1655     

                +1  1656     

                +1  1657     

                +1  1658     

                +1  1659     

                +1  1660     

                +1  1661     

                +1  1662     

                +1  1663     

                +1  1664     

                +1  1665     

                +1  1666     

                +1  1667     

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    27

                +1  1668     

                +1  1669     

                +1  1670     

                +1  1671     

                +1  1672     

                +1  1673     

                +1  1674     

                +1  1675     

                +1  1676     

                +1  1677     

                +1  1678     

                +1  1679     

                    1680     

                    1681     ;#include "i2c_twi.a51"

                +1  1682     

                +1  1683     

                +1  1684     

                +1  1685     

                +1  1686     

                +1  1687     

                +1  1688     

                +1  1689     

                +1  1690     

0800            +1  1691     ORG     0800h

                +1  1692     

                +1  1693     

  0040          +1  1694     SSIE    EQU 0x40

  0020          +1  1695     STA             EQU 0x20

  0010          +1  1696     STO             EQU 0x10        

  0008          +1  1697     SI              EQU 0x08

  0004          +1  1698     AA              EQU 0x04

                +1  1699             

                +1  1700     

  00C1          +1  1701     I2C_SDA EQU P4.1

  00C0          +1  1702     I2C_SCL EQU P4.0

                +1  1703             

                +1  1704     

  00F1          +1  1705     B2W             EQU 00F1h        

  00F2          +1  1706     B2R     EQU 00F2h        

  00F3          +1  1707     ADDR    EQU 00F3h        

  00F4          +1  1708     DBASE   EQU 00F4h        

                +1  1709             

  00F5          +1  1710     NACKS   EQU 00F5h        

                +1  1711             

                +1  1712     

                +1  1713     

                +1  1714     

                +1  1715     

                +1  1716     

                +1  1717     

  0000          +1  1718     I2C_BUSY EQU 00h  

                +1  1719             

                +1  1720     

                +1  1721     

                +1  1722     

                +1  1723     

                +1  1724     

                +1  1725     

                +1  1726     

                +1  1727     

0800            +1  1728     i2c_int:

                +1  1729                     

                +1  1730                     

0800 E594       +1  1731                     MOV     A, SSCS  

0802 03         +1  1732                     RR              A                

                +1  1733     

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    28

0803 120887     +1  1734                     LCALL   decode  

                +1  1735                                                                              

                +1  1736                     

                +1  1737                     

                +1  1738                     

                +1  1739                     

                +1  1740                     

                +1  1741                     

                +1  1742                     

                +1  1743                     

                +1  1744                     

                +1  1745                     

                +1  1746                     

0806 02089C     +1  1747                     LJMP    ERRO  

0809 00         +1  1748                     NOP

                +1  1749                     

                +1  1750                     

080A 0208A7     +1  1751                     LJMP    START

080D 00         +1  1752                     NOP     

                +1  1753                     

                +1  1754                     

080E 0208B5     +1  1755                     LJMP    RESTART

0811 00         +1  1756                     NOP

                +1  1757                     

                +1  1758                     

0812 0208C1     +1  1759                     LJMP    W_ADDR_ACK

0815 00         +1  1760                     NOP

                +1  1761                     

                +1  1762                     

0816 0208CD     +1  1763                     LJMP    W_ADDR_NACK

0819 00         +1  1764                     NOP

                +1  1765                     

                +1  1766                     

081A 0208DC     +1  1767                     LJMP    W_DATA_ACK

081D 00         +1  1768                     NOP

                +1  1769                     

                +1  1770                     

081E 020909     +1  1771                     LJMP    W_DATA_NACK

0821 00         +1  1772                     NOP

                +1  1773                     

                +1  1774                     

0822 020916     +1  1775                     LJMP    ARB_LOST

0825 00         +1  1776                     NOP

                +1  1777                     

                +1  1778                     

0826 020919     +1  1779                     LJMP    R_ADDR_ACK

0829 00         +1  1780                     NOP

                +1  1781                     

                +1  1782                     

082A 02092B     +1  1783                     LJMP    R_ADDR_NACK

082D 00         +1  1784                     NOP

                +1  1785                     

                +1  1786                     

082E 02093A     +1  1787                     LJMP    R_DATA_ACK

0831 00         +1  1788                     NOP

                +1  1789                     

                +1  1790                     

0832 020952     +1  1791                     LJMP    R_DATA_NACK

0835 00         +1  1792                     NOP

                +1  1793     

                +1  1794                     

0836 020886     +1  1795                     LJMP    not_impl

0839 00         +1  1796                     NOP  

                +1  1797                     

083A 020886     +1  1798                     LJMP    not_impl

083D 00         +1  1799                     NOP  

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    29

                +1  1800                     

083E 020886     +1  1801                     LJMP    not_impl

0841 00         +1  1802                     NOP  

                +1  1803                     

0842 020886     +1  1804                     LJMP    not_impl

0845 00         +1  1805                     NOP  

                +1  1806                     

0846 020886     +1  1807                     LJMP    not_impl

0849 00         +1  1808                     NOP  

                +1  1809                     

084A 020886     +1  1810                     LJMP    not_impl

084D 00         +1  1811                     NOP  

                +1  1812                     

084E 020886     +1  1813                     LJMP    not_impl

0851 00         +1  1814                     NOP  

                +1  1815                     

0852 020886     +1  1816                     LJMP    not_impl

0855 00         +1  1817                     NOP  

                +1  1818                     

0856 020886     +1  1819                     LJMP    not_impl

0859 00         +1  1820                     NOP  

                +1  1821                     

                +1  1822                     

085A 020886     +1  1823                     LJMP    not_impl

085D 00         +1  1824                     NOP  

                +1  1825                     

085E 020886     +1  1826                     LJMP    not_impl

0861 00         +1  1827                     NOP  

                +1  1828                     

0862 020886     +1  1829                     LJMP    not_impl

0865 00         +1  1830                     NOP  

                +1  1831                     

0866 020886     +1  1832                     LJMP    not_impl

0869 00         +1  1833                     NOP  

                +1  1834                     

086A 020886     +1  1835                     LJMP    not_impl

086D 00         +1  1836                     NOP  

                +1  1837     

                +1  1838                     

086E 020886     +1  1839                     LJMP    not_impl

0871 00         +1  1840                     NOP  

                +1  1841                     

0872 020886     +1  1842                     LJMP    not_impl

0875 00         +1  1843                     NOP  

                +1  1844                     

0876 020886     +1  1845                     LJMP    not_impl

0879 00         +1  1846                     NOP  

                +1  1847                     

087A 020886     +1  1848                     LJMP    not_impl

087D 00         +1  1849                     NOP  

                +1  1850                     

087E 020886     +1  1851                     LJMP    not_impl

0881 00         +1  1852                     NOP  

                +1  1853     

                +1  1854                     

0882 020886     +1  1855                     LJMP    end_i2c_int

0885 00         +1  1856                     NOP  

                +1  1857     

                +1  1858     

                +1  1859     

0886            +1  1860     not_impl:

0886            +1  1861     end_i2c_int:

0886 32         +1  1862                     RETI

                +1  1863                     

                +1  1864     ;===============================================================================

                +1  1865     ; Esta e a funcao que opera o PC e faz o retorno ir para o local correto.

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    30

                +1  1866     ;===============================================================================

0887            +1  1867     decode:

0887 D083       +1  1868                     POP DPH

0889 D082       +1  1869                     POP DPL                 ; captura o PC "de retorno"

088B 2582       +1  1870                     ADD A, DPL

088D F582       +1  1871                     MOV DPL, A              ; soma nele o valor de A (A = SSCS/2)

088F 5006       +1  1872                     JNC termina

0891 7401       +1  1873                     MOV A, #1

0893 2583       +1  1874                     ADD A, DPH              ; se tiver carry, aumenta a parte alta.

0895 F583       +1  1875                     MOV DPH, A

0897            +1  1876     termina:

0897 C082       +1  1877                     PUSH DPL                ; pem o novo pc na pilha 

0899 C083       +1  1878                     PUSH DPH                ; e ...

                +1  1879     

089B 22         +1  1880                     RET                             ; pula pra ele!

                +1  1881             

                +1  1882     ;------------------------------------------------------------------------------

                +1  1883     ; Aqui se iniciam as "verdadeiras" ISRs

                +1  1884     ; A implementao dessas ISRs seguiu os modelos propostos no datasheet

                +1  1885     ; Porm no foram implementadas todas as possibilidades para todos os cdigos

                +1  1886     ; foram implementadas apenas as necessrias para garantir um fluxo de dados

                +1  1887     ; de escrita e leitura como master, contemplando inclusive as possveis falhas

                +1  1888     ;------------------------------------------------------------------------------

089C            +1  1889     ERRO:

089C E593       +1  1890             MOV A, SSCON

089E 5410       +1  1891             ANL A, #STO ; gera um stop

08A0 F593       +1  1892             MOV SSCON, A

08A2 C200       +1  1893             CLR     I2C_BUSY ; zera o flag de ocupado

08A4 020886     +1  1894             LJMP end_i2c_int

                +1  1895     ;------------------------------------------------------------------------------

08A7            +1  1896     START:

                +1  1897     ; um start SEMPRE vai ocasionar uma escrita

                +1  1898     ; pois para ler, preciso primeiro escrever de onde vou ler!

                +1  1899     ; SSDAT = SLA + W

                +1  1900     ; STO = 0 e SI = 0

08A7 D200       +1  1901             SETB I2C_BUSY           ; seta o flag de ocupado

08A9 7595D0     +1  1902             MOV SSDAT, #WADDR

08AC E593       +1  1903             MOV A, SSCON

08AE 54E7       +1  1904             ANL A, #~(STO | SI)     ; zera os bits STO e SI

08B0 F593       +1  1905             MOV SSCON, A

08B2 020886     +1  1906             LJMP end_i2c_int

                +1  1907     ;------------------------------------------------------------------------------

08B5            +1  1908     RESTART:

                +1  1909     ; o Restart ser utilizado apenas para leituras,

                +1  1910     ; onde h a necessidade de fazer um start->escrita->restart->leitura->stop

                +1  1911     ; SSDAT = SLA + R

                +1  1912     ; STO = 0 e SI = 0

08B5 7595D1     +1  1913             MOV SSDAT, #RADDR

08B8 E593       +1  1914             MOV A, SSCON

08BA 54E7       +1  1915             ANL A, #~(STO | SI)     ; zera os bits STO e SI

08BC F593       +1  1916             MOV SSCON, A

08BE 020886     +1  1917             LJMP end_i2c_int

                +1  1918     ;------------------------------------------------------------------------------

08C1            +1  1919     W_ADDR_ACK:

                +1  1920     ; aps um W_addr_ack temos que escrever o registrador interno!

                +1  1921     ; SSDAT = ADDR

                +1  1922     ; STA = 0, STO = 0, SI = 0

08C1 85F395     +1  1923             MOV SSDAT, ADDR

08C4 E593       +1  1924             MOV A, SSCON

08C6 54C7       +1  1925             ANL A, #~(STA | STO | SI)       ; zera os bits STA, STO e SI

08C8 F593       +1  1926             MOV SSCON, A

08CA 020886     +1  1927             LJMP end_i2c_int

                +1  1928     ;------------------------------------------------------------------------------

08CD            +1  1929     W_ADDR_NACK:

                +1  1930     ; em caso de nack, ou o end ta errado ou o slave no est conectado.

                +1  1931     ; no vamos fazer retry, encerramos a comunicao.

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    31

                +1  1932     ; STA = 0, SI = 0

                +1  1933     ; STO = 1

08CD E593       +1  1934             MOV A, SSCON

08CF 54D7       +1  1935             ANL A, #~(STA | SI)     ; zera os bits STA e SI

08D1 4410       +1  1936             ORL A, #STO                                     ; seta STO

08D3 F593       +1  1937             MOV SSCON, A

08D5 C200       +1  1938             CLR     I2C_BUSY ; zera o flag de ocupado //correo rev2 RdG

08D7 05F5       +1  1939             INC NACKS

                +1  1940     

08D9 020886     +1  1941             LJMP end_i2c_int

                +1  1942             

                +1  1943     ;------------------------------------------------------------------------------

08DC            +1  1944     W_DATA_ACK:

                +1  1945     ; aps o primeiro data ack (registrador interno) temos 2 opes:

                +1  1946     ; 1 - escrever um novo byte

                +1  1947     ; 2 - gerar um restart para leitura

08DC D5F11B     +1  1948             DJNZ B2W, wda1          ; enquanto tiver bytes para escrever, pula para wda1

                +1  1949     

                +1  1950             ; se no tiver mais bytes para escrever, comee a ler

08DF D5F20D     +1  1951             DJNZ B2R, wda2          ;se tiver algum byte pra ler, pula para wd

08E2 E593       +1  1952             MOV A, SSCON 

08E4 54D7       +1  1953             ANL A, #~(STA | SI)     ; seno..

08E6 4410       +1  1954             ORL A, #STO                     ; gera um STOP

08E8 F593       +1  1955             MOV SSCON, A

08EA C200       +1  1956             CLR     I2C_BUSY ; zera o flag de ocupado

08EC 020886     +1  1957             LJMP end_i2c_int

08EF            +1  1958     wda2:

08EF E593       +1  1959             MOV A, SSCON 

08F1 54E7       +1  1960             ANL A, #~(STO | SI)

08F3 4420       +1  1961             ORL A, #STA                     ; ..gera um restart!

08F5 F593       +1  1962             MOV SSCON, A

08F7 020886     +1  1963             LJMP end_i2c_int

08FA            +1  1964     wda1:

08FA A8F4       +1  1965             MOV R0, DBASE

08FC 8695       +1  1966             MOV SSDAT, @R0  ; ...escreve o proximo!

08FE E593       +1  1967             MOV A, SSCON

0900 54C7       +1  1968             ANL A, #~(STA | STO | SI) ; zera STA, STO e SI

0902 F593       +1  1969             MOV SSCON, A

0904 05F4       +1  1970             INC DBASE               ; incrementa o indice do buffer

0906 020886     +1  1971             LJMP end_i2c_int

                +1  1972     ;------------------------------------------------------------------------------

0909            +1  1973     W_DATA_NACK:

                +1  1974     ; aps um data_nack, podemos repetir ou encerrar

                +1  1975     ; vamos encerrar

0909 E593       +1  1976             MOV A, SSCON 

090B 54D7       +1  1977             ANL A, #~(STA | SI)

090D 4410       +1  1978             ORL A, #STO                     ; gera um STOP

090F F593       +1  1979             MOV SSCON, A

0911 C200       +1  1980             CLR     I2C_BUSY ; zera o flag de ocupado

0913 020886     +1  1981             LJMP end_i2c_int        

                +1  1982     ;------------------------------------------------------------------------------

0916            +1  1983     ARB_LOST:

                +1  1984     ; aps um arb-lost podemos acabar sendo endereados como slave

                +1  1985     ; o arb-lost costuma ocorrer em 2 situaes:

                +1  1986     ; 1 - problemas fsicos no bus

                +1  1987     ; 2 - ambiente multi-master (no  o caso)

                +1  1988     ; em ambos os casos, no vamos fazer nada!

                +1  1989     ; pois no estamos implementando a comunicao em modo slave.

0916 020886     +1  1990             LJMP end_i2c_int        

                +1  1991     ;------------------------------------------------------------------------------

0919            +1  1992     R_ADDR_ACK:

                +1  1993     ; depois de um R ADDR ACK, recebemos os bytes!

0919 E593       +1  1994             MOV A, SSCON

091B 54C7       +1  1995             ANL A, #~(STA | STO | SI) ; receberemos o proximo byte

                +1  1996             

091D D5F204     +1  1997             DJNZ B2R, raa1                                    ; decrementa a quantidade de byte
A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    32

                             s a receber!

                +1  1998             ; se der 0,  o ultimo byte a ser recebido

0920 54FB       +1  1999             ANL A, #~AA     ; retorne NACK

0922 8002       +1  2000             SJMP raa2

                +1  2001             ; se no...

0924            +1  2002     raa1:

0924 4404       +1  2003             ORL A, #AA      ; retorne ACK para o slave!

0926            +1  2004     raa2:   

0926 F593       +1  2005             MOV SSCON, A

0928 020886     +1  2006             LJMP end_i2c_int        

                +1  2007     ;------------------------------------------------------------------------------

092B            +1  2008     R_ADDR_NACK:

                +1  2009     ; idem ao w_addr_nack

092B E593       +1  2010             MOV A, SSCON 

092D 54D7       +1  2011             ANL A, #~(STA | SI)

092F 4410       +1  2012             ORL A, #STO                     ; gera um STOP

0931 F593       +1  2013             MOV SSCON, A

0933 C200       +1  2014             CLR     I2C_BUSY ; zera o flag de ocupado

0935 05F5       +1  2015             INC NACKS

0937 020886     +1  2016             LJMP end_i2c_int        

                +1  2017     ;------------------------------------------------------------------------------

093A            +1  2018     R_DATA_ACK:

                +1  2019     ; se tiver mais bytes pra ler, de um ack, seno de um nack

                +1  2020     

093A A8F4       +1  2021             MOV R0, DBASE

093C A695       +1  2022             MOV     @R0, SSDAT ; le o byte que j chegou

                +1  2023     

093E E593       +1  2024             MOV A, SSCON

0940 54C7       +1  2025             ANL A, #~(STA | STO | SI) ; receberemos o proximo byte

                +1  2026             

0942 D5F204     +1  2027             DJNZ B2R, rda1                                    ; decrementa a quantidade de byte
                             s a receber!

                +1  2028             ; se der 0,  o ultimo byte a ser recebido

0945 54FB       +1  2029             ANL A, #~AA     ; retorne NACK

0947 8002       +1  2030             SJMP rda2

                +1  2031             ; se no...

0949            +1  2032     rda1:

0949 4404       +1  2033             ORL A, #AA      ; retorne ACK para o slave!

094B            +1  2034     rda2:   

094B F593       +1  2035             MOV SSCON, A

094D 05F4       +1  2036             INC DBASE ; incrementa o buffer

094F 020886     +1  2037             LJMP end_i2c_int

                +1  2038     ;------------------------------------------------------------------------------

0952            +1  2039     R_DATA_NACK:

                +1  2040     ; salva o ultimo byte e termina

                +1  2041     

0952 A8F4       +1  2042             MOV R0, DBASE

0954 A695       +1  2043             MOV     @R0, SSDAT ; le o byte que j chegou

                +1  2044     

0956 E593       +1  2045             MOV A, SSCON 

0958 54D7       +1  2046             ANL A, #~(STA | SI)

095A 4410       +1  2047             ORL A, #STO                     ; gera um STOP

095C F593       +1  2048             MOV SSCON, A

                +1  2049     

095E 05F4       +1  2050             INC DBASE ; inc o buffer

                +1  2051     

0960 C200       +1  2052             CLR     I2C_BUSY ; zera o flag de ocupado

0962 020886     +1  2053             LJMP end_i2c_int        

                    2054     

                    2055     ;#include "rtc.a51"

                +1  2056     

                +1  2057     

                +1  2058     

                +1  2059     

                +1  2060     

                +1  2061     

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    33

                +1  2062     

                +1  2063     

                +1  2064     

0700            +1  2065     ORG     0700h

                +1  2066     

                +1  2067     

  00D1          +1  2068     RADDR   EQU 0xD1

  00D0          +1  2069     WADDR   EQU 0xD0

                +1  2070             

                +1  2071     

  00A1          +1  2072     RTC_SQW EQU P2.1

                +1  2073             

                +1  2074     

  00F4          +1  2075     SEC     EQU 00F4h

  00F3          +1  2076     MIN     EQU 00F3h

  00F2          +1  2077     HOU     EQU 00F2h

  00F1          +1  2078     DAY     EQU 00F1h

  00F0          +1  2079     DAT     EQU 00F0h

  00EF          +1  2080     MON     EQU 00EFh

  00EE          +1  2081     YEA     EQU 00EEh

  00ED          +1  2082     CTR     EQU 00EDh

  00EC          +1  2083     LSB             EQU     00ECh

  00EB          +1  2084     MSB             EQU 00EBh

                +1  2085             

  00EA          +1  2086     MULT    EQU 00EAh  

  00E9          +1  2087     T_OUT   EQU 00E9h ; time-out de espera do fim da comunicao

  00E8          +1  2088     T_OUTS  EQU 00E8h ; contador do numero de time_outs para estatstica

                +1  2089             

                +1  2090     

                +1  2091     

                +1  2092     

                +1  2093     

                +1  2094     

                +1  2095     

                +1  2096     

0700            +1  2097     INIT_RTC:

                +1  2098             

0700 75A800     +1  2099             MOV IEN0, #0x00

0703 75B100     +1  2100             MOV IEN1, #0x00

                +1  2101     

                +1  2102             

0706 758901     +1  2103             MOV TMOD, #0x01 ; T0 no modo timer 16bits

                +1  2104     

                +1  2105             

0709 D2C0       +1  2106             SETB I2C_SCL

070B D2C1       +1  2107             SETB I2C_SDA ; Coloca os latches em high-Z

                +1  2108     

                +1  2109             

070D 759341     +1  2110             MOV SSCON, #01000001b

                +1  2111                               

                +1  2112                               

                +1  2113                               

                +1  2114                               

                +1  2115                               

                +1  2116                               

                +1  2117                               

                +1  2118                               

                +1  2119     

                +1  2120             

0710 75B202     +1  2121             MOV IPL1, #0x02

0713 75B302     +1  2122             MOV IPH1, #0x02

0716 75B102     +1  2123             MOV IEN1, #0x02  

                +1  2124     

                +1  2125             ;SETB ES ; habilita a int da serial (para o flashmon!)

0719 D2AF       +1  2126             SETB EA  

                +1  2127             

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    34

                +1  2128             

                +1  2129             

                +1  2130             

                +1  2131             

071B 75F400     +1  2132             MOV SEC, #000h   

071E 75F332     +1  2133             MOV MIN, #050d  

0721 75F20A     +1  2134             MOV HOU, #010d  

0724 75F102     +1  2135             MOV DAY, #002d  

0727 75F009     +1  2136             MOV DAT, #009d  

072A 75EF05     +1  2137             MOV MON, #005d  

072D 75EE11     +1  2138             MOV YEA, #017d  

0730 75ED12     +1  2139             MOV CTR, #00010010b ; freq 8192khz

                +1  2140     

0733 120737     +1  2141             LCALL RTC_SET_TIME

                +1  2142             

0736 22         +1  2143             RET

                +1  2144             

                +1  2145     ;------------------------------------------------------------------------------

                +1  2146     ; Nome: RTC_SET_TIME

                +1  2147     ; Descrio: escreve data e hora no RTC

                +1  2148     ; Parmetros: SEC, MIN, HOU

                +1  2149     ; Retorna:

                +1  2150     ; Destri: A

                +1  2151     ;------------------------------------------------------------------------------

0737            +1  2152     RTC_SET_TIME:

0737 75F300     +1  2153             MOV ADDR, #0x00         ; endereo do reg interno

073A 75F109     +1  2154             MOV B2W, #(8+1)         ; a quantidade de bytes que devero ser enviados + 1.

073D 75F201     +1  2155             MOV B2R, #(0+1)         ; a quantidade de bytes que sero lidos + 1.

0740 75F4F4     +1  2156             MOV DBASE, #SEC         ; endereo base dos dados

                +1  2157     

                +1  2158             ; gera o start, daqui pra frente  tudo na interrupo.

0743 E593       +1  2159             MOV A, SSCON

0745 4420       +1  2160             ORL A, #STA

0747 F593       +1  2161             MOV SSCON, A

                +1  2162     

                +1  2163             

0749 7805       +1  2164             MOV             R0, #005h

074B 7900       +1  2165             MOV             R1, #000h

074D 7A00       +1  2166             MOV             R2, #000h

074F 120D3D     +1  2167             LCALL   TIMER_DELAY

                +1  2168     

                +1  2169             ; Polling at certo limite! 500 ms

0752 75E964     +1  2170             MOV T_OUT, #100

0755            +1  2171     set_wait:

0755 30000E     +1  2172             JNB I2C_BUSY, end_set

                +1  2173             

                +1  2174             

0758 7810       +1  2175             MOV             R0, #016d

075A 7900       +1  2176             MOV             R1, #000h

075C 7A00       +1  2177             MOV             R2, #000h

075E 120D3D     +1  2178             LCALL   TIMER_DELAY

                +1  2179             

0761 D5E9F1     +1  2180             DJNZ T_OUT,set_wait

0764 05E8       +1  2181             INC T_OUTS

0766            +1  2182     end_set:

0766 22         +1  2183             RET

                +1  2184             

                +1  2185     ;------------------------------------------------------------------------------

                +1  2186     ; Nome: RTC_GET_TIME

                +1  2187     ; Descrio: l data e hora do RTC

                +1  2188     ; Parmetros:

                +1  2189     ; Retorna: SEC, MIN, HOU

                +1  2190     ; Destri: A

                +1  2191     ;------------------------------------------------------------------------------

0767            +1  2192     RTC_GET_TIME:

0767 75F300     +1  2193             MOV ADDR, #0x00         ; endereo do reg interno

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    35

076A 75F101     +1  2194             MOV B2W, #(0+1)         ; a quantidade de bytes que devero ser enviados + 1.

076D 75F209     +1  2195             MOV B2R, #(8+1)         ; a quantidade de bytes que sero lidos + 1.

0770 75F4F4     +1  2196             MOV DBASE, #SEC         ; endereo base dos dados (buffer)

                +1  2197     

                +1  2198             ; gera o start, daqui pra frente  tudo na interrupo.

0773 E593       +1  2199             MOV A, SSCON

0775 4420       +1  2200             ORL A, #STA

0777 F593       +1  2201             MOV SSCON, A

                +1  2202     

                +1  2203             

0779 780A       +1  2204             MOV             R0, #00Ah

077B 7900       +1  2205             MOV             R1, #000h

077D 7A00       +1  2206             MOV             R2, #000h

077F 120D3D     +1  2207             LCALL   TIMER_DELAY

                +1  2208     

                +1  2209             ; Polling at certo limite. rev2 RdG

0782 75E964     +1  2210             MOV T_OUT, #100

0785            +1  2211     get_wait:

0785 30000E     +1  2212             JNB I2C_BUSY, end_get

                +1  2213             

                +1  2214             

0788 7810       +1  2215             MOV             R0, #016d

078A 7900       +1  2216             MOV             R1, #000h

078C 7A00       +1  2217             MOV             R2, #000h

078E 120D3D     +1  2218             LCALL   TIMER_DELAY

                +1  2219             

0791 D5E9F1     +1  2220             DJNZ    T_OUT,get_wait

0794 05E8       +1  2221             INC     T_OUTS

                +1  2222     

0796            +1  2223     end_get:

0796 22         +1  2224                     RET

                    2225     

                    2226     ;#include "hc_sr0x.a51"

                +1  2227     

                +1  2228     

                +1  2229     

                +1  2230     

                +1  2231     

                +1  2232     

                +1  2233     

                +1  2234     

                +1  2235     

                +1  2236     

                +1  2237     

                +1  2238     

                +1  2239     

                +1  2240     

0600            +1  2241     ORG             0600h

                +1  2242     

                +1  2243     

                +1  2244     

                +1  2245     

  00B0          +1  2246     TRIGGER_ULTRASSOM_RECEPTOR      EQU P3.0

  00B1          +1  2247     TRIGGER_ULTRASSOM_ENVIO         EQU P3.1

                +1  2248     

                +1  2249     

                +1  2250     

                +1  2251     

                +1  2252     

                +1  2253     

                +1  2254     

                +1  2255     

0600            +1  2256     MEDIR_DISTANCIA:

0600 C0E0       +1  2257                     PUSH    ACC

                +1  2258                     

0602 C2B0       +1  2259                     CLR     TRIGGER_ULTRASSOM_RECEPTOR       

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    36

0604 D2B1       +1  2260                     SETB    TRIGGER_ULTRASSOM_ENVIO      

                +1  2261     

0606 7F20       +1  2262                     MOV             R7, #00100000b   

0608 7E82       +1  2263                     MOV             R6, #130d                

060A 7D82       +1  2264                     MOV             R5, #130d                

060C 7C00       +1  2265                     MOV             R4, #000h                

060E 7B00       +1  2266                     MOV             R3, #000h                

0610 120D00     +1  2267                     LCALL   TIMER_CONFIGURA_TIMER_SEM_INT

                +1  2268     

0613 7400       +1  2269                     MOV     A, #00h

                +1  2270                     

0615 D2B0       +1  2271                     SETB    TRIGGER_ULTRASSOM_RECEPTOR       

                +1  2272                     

0617 120D0E     +1  2273                     LCALL   TIMER_DELAY_10_US      

                +1  2274                     

061A C2B0       +1  2275                     CLR     TRIGGER_ULTRASSOM_RECEPTOR

                +1  2276     

061C            +1  2277     ESPERANDO_RESPOSTA_ECHO:        

061C 30B1FD     +1  2278                     JNB     TRIGGER_ULTRASSOM_ENVIO, $     

                +1  2279     

061F            +1  2280     ECHO_AINDA_DISPONIVEL:  

061F D28E       +1  2281                     SETB    TR1         

                +1  2282     

0621 308FFD     +1  2283                     JNB     TF1, $

                +1  2284           

0624 C28E       +1  2285                     CLR     TR1          

0626 C28F       +1  2286                     CLR     TF1          

                +1  2287           

0628 04         +1  2288                     INC     A        

                +1  2289           

0629 20B1F3     +1  2290                     JB              TRIGGER_ULTRASSOM_ENVIO, ECHO_AINDA_DISPONIVEL   

                +1  2291           

062C F7         +1  2292                     MOV     @R1, A   

                +1  2293               

062D D0E0       +1  2294                     POP             ACC

                +1  2295               

062F 22         +1  2296                     RET

                    2297     

                    2298     

                    2299     

                    2300     

                    2301     

                    2302     

                    2303     

                    2304     

                    2305     

0000                2306     ORG 0000h  

0000 020046         2307                     LJMP __STARTUP__

                    2308     

0003                2309     ORG 0003h  

0003 020048         2310                     LJMP INT_INT0

                    2311     

000B                2312     ORG 000Bh  

000B 020049         2313                     LJMP INT_TIMER0

                    2314     

0013                2315     ORG 0013h  

0013 02004A         2316                     LJMP INT_INT1

                    2317     

001B                2318     ORG 001Bh  

001B 02004B         2319                     LJMP INT_TIMER1

                    2320     

0023                2321     ORG 0023h  

0023 02004C         2322                     LJMP INT_SERIAL

                    2323     

0043                2324     ORG     0043h

0043 02004D         2325                     LJMP INT_I2C_TWI

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    37

                    2326             

0046                2327     __STARTUP__:

                    2328                     

0046 80FE           2329                     JMP     __STARTUP__

                    2330     

                    2331     

                    2332     

                    2333     

                    2334     

                    2335     

                    2336     

                    2337     

                    2338     

                    2339     

                    2340     

                    2341     

0048                2342     INT_INT0:

0048 32             2343                     RETI

                    2344     

                    2345     

                    2346     

                    2347     

                    2348     

                    2349     

                    2350     

                    2351     

0049                2352     INT_TIMER0:

0049 32             2353                     RETI

                    2354             

                    2355     

                    2356     

                    2357     

                    2358     

                    2359     

                    2360     

                    2361     

004A                2362     INT_INT1:

004A 32             2363                     RETI

                    2364     

                    2365     

                    2366     

                    2367     

                    2368     

                    2369     

                    2370     

                    2371     

004B                2372     INT_TIMER1:

004B 32             2373                     RETI

                    2374             

                    2375     

                    2376     

                    2377     

                    2378     

                    2379     

                    2380     

                    2381     

004C                2382     INT_SERIAL:

004C 32             2383                     RETI

                    2384             

                    2385     

                    2386     

                    2387     

                    2388     

                    2389     

                    2390     

                    2391     

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    38

004D                2392     INT_I2C_TWI:

                    2393                     

                    2394                     

                    2395             

004D 32             2396                     RETI

                    2397     

                    2398                     END

A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    39

SYMBOL TABLE LISTING
------ ----- -------


N A M E                                    T Y P E  V A L U E   ATTRIBUTES

AA. . . . . . . . . . . . . . . . . . .    N NUMB   0004H   A   
ACC . . . . . . . . . . . . . . . . . .    D ADDR   00E0H   A   
ADDR. . . . . . . . . . . . . . . . . .    N NUMB   00F3H   A   
ARB_LOST. . . . . . . . . . . . . . . .    C ADDR   0916H   A   
AUXR. . . . . . . . . . . . . . . . . .    D ADDR   008EH   A   
AUXR1 . . . . . . . . . . . . . . . . .    D ADDR   00A2H   A   
B . . . . . . . . . . . . . . . . . . .    D ADDR   00F0H   A   
B2R . . . . . . . . . . . . . . . . . .    N NUMB   00F2H   A   
B2W . . . . . . . . . . . . . . . . . .    N NUMB   00F1H   A   
BDRCON. . . . . . . . . . . . . . . . .    D ADDR   009BH   A   
BINARIO_BCD . . . . . . . . . . . . . .    C ADDR   0E20H   A   
BRL . . . . . . . . . . . . . . . . . .    D ADDR   009AH   A   
BUSYF . . . . . . . . . . . . . . . . .    B ADDR   0080H.7 A   
CCAP0H. . . . . . . . . . . . . . . . .    D ADDR   00FAH   A   
CCAP0L. . . . . . . . . . . . . . . . .    D ADDR   00EAH   A   
CCAP1H. . . . . . . . . . . . . . . . .    D ADDR   00FBH   A   
CCAP1L. . . . . . . . . . . . . . . . .    D ADDR   00EBH   A   
CCAP2H. . . . . . . . . . . . . . . . .    D ADDR   00FCH   A   
CCAP2L. . . . . . . . . . . . . . . . .    D ADDR   00ECH   A   
CCAP3H. . . . . . . . . . . . . . . . .    D ADDR   00FDH   A   
CCAP3L. . . . . . . . . . . . . . . . .    D ADDR   00EDH   A   
CCAP4H. . . . . . . . . . . . . . . . .    D ADDR   00FEH   A   
CCAP4L. . . . . . . . . . . . . . . . .    D ADDR   00EEH   A   
CCAPM0. . . . . . . . . . . . . . . . .    D ADDR   00DAH   A   
CCAPM1. . . . . . . . . . . . . . . . .    D ADDR   00DBH   A   
CCAPM2. . . . . . . . . . . . . . . . .    D ADDR   00DCH   A   
CCAPM3. . . . . . . . . . . . . . . . .    D ADDR   00DDH   A   
CCAPM4. . . . . . . . . . . . . . . . .    D ADDR   00DEH   A   
CCF0. . . . . . . . . . . . . . . . . .    B ADDR   00D8H.0 A   
CCF1. . . . . . . . . . . . . . . . . .    B ADDR   00D8H.1 A   
CCF2. . . . . . . . . . . . . . . . . .    B ADDR   00D8H.2 A   
CCF3. . . . . . . . . . . . . . . . . .    B ADDR   00D8H.3 A   
CCF4. . . . . . . . . . . . . . . . . .    B ADDR   00D8H.4 A   
CCON. . . . . . . . . . . . . . . . . .    D ADDR   00D8H   A   
CF. . . . . . . . . . . . . . . . . . .    B ADDR   00D8H.7 A   
CH. . . . . . . . . . . . . . . . . . .    D ADDR   00F9H   A   
CHAMA_TIMER_1_MS. . . . . . . . . . . .    C ADDR   0D4CH   A   
CHAMA_TIMER_1_S . . . . . . . . . . . .    C ADDR   0D57H   A   
CHAMA_TIMER_200_MS. . . . . . . . . . .    C ADDR   0D50H   A   
CKCON0. . . . . . . . . . . . . . . . .    D ADDR   008FH   A   
CKCON1. . . . . . . . . . . . . . . . .    D ADDR   00AFH   A   
CKSEL . . . . . . . . . . . . . . . . .    D ADDR   0085H   A   
CL. . . . . . . . . . . . . . . . . . .    D ADDR   00E9H   A   
CLR1L . . . . . . . . . . . . . . . . .    C ADDR   0F48H   A   
CLR1L1. . . . . . . . . . . . . . . . .    C ADDR   0F52H   A   
CLR2L . . . . . . . . . . . . . . . . .    C ADDR   0F61H   A   
CLR2L1. . . . . . . . . . . . . . . . .    C ADDR   0F6BH   A   
CMOD. . . . . . . . . . . . . . . . . .    D ADDR   00D9H   A   
COL1. . . . . . . . . . . . . . . . . .    B ADDR   0090H.0 A   
COL2. . . . . . . . . . . . . . . . . .    B ADDR   0090H.1 A   
COL3. . . . . . . . . . . . . . . . . .    B ADDR   0090H.2 A   
COL4. . . . . . . . . . . . . . . . . .    B ADDR   0090H.3 A   
CONFIGURA_BAUD_RATE . . . . . . . . . .    C ADDR   0A09H   A   
CONFIGURA_SERIAL. . . . . . . . . . . .    C ADDR   0A00H   A   
CONTINUA_BINARIO_BCD. . . . . . . . . .    C ADDR   0E2CH   A   
CONTINUA_PROG . . . . . . . . . . . . .    C ADDR   0C08H   A   
CONTINUA_PWM. . . . . . . . . . . . . .    C ADDR   0AE7H   A   
CONTINUA_TIMER_1_MS . . . . . . . . . .    C ADDR   0D1FH   A   
CONTINUE_SQUARE . . . . . . . . . . . .    C ADDR   0B3EH   A   
CONTINUE_SQUARE_HIGH. . . . . . . . . .    C ADDR   0B41H   A   
A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    40

CONTINUE_SQUARE_LOW . . . . . . . . . .    C ADDR   0B4EH   A   
CP_RL2. . . . . . . . . . . . . . . . .    B ADDR   00C8H.0 A   
CR. . . . . . . . . . . . . . . . . . .    B ADDR   00D8H.6 A   
CTR . . . . . . . . . . . . . . . . . .    N NUMB   00EDH   A   
CUR1. . . . . . . . . . . . . . . . . .    C ADDR   0FBFH   A   
CUR_OFF . . . . . . . . . . . . . . . .    C ADDR   0FBDH   A   
CUR_ON. . . . . . . . . . . . . . . . .    C ADDR   0FB9H   A   
C_T2. . . . . . . . . . . . . . . . . .    B ADDR   00C8H.1 A   
DAT . . . . . . . . . . . . . . . . . .    N NUMB   00F0H   A   
DAY . . . . . . . . . . . . . . . . . .    N NUMB   00F1H   A   
DBASE . . . . . . . . . . . . . . . . .    N NUMB   00F4H   A   
DECODE. . . . . . . . . . . . . . . . .    C ADDR   0887H   A   
DEFINE_PINOS_A_SEREM_ATIVADOS_DESATIVADOS  C ADDR   0B57H   A   
DIGITO0 . . . . . . . . . . . . . . . .    C ADDR   0C61H   A   
DIGITO1 . . . . . . . . . . . . . . . .    C ADDR   0C3DH   A   
DIGITO2 . . . . . . . . . . . . . . . .    C ADDR   0C41H   A   
DIGITO3 . . . . . . . . . . . . . . . .    C ADDR   0C45H   A   
DIGITO4 . . . . . . . . . . . . . . . .    C ADDR   0C49H   A   
DIGITO5 . . . . . . . . . . . . . . . .    C ADDR   0C4DH   A   
DIGITO6 . . . . . . . . . . . . . . . .    C ADDR   0C51H   A   
DIGITO7 . . . . . . . . . . . . . . . .    C ADDR   0C55H   A   
DIGITO8 . . . . . . . . . . . . . . . .    C ADDR   0C59H   A   
DIGITO9 . . . . . . . . . . . . . . . .    C ADDR   0C5DH   A   
DISPLAY . . . . . . . . . . . . . . . .    D ADDR   0080H   A   
DISPLAY_CENTENA . . . . . . . . . . . .    B ADDR   0090H.2 A   
DISPLAY_DEZENA. . . . . . . . . . . . .    B ADDR   0090H.1 A   
DISPLAY_UNIDADE . . . . . . . . . . . .    B ADDR   0090H.0 A   
DPH . . . . . . . . . . . . . . . . . .    D ADDR   0083H   A   
DPL . . . . . . . . . . . . . . . . . .    D ADDR   0082H   A   
EA. . . . . . . . . . . . . . . . . . .    B ADDR   00A8H.7 A   
EC. . . . . . . . . . . . . . . . . . .    B ADDR   00A8H.6 A   
ECHO_AINDA_DISPONIVEL . . . . . . . . .    C ADDR   061FH   A   
EECON . . . . . . . . . . . . . . . . .    D ADDR   00D2H   A   
END_GET . . . . . . . . . . . . . . . .    C ADDR   0796H   A   
END_I2C_INT . . . . . . . . . . . . . .    C ADDR   0886H   A   
END_SET . . . . . . . . . . . . . . . .    C ADDR   0766H   A   
ENVIA_DADO. . . . . . . . . . . . . . .    C ADDR   0A18H   A   
ENVIA_OK. . . . . . . . . . . . . . . .    C ADDR   0A20H   A   
EP0INT. . . . . . . . . . . . . . . . .    B ADDR   00F8H.0 A   
EP1INT. . . . . . . . . . . . . . . . .    B ADDR   00F8H.1 A   
EP2INT. . . . . . . . . . . . . . . . .    B ADDR   00F8H.2 A   
EP3INT. . . . . . . . . . . . . . . . .    B ADDR   00F8H.3 A   
EP4INT. . . . . . . . . . . . . . . . .    B ADDR   00F8H.4 A   
EP5INT. . . . . . . . . . . . . . . . .    B ADDR   00F8H.5 A   
EP6INT. . . . . . . . . . . . . . . . .    B ADDR   00F8H.6 A   
ERRO. . . . . . . . . . . . . . . . . .    C ADDR   089CH   A   
ES. . . . . . . . . . . . . . . . . . .    B ADDR   00A8H.4 A   
ESCDADO . . . . . . . . . . . . . . . .    C ADDR   0F7AH   A   
ESCINST . . . . . . . . . . . . . . . .    C ADDR   0F1FH   A   
ESCREVE_ASTERISCO . . . . . . . . . . .    C ADDR   0FC4H   A   
ESC_S . . . . . . . . . . . . . . . . .    C ADDR   0FB2H   A   
ESC_STR1. . . . . . . . . . . . . . . .    C ADDR   0FA8H   A   
ESC_STR2. . . . . . . . . . . . . . . .    C ADDR   0FAEH   A   
ESPERANDO_RESPOSTA_ECHO . . . . . . . .    C ADDR   061CH   A   
ESTADO_DOIS . . . . . . . . . . . . . .    B ADDR   00B0H.2 A   
ESTADO_QUATRO . . . . . . . . . . . . .    B ADDR   00B0H.4 A   
ESTADO_TRES . . . . . . . . . . . . . .    B ADDR   00B0H.3 A   
ESTADO_UM . . . . . . . . . . . . . . .    B ADDR   00B0H.1 A   
ET0 . . . . . . . . . . . . . . . . . .    B ADDR   00A8H.1 A   
ET1 . . . . . . . . . . . . . . . . . .    B ADDR   00A8H.3 A   
ET2 . . . . . . . . . . . . . . . . . .    B ADDR   00A8H.5 A   
EX0 . . . . . . . . . . . . . . . . . .    B ADDR   00A8H.0 A   
EX1 . . . . . . . . . . . . . . . . . .    B ADDR   00A8H.2 A   
EXEN2 . . . . . . . . . . . . . . . . .    B ADDR   00C8H.3 A   
EXF2. . . . . . . . . . . . . . . . . .    B ADDR   00C8H.6 A   
E_LCD . . . . . . . . . . . . . . . . .    B ADDR   00A0H.7 A   
A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    41

FCON. . . . . . . . . . . . . . . . . .    D ADDR   00D1H   A   
FE_SM0. . . . . . . . . . . . . . . . .    B ADDR   0098H.7 A   
FINALIZA_TIMER_DELAY. . . . . . . . . .    C ADDR   0D61H   A   
GET_WAIT. . . . . . . . . . . . . . . .    C ADDR   0785H   A   
GOTOXY. . . . . . . . . . . . . . . . .    C ADDR   0F36H   A   
GRAVA_DIGITO. . . . . . . . . . . . . .    C ADDR   0C65H   A   
GT1 . . . . . . . . . . . . . . . . . .    C ADDR   0F3FH   A   
HIGH_DONE . . . . . . . . . . . . . . .    C ADDR   0B2CH   A   
HOU . . . . . . . . . . . . . . . . . .    N NUMB   00F2H   A   
I2C_BUSY. . . . . . . . . . . . . . . .    N NUMB   0000H   A   
I2C_INT . . . . . . . . . . . . . . . .    C ADDR   0800H   A   
I2C_SCL . . . . . . . . . . . . . . . .    B ADDR   00C0H.0 A   
I2C_SDA . . . . . . . . . . . . . . . .    B ADDR   00C0H.1 A   
IE0_. . . . . . . . . . . . . . . . . .    B ADDR   0088H.1 A   
IE1_. . . . . . . . . . . . . . . . . .    B ADDR   0088H.3 A   
IEN0. . . . . . . . . . . . . . . . . .    D ADDR   00A8H   A   
IEN1. . . . . . . . . . . . . . . . . .    D ADDR   00B1H   A   
INICIA_MOTOR_DE_PASSOS. . . . . . . . .    C ADDR   0B00H   A   
INIDISP . . . . . . . . . . . . . . . .    C ADDR   0F00H   A   
INIT_RTC. . . . . . . . . . . . . . . .    C ADDR   0700H   A   
INT_I2C_TWI . . . . . . . . . . . . . .    C ADDR   004DH   A   
INT_INT0. . . . . . . . . . . . . . . .    C ADDR   0048H   A   
INT_INT1. . . . . . . . . . . . . . . .    C ADDR   004AH   A   
INT_SERIAL. . . . . . . . . . . . . . .    C ADDR   004CH   A   
INT_TIMER0. . . . . . . . . . . . . . .    C ADDR   0049H   A   
INT_TIMER1. . . . . . . . . . . . . . .    C ADDR   004BH   A   
IPH0. . . . . . . . . . . . . . . . . .    D ADDR   00B7H   A   
IPH1. . . . . . . . . . . . . . . . . .    D ADDR   00B3H   A   
IPL0. . . . . . . . . . . . . . . . . .    D ADDR   00B8H   A   
IPL1. . . . . . . . . . . . . . . . . .    D ADDR   00B2H   A   
IT0 . . . . . . . . . . . . . . . . . .    B ADDR   0088H.0 A   
IT1 . . . . . . . . . . . . . . . . . .    B ADDR   0088H.2 A   
KBE . . . . . . . . . . . . . . . . . .    D ADDR   009DH   A   
KBF . . . . . . . . . . . . . . . . . .    D ADDR   009EH   A   
KBLS. . . . . . . . . . . . . . . . . .    D ADDR   009CH   A   
LEDCON. . . . . . . . . . . . . . . . .    D ADDR   00F1H   A   
LIN1. . . . . . . . . . . . . . . . . .    B ADDR   0090H.4 A   
LIN2. . . . . . . . . . . . . . . . . .    B ADDR   0090H.5 A   
LIN3. . . . . . . . . . . . . . . . . .    B ADDR   0090H.6 A   
LIN4. . . . . . . . . . . . . . . . . .    B ADDR   0090H.7 A   
LOW_DONE. . . . . . . . . . . . . . . .    C ADDR   0B1EH   A   
LSB . . . . . . . . . . . . . . . . . .    N NUMB   00ECH   A   
MEDIR_DISTANCIA . . . . . . . . . . . .    C ADDR   0600H   A   
MIN . . . . . . . . . . . . . . . . . .    N NUMB   00F3H   A   
MON . . . . . . . . . . . . . . . . . .    N NUMB   00EFH   A   
MOSTRA_DIGITO_DISPLAY . . . . . . . . .    C ADDR   0E10H   A   
MSB . . . . . . . . . . . . . . . . . .    N NUMB   00EBH   A   
MSTR1 . . . . . . . . . . . . . . . . .    C ADDR   0F9DH   A   
MSTR21. . . . . . . . . . . . . . . . .    C ADDR   0FA7H   A   
MSTRING . . . . . . . . . . . . . . . .    C ADDR   0F93H   A   
MSTRINGX. . . . . . . . . . . . . . . .    C ADDR   0F9EH   A   
MULT. . . . . . . . . . . . . . . . . .    N NUMB   00EAH   A   
NACKS . . . . . . . . . . . . . . . . .    N NUMB   00F5H   A   
NAO_ATIVA_BIT_0 . . . . . . . . . . . .    C ADDR   0B5EH   A   
NAO_ATIVA_BIT_1 . . . . . . . . . . . .    C ADDR   0B65H   A   
NAO_ATIVA_BIT_2 . . . . . . . . . . . .    C ADDR   0B6CH   A   
NOT_IMPL. . . . . . . . . . . . . . . .    C ADDR   0886H   A   
P0. . . . . . . . . . . . . . . . . . .    D ADDR   0080H   A   
P0_0. . . . . . . . . . . . . . . . . .    B ADDR   0080H.0 A   
P0_1. . . . . . . . . . . . . . . . . .    B ADDR   0080H.1 A   
P0_2. . . . . . . . . . . . . . . . . .    B ADDR   0080H.2 A   
P0_3. . . . . . . . . . . . . . . . . .    B ADDR   0080H.3 A   
P0_4. . . . . . . . . . . . . . . . . .    B ADDR   0080H.4 A   
P0_5. . . . . . . . . . . . . . . . . .    B ADDR   0080H.5 A   
P0_6. . . . . . . . . . . . . . . . . .    B ADDR   0080H.6 A   
P0_7. . . . . . . . . . . . . . . . . .    B ADDR   0080H.7 A   
A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    42

P1. . . . . . . . . . . . . . . . . . .    D ADDR   0090H   A   
P1_0. . . . . . . . . . . . . . . . . .    B ADDR   0090H.0 A   
P1_1. . . . . . . . . . . . . . . . . .    B ADDR   0090H.1 A   
P1_2. . . . . . . . . . . . . . . . . .    B ADDR   0090H.2 A   
P1_3. . . . . . . . . . . . . . . . . .    B ADDR   0090H.3 A   
P1_4. . . . . . . . . . . . . . . . . .    B ADDR   0090H.4 A   
P1_5. . . . . . . . . . . . . . . . . .    B ADDR   0090H.5 A   
P1_6. . . . . . . . . . . . . . . . . .    B ADDR   0090H.6 A   
P1_7. . . . . . . . . . . . . . . . . .    B ADDR   0090H.7 A   
P2. . . . . . . . . . . . . . . . . . .    D ADDR   00A0H   A   
P2_0. . . . . . . . . . . . . . . . . .    B ADDR   00A0H.0 A   
P2_1. . . . . . . . . . . . . . . . . .    B ADDR   00A0H.1 A   
P2_2. . . . . . . . . . . . . . . . . .    B ADDR   00A0H.2 A   
P2_3. . . . . . . . . . . . . . . . . .    B ADDR   00A0H.3 A   
P2_4. . . . . . . . . . . . . . . . . .    B ADDR   00A0H.4 A   
P2_5. . . . . . . . . . . . . . . . . .    B ADDR   00A0H.5 A   
P2_6. . . . . . . . . . . . . . . . . .    B ADDR   00A0H.6 A   
P2_7. . . . . . . . . . . . . . . . . .    B ADDR   00A0H.7 A   
P3. . . . . . . . . . . . . . . . . . .    D ADDR   00B0H   A   
P3_0. . . . . . . . . . . . . . . . . .    B ADDR   00B0H.0 A   
P3_1. . . . . . . . . . . . . . . . . .    B ADDR   00B0H.1 A   
P3_2. . . . . . . . . . . . . . . . . .    B ADDR   00B0H.2 A   
P3_3. . . . . . . . . . . . . . . . . .    B ADDR   00B0H.3 A   
P3_4. . . . . . . . . . . . . . . . . .    B ADDR   00B0H.4 A   
P3_5. . . . . . . . . . . . . . . . . .    B ADDR   00B0H.5 A   
P3_6. . . . . . . . . . . . . . . . . .    B ADDR   00B0H.6 A   
P3_7. . . . . . . . . . . . . . . . . .    B ADDR   00B0H.7 A   
P4. . . . . . . . . . . . . . . . . . .    D ADDR   00C0H   A   
P4_0. . . . . . . . . . . . . . . . . .    B ADDR   00C0H.0 A   
P4_1. . . . . . . . . . . . . . . . . .    B ADDR   00C0H.1 A   
PCON. . . . . . . . . . . . . . . . . .    D ADDR   0087H   A   
PLLCON. . . . . . . . . . . . . . . . .    D ADDR   00A3H   A   
PLLDIV. . . . . . . . . . . . . . . . .    D ADDR   00A4H   A   
PORT_DISPLAY. . . . . . . . . . . . . .    D ADDR   0080H   A   
PPCL. . . . . . . . . . . . . . . . . .    B ADDR   00B8H.6 A   
PRESS_ENT . . . . . . . . . . . . . . .    C ADDR   0C00H   A   
PSL . . . . . . . . . . . . . . . . . .    B ADDR   00B8H.4 A   
PSW . . . . . . . . . . . . . . . . . .    D ADDR   00D0H   A   
PT0L. . . . . . . . . . . . . . . . . .    B ADDR   00B8H.1 A   
PT2L. . . . . . . . . . . . . . . . . .    B ADDR   00B8H.5 A   
PTIL. . . . . . . . . . . . . . . . . .    B ADDR   00B8H.3 A   
PWM_COUNTER . . . . . . . . . . . . . .    N NUMB   00FAH   A   
PWM_DUTY_CYCLE. . . . . . . . . . . . .    N NUMB   00FBH   A   
PWM_FLAG. . . . . . . . . . . . . . . .    N NUMB   0000H   A   
PWM_PARAR . . . . . . . . . . . . . . .    C ADDR   0AEFH   A   
PWM_PERIODO_LSB . . . . . . . . . . . .    N NUMB   00F9H   A   
PWM_PERIODO_MED . . . . . . . . . . . .    N NUMB   00F8H   A   
PWM_PERIODO_MSB . . . . . . . . . . . .    N NUMB   00F7H   A   
PWM_PIN_0 . . . . . . . . . . . . . . .    B ADDR   0090H.0 A   
PWM_PIN_1 . . . . . . . . . . . . . . .    B ADDR   0090H.1 A   
PWM_PIN_2 . . . . . . . . . . . . . . .    B ADDR   0090H.2 A   
PWM_PORT. . . . . . . . . . . . . . . .    D ADDR   0090H   A   
PWM_QTDADE_PERIODOS . . . . . . . . . .    N NUMB   00F6H   A   
PWM_SQUARE_WAVE . . . . . . . . . . . .    C ADDR   0B0EH   A   
PWM_SQUARE_WAVE_CONFIG_PERIOD . . . . .    C ADDR   0AF6H   A   
PWM_SQUARE_WAVE_SETUP_AND_START . . . .    C ADDR   0AD5H   A   
PWM_STOP. . . . . . . . . . . . . . . .    C ADDR   0B0BH   A   
PX0L. . . . . . . . . . . . . . . . . .    B ADDR   00B8H.0 A   
PXIL. . . . . . . . . . . . . . . . . .    B ADDR   00B8H.2 A   
QTD_DIGITOS . . . . . . . . . . . . . .    N NUMB   00FFH   A   
RAA1. . . . . . . . . . . . . . . . . .    C ADDR   0924H   A   
RAA2. . . . . . . . . . . . . . . . . .    C ADDR   0926H   A   
RADDR . . . . . . . . . . . . . . . . .    N NUMB   00D1H   A   
RB8 . . . . . . . . . . . . . . . . . .    B ADDR   0098H.2 A   
RCAP2H. . . . . . . . . . . . . . . . .    D ADDR   00CBH   A   
RCAP2L. . . . . . . . . . . . . . . . .    D ADDR   00CAH   A   
A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    43

RCLK. . . . . . . . . . . . . . . . . .    B ADDR   00C8H.5 A   
RDA1. . . . . . . . . . . . . . . . . .    C ADDR   0949H   A   
RDA2. . . . . . . . . . . . . . . . . .    C ADDR   094BH   A   
RECEBE_DADO . . . . . . . . . . . . . .    C ADDR   0A10H   A   
REN . . . . . . . . . . . . . . . . . .    B ADDR   0098H.4 A   
RESTART . . . . . . . . . . . . . . . .    C ADDR   08B5H   A   
RETORNA_MOTOR_DE_PASSOS . . . . . . . .    C ADDR   0B23H   A   
RI. . . . . . . . . . . . . . . . . . .    B ADDR   0098H.0 A   
RS. . . . . . . . . . . . . . . . . . .    B ADDR   00A0H.5 A   
RTC_GET_TIME. . . . . . . . . . . . . .    C ADDR   0767H   A   
RTC_SET_TIME. . . . . . . . . . . . . .    C ADDR   0737H   A   
RTC_SQW . . . . . . . . . . . . . . . .    B ADDR   00A0H.1 A   
RW. . . . . . . . . . . . . . . . . . .    B ADDR   00A0H.6 A   
R_ADDR_ACK. . . . . . . . . . . . . . .    C ADDR   0919H   A   
R_ADDR_NACK . . . . . . . . . . . . . .    C ADDR   092BH   A   
R_DATA_ACK. . . . . . . . . . . . . . .    C ADDR   093AH   A   
R_DATA_NACK . . . . . . . . . . . . . .    C ADDR   0952H   A   
SADDR . . . . . . . . . . . . . . . . .    D ADDR   00A9H   A   
SADEN . . . . . . . . . . . . . . . . .    D ADDR   00B9H   A   
SBUF. . . . . . . . . . . . . . . . . .    D ADDR   0099H   A   
SCON. . . . . . . . . . . . . . . . . .    D ADDR   0098H   A   
SEC . . . . . . . . . . . . . . . . . .    N NUMB   00F4H   A   
SETA_VALORES_TIMER_SEM_INT. . . . . . .    C ADDR   0D05H   A   
SET_WAIT. . . . . . . . . . . . . . . .    C ADDR   0755H   A   
SI. . . . . . . . . . . . . . . . . . .    N NUMB   0008H   A   
SINE_WAVE_25_SAMPLES. . . . . . . . . .    C ADDR   0A50H   A   
SINE_WAVE_37_SAMPLES. . . . . . . . . .    C ADDR   0A69H   A   
SINE_WAVE_71_SAMPLES. . . . . . . . . .    C ADDR   0A8EH   A   
SM1 . . . . . . . . . . . . . . . . . .    B ADDR   0098H.6 A   
SM2 . . . . . . . . . . . . . . . . . .    B ADDR   0098H.5 A   
SP. . . . . . . . . . . . . . . . . . .    D ADDR   0081H   A   
SPCON . . . . . . . . . . . . . . . . .    D ADDR   00C3H   A   
SPDAT . . . . . . . . . . . . . . . . .    D ADDR   00C5H   A   
SPSTA . . . . . . . . . . . . . . . . .    D ADDR   00C4H   A   
SSADR . . . . . . . . . . . . . . . . .    D ADDR   0096H   A   
SSCON . . . . . . . . . . . . . . . . .    D ADDR   0093H   A   
SSCS. . . . . . . . . . . . . . . . . .    D ADDR   0094H   A   
SSDAT . . . . . . . . . . . . . . . . .    D ADDR   0095H   A   
SSIE. . . . . . . . . . . . . . . . . .    N NUMB   0040H   A   
STA . . . . . . . . . . . . . . . . . .    N NUMB   0020H   A   
START . . . . . . . . . . . . . . . . .    C ADDR   08A7H   A   
STO . . . . . . . . . . . . . . . . . .    N NUMB   0010H   A   
T2CON . . . . . . . . . . . . . . . . .    D ADDR   00C8H   A   
T2MOD . . . . . . . . . . . . . . . . .    D ADDR   00C9H   A   
TAB7SEG . . . . . . . . . . . . . . . .    C ADDR   0E00H   A   
TB8 . . . . . . . . . . . . . . . . . .    B ADDR   0098H.3 A   
TCLK. . . . . . . . . . . . . . . . . .    B ADDR   00C8H.4 A   
TCON. . . . . . . . . . . . . . . . . .    D ADDR   0088H   A   
TECLADO . . . . . . . . . . . . . . . .    D ADDR   0090H   A   
TERMINA . . . . . . . . . . . . . . . .    C ADDR   0897H   A   
TF0 . . . . . . . . . . . . . . . . . .    B ADDR   0088H.5 A   
TF1 . . . . . . . . . . . . . . . . . .    B ADDR   0088H.7 A   
TF2 . . . . . . . . . . . . . . . . . .    B ADDR   00C8H.7 A   
TH0 . . . . . . . . . . . . . . . . . .    D ADDR   008CH   A   
TH1 . . . . . . . . . . . . . . . . . .    D ADDR   008DH   A   
TH2 . . . . . . . . . . . . . . . . . .    D ADDR   00CDH   A   
TI. . . . . . . . . . . . . . . . . . .    B ADDR   0098H.1 A   
TIMER_CONFIGURA_TIMER_SEM_INT . . . . .    C ADDR   0D00H   A   
TIMER_DELAY . . . . . . . . . . . . . .    C ADDR   0D3DH   A   
TIMER_DELAY_10_US . . . . . . . . . . .    C ADDR   0D0EH   A   
TIMER_DELAY_1_MS. . . . . . . . . . . .    C ADDR   0D13H   A   
TIMER_DELAY_1_S . . . . . . . . . . . .    C ADDR   0D36H   A   
TIMER_DELAY_200_MS. . . . . . . . . . .    C ADDR   0D2FH   A   
TL0 . . . . . . . . . . . . . . . . . .    D ADDR   008AH   A   
TL1 . . . . . . . . . . . . . . . . . .    D ADDR   008BH   A   
TL2 . . . . . . . . . . . . . . . . . .    D ADDR   00CCH   A   
A51 MACRO ASSEMBLER  PROJETO00_PADRAO                                                     05/12/2017 17:07:41 PAGE    44

TMOD. . . . . . . . . . . . . . . . . .    D ADDR   0089H   A   
TR0 . . . . . . . . . . . . . . . . . .    B ADDR   0088H.4 A   
TR1 . . . . . . . . . . . . . . . . . .    B ADDR   0088H.6 A   
TR2 . . . . . . . . . . . . . . . . . .    B ADDR   00C8H.2 A   
TRIGGER_ULTRASSOM_ENVIO . . . . . . . .    B ADDR   00B0H.1 A   
TRIGGER_ULTRASSOM_RECEPTOR. . . . . . .    B ADDR   00B0H.0 A   
T_OUT . . . . . . . . . . . . . . . . .    N NUMB   00E9H   A   
T_OUTS. . . . . . . . . . . . . . . . .    N NUMB   00E8H   A   
UBYCTHX . . . . . . . . . . . . . . . .    D ADDR   00E3H   A   
UBYCTLX . . . . . . . . . . . . . . . .    D ADDR   00E2H   A   
UDPADDH . . . . . . . . . . . . . . . .    D ADDR   00D7H   A   
UDPADDL . . . . . . . . . . . . . . . .    D ADDR   00D6H   A   
UEPCONX . . . . . . . . . . . . . . . .    D ADDR   00D4H   A   
UEPDATX . . . . . . . . . . . . . . . .    D ADDR   00CFH   A   
UEPIEN. . . . . . . . . . . . . . . . .    D ADDR   00C2H   A   
UEPINT. . . . . . . . . . . . . . . . .    D ADDR   00F8H   A   
UEPNUM. . . . . . . . . . . . . . . . .    D ADDR   00C7H   A   
UEPRST. . . . . . . . . . . . . . . . .    D ADDR   00D5H   A   
UEPSTAX . . . . . . . . . . . . . . . .    D ADDR   00CEH   A   
UFNUMH. . . . . . . . . . . . . . . . .    D ADDR   00BBH   A   
UFNUML. . . . . . . . . . . . . . . . .    D ADDR   00BAH   A   
USBADDR . . . . . . . . . . . . . . . .    D ADDR   00C6H   A   
USBCON. . . . . . . . . . . . . . . . .    D ADDR   00BCH   A   
USBIEN. . . . . . . . . . . . . . . . .    D ADDR   00BEH   A   
USBINT. . . . . . . . . . . . . . . . .    D ADDR   00BDH   A   
VARREDURA_TECLADO . . . . . . . . . . .    C ADDR   0C09H   A   
VARRE_ENT . . . . . . . . . . . . . . .    C ADDR   0C03H   A   
VERIFICA_R0 . . . . . . . . . . . . . .    C ADDR   0D47H   A   
VERIFICA_R1 . . . . . . . . . . . . . .    C ADDR   0D44H   A   
WADDR . . . . . . . . . . . . . . . . .    N NUMB   00D0H   A   
WAVE_FORM . . . . . . . . . . . . . . .    N NUMB   00FCH   A   
WAVE_FORM_SINE. . . . . . . . . . . . .    N NUMB   00FEH   A   
WAVE_FORM_SQUARE. . . . . . . . . . . .    N NUMB   00FDH   A   
WDA1. . . . . . . . . . . . . . . . . .    C ADDR   08FAH   A   
WDA2. . . . . . . . . . . . . . . . . .    C ADDR   08EFH   A   
WDTPRG. . . . . . . . . . . . . . . . .    D ADDR   00A7H   A   
WDTRST. . . . . . . . . . . . . . . . .    D ADDR   00A6H   A   
W_ADDR_ACK. . . . . . . . . . . . . . .    C ADDR   08C1H   A   
W_ADDR_NACK . . . . . . . . . . . . . .    C ADDR   08CDH   A   
W_DATA_ACK. . . . . . . . . . . . . . .    C ADDR   08DCH   A   
W_DATA_NACK . . . . . . . . . . . . . .    C ADDR   0909H   A   
YEA . . . . . . . . . . . . . . . . . .    N NUMB   00EEH   A   
__STARTUP__ . . . . . . . . . . . . . .    C ADDR   0046H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
