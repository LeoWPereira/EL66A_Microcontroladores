A51 MACRO ASSEMBLER  LCD                                                                  03/22/2017 21:12:52 PAGE     1


MACRO ASSEMBLER A51 V8.2.5.0
OBJECT MODULE PLACED IN .\Objects\lcd.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE lcd.a51 SET(SMALL) DEBUG PRINT(.\Listings\lcd.lst) OBJECT(.\Objects\lcd
                      .obj) EP

LOC  OBJ            LINE     SOURCE

                       1     

                       2     

                       3     

                       4     

                       5     

                       6     

                       7     

                       8     

                       9     

                      10     

                      11     

  00A5                12     RS              EQU     P2.5                     

  00A7                13     E_LCD   EQU     P2.7                     

  00A6                14     RW              EQU     P2.6                     

  0087                15     BUSYF   EQU     P0.7                     

                      16     

                      17     

                      18     

                      19     

                      20     

                      21     

                      22     

                      23     

                      24     

                      25     

0000                  26     INIDISP:                       

0000 7838             27             MOV     R0,#38H          

0002 7A05             28             MOV     R2,#05           

0004 111F             29             CALL    ESCINST          

                      30             

0006 7838             31                     MOV     R0,#38H          

0008 7A01             32             MOV     R2,#01           

000A 111F             33             CALL    ESCINST          

                      34             

000C 7806             35                     MOV     R0,#06H          

000E 7A01             36             MOV     R2,#01           

0010 111F             37             CALL    ESCINST          

                      38             

0012 780C             39                     MOV     R0,#0CH          

0014 7A01             40             MOV     R2,#01           

0016 111F             41             CALL    ESCINST          

                      42             

0018 7801             43                     MOV     R0,#01H          

001A 7A02             44             MOV     R2,#02           

001C 111F             45             CALL    ESCINST          

                      46             

001E 22               47                     RET

                      48                     

                      49     

                      50     

                      51     

                      52     

                      53     

                      54     

                      55     

                      56     

                      57     

A51 MACRO ASSEMBLER  LCD                                                                  03/22/2017 21:12:52 PAGE     2

001F                  58     ESCINST:  

001F C2A6             59                     CLR             RW                               

0021 C2A5             60                     CLR     RS               

0023 D2A7             61                     SETB    E_LCD            

                      62                     

0025 8880             63                     MOV     P0,R0            

                      64                     

0027 C2A7             65                     CLR     E_LCD            

                      66                     

0029 7580FF           67                     MOV             P0,#0xFF                 

                      68                     

002C D2A6             69                     SETB    RW                               

002E D2A7             70                     SETB    E_LCD            

                      71     

0030 2087FD           72     ESCI1:  JB      BUSYF,ESCI1                      

                      73                     

0033 C2A7             74                     CLR     E_LCD            

                      75             

0035 22               76                     RET

                      77                     

                      78     

                      79     

                      80     

                      81     

                      82     

                      83     

                      84     

                      85     

0036                  86     GOTOXY: 

0036 C0E0             87                     PUSH    ACC

                      88             

0038 7480             89                     MOV     A,#80H

003A B80102           90             CJNE    R0,#01,GT1       

                      91             

003D 74C0             92                     MOV     A,#0C0H

                      93                     

003F 49               94     GT1:    ORL     A,R1             

0040 F8               95             MOV     R0,A

0041 7A01             96             MOV     R2,#01           

                      97             

0043 111F             98                     CALL    ESCINST          

                      99             

0045 D0E0            100                     POP     ACC

                     101             

0047 22              102                     RET

                     103                     

                     104     

                     105     

                     106     

                     107     

                     108     

                     109     

                     110     

                     111     

0048                 112     CLR2L:    

0048 C0E0            113             PUSH   ACC

                     114             

004A 7801            115                     MOV    R0,#01               

004C 7900            116             MOV    R1,#00

                     117             

004E 1136            118                     CALL   GOTOXY

                     119             

0050 7910            120                     MOV    R1,#16               

                     121     

0052 7420            122     CLR2L1: MOV    A,#' '               

                     123             

A51 MACRO ASSEMBLER  LCD                                                                  03/22/2017 21:12:52 PAGE     3

0054 1161            124                     CALL   ESCDADO

                     125             

0056 D9FA            126                     DJNZ   R1,CLR2L1

0058 7801            127             MOV    R0,#01               

005A 7900            128             MOV    R1,#00

                     129             

005C 1136            130                     CALL   GOTOXY

                     131             

005E D0E0            132                     POP    ACC

                     133             

0060 22              134                     RET

                     135                

                     136     

                     137     

                     138     

                     139     

                     140     

                     141     

                     142     

0061                 143     ESCDADO:  

0061 C2A6            144                     CLR             RW                               

0063 D2A5            145             SETB    RS               

0065 D2A7            146             SETB    E_LCD            

                     147                     

0067 F580            148             MOV     P0,A             

                     149             

0069 C2A7            150                     CLR     E_LCD            

                     151                     

006B 7580FF          152                     MOV             P0,#0xFF                 

                     153                     

006E D2A6            154                     SETB    RW                               

0070 C2A5            155                     CLR             RS                               

0072 D2A7            156                     SETB    E_LCD            

                     157     

0074 2087FD          158     ESCD1:  JB              BUSYF,ESCD1              

                     159     

0077 C2A7            160                     CLR     E_LCD            

                     161     

0079 22              162             RET

                     163                     

                     164     

                     165     

                     166     

                     167     

                     168     

                     169     

                     170     

                     171     

                     172     

007A                 173     MSTRING:  

007A E4              174                       CLR    A

007B 93              175               MOVC   A,@A+DPTR       

                     176               

007C 6006            177                       JZ     MSTR1

                     178               

007E 120061          179                       LCALL  ESCDADO         

                     180               

0081 A3              181                       INC    DPTR

                     182               

0082 80F6            183                       SJMP   MSTRING

                     184                       

0084 22              185     MSTR1:    RET

                     186                

                     187     

                     188     

                     189     

A51 MACRO ASSEMBLER  LCD                                                                  03/22/2017 21:12:52 PAGE     4

                     190     

                     191     

                     192     

                     193     

                     194     

                     195     

0085                 196     MSTRINGX: 

0085 E0              197                       MOVX   A,@DPTR         

                     198               

0086 6006            199                       JZ     MSTR21

                     200               

0088 120061          201                       LCALL  ESCDADO         

                     202               

008B A3              203                       INC    DPTR

                     204               

008C 80F7            205                       SJMP   MSTRINGX

                     206     

008E 22              207     MSTR21:   RET

                     208     

                     209     

                     210     

                     211     

                     212     

                     213     

                     214     

                     215     

                     216     

                     217     

008F                 218     ESC_STR1: 

                     219                       

008F 7800            220                       MOV    R0,#00         

0091 7900            221               MOV    R1,#00

                     222               

0093 8004            223                       JMP    ESC_S

                     224               

                     225     

                     226     

                     227     

                     228     

                     229     

                     230     

                     231     

                     232     

                     233     

0095                 234     ESC_STR2: 

                     235                       

0095 7801            236                       MOV    R0,#01         

0097 7900            237               MOV    R1,#00

                     238                       

0099 120036          239     ESC_S:    LCALL  GOTOXY          

                     240               

009C 12007A          241                       LCALL  MSTRING

                     242               

009F 22              243                       RET

                     244     

                     245     

                     246     

                     247     

                     248     

                     249     

                     250     

                     251     ; DESTROI: R0,R2                                                                        //

                     252     

00A0                 253     CUR_ON:   

00A0 780F            254                       MOV    R0,#0FH               

00A2 8002            255               SJMP   CUR1

A51 MACRO ASSEMBLER  LCD                                                                  03/22/2017 21:12:52 PAGE     5

                     256                       

00A4                 257     CUR_OFF:  

00A4 780C            258                       MOV    R0,#0CH               

                     259                       

00A6 7A01            260     CUR1:     MOV    R2,#01

                     261               

00A8 111F            262                       CALL   ESCINST               

                     263               

00AA 22              264                       RET

                     265     

                     266     END

A51 MACRO ASSEMBLER  LCD                                                                  03/22/2017 21:12:52 PAGE     6

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

ACC. . . . . . . .  D ADDR   00E0H   A   
BUSYF. . . . . . .  B ADDR   0080H.7 A   
CLR2L. . . . . . .  C ADDR   0048H   A   
CLR2L1 . . . . . .  C ADDR   0052H   A   
CUR1 . . . . . . .  C ADDR   00A6H   A   
CUR_OFF. . . . . .  C ADDR   00A4H   A   
CUR_ON . . . . . .  C ADDR   00A0H   A   
ESCD1. . . . . . .  C ADDR   0074H   A   
ESCDADO. . . . . .  C ADDR   0061H   A   
ESCI1. . . . . . .  C ADDR   0030H   A   
ESCINST. . . . . .  C ADDR   001FH   A   
ESC_S. . . . . . .  C ADDR   0099H   A   
ESC_STR1 . . . . .  C ADDR   008FH   A   
ESC_STR2 . . . . .  C ADDR   0095H   A   
E_LCD. . . . . . .  B ADDR   00A0H.7 A   
GOTOXY . . . . . .  C ADDR   0036H   A   
GT1. . . . . . . .  C ADDR   003FH   A   
INIDISP. . . . . .  C ADDR   0000H   A   
MSTR1. . . . . . .  C ADDR   0084H   A   
MSTR21 . . . . . .  C ADDR   008EH   A   
MSTRING. . . . . .  C ADDR   007AH   A   
MSTRINGX . . . . .  C ADDR   0085H   A   
P0 . . . . . . . .  D ADDR   0080H   A   
P2 . . . . . . . .  D ADDR   00A0H   A   
RS . . . . . . . .  B ADDR   00A0H.5 A   
RW . . . . . . . .  B ADDR   00A0H.6 A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
