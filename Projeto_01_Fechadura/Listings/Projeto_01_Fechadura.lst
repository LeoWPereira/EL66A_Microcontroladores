A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 04/05/2017 20:14:19 PAGE     1


MACRO ASSEMBLER A51 V8.2.5.0
OBJECT MODULE PLACED IN .\Objects\Projeto_01_Fechadura.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE Projeto_01_Fechadura.a51 SET(SMALL) DEBUG PRINT(.\Listings\Projeto_01_F
                      echadura.lst) OBJECT(.\Objects\Projeto_01_Fechadura.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     

                       2     

                       3     

                       4     

                       5     

                       6     

                       7     

                       8     

                       9     

                      10     

                      11     

                      12     

                      13     

                      14     

                      15     

                      16     

2000                  17     org 2000h  

2000 0220EC           18     ljmp __STARTUP__

                      19     

2003                  20     org 2003h  

2003 0223B9           21     ljmp INT_INT0

                      22     

200B                  23     org 200Bh  

200B 0223BA           24     ljmp INT_TIMER0

                      25     

2013                  26     org 2013h  

2013 0223BB           27     ljmp INT_INT1

                      28     

201B                  29     org 201Bh  

201B 0223BC           30     ljmp INT_TIMER1

                      31     

2023                  32     org 2023h  

2023 0223BD           33     ljmp INT_SERIAL

                      34     

                      35     

                      36     

                      37     

                      38     

                      39     

  00A5                40     RS                              EQU     P2.5                     

  00A6                41     RW                              EQU     P2.6                     

  00A7                42     E_LCD                   EQU     P2.7                     

                      43     

  0087                44     BUSYF                   EQU     P0.7                     

                      45     

                      46     

  00B6                47     LED_SEG                 EQU     P3.6

  00B7                48     LED1                    EQU     P3.7

                      49             

                      50     

  0090                51     TECLADO                 EQU     P1

                      52     

  0090                53     COL1                    EQU P1.0

  0091                54     COL2                    EQU P1.1

  0092                55     COL3                    EQU P1.2

  0093                56     COL4                    EQU P1.3

                      57     

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 04/05/2017 20:14:19 PAGE     2

  0094                58     LIN1                    EQU P1.4

  0095                59     LIN2                    EQU P1.5

  0096                60     LIN3                    EQU P1.6

  0097                61     LIN4                    EQU P1.7

                      62             

                      63     

  00B0                64     BUZZER                  EQU P3.0        

                      65     

                      66     

  00B1                67     ESTADO_UM               EQU P3.1

  00B2                68     ESTADO_DOIS     EQU P3.2

  00B3                69     ESTADO_TRES     EQU P3.3

  00B4                70     ESTADO_QUATRO   EQU P3.4

                      71             

                      72     

  0031                73     TECLADO_1               EQU 31h

  0032                74     TECLADO_2               EQU 32h

  0033                75     TECLADO_3               EQU 33h

  0034                76     TECLADO_4               EQU 34h

                      77     

                      78     

  0035                79     SENHA1_1                EQU 35h

  0036                80     SENHA1_2                EQU 36h

  0037                81     SENHA1_3                EQU 37h

  0038                82     SENHA1_4                EQU 38h

                      83     

  0045                84     SENHA2_1                EQU 45h

  0046                85     SENHA2_2                EQU 46h

  0047                86     SENHA2_3                EQU 47h

  0048                87     SENHA2_4                EQU 48h

                      88     

  0050                89     TENTATIVAS      EQU 50h

                      90                     

                      91     

                      92     

                      93     

                      94     

2030                  95     org 2030h

2030                  96     SENHA_PADRAO_1:

2030 32383132         97                     db      '2812', 00H

2034 00                      
2035                  98     SENHA_PADRAO_2:

2035 30393132         99                     db      '0912', 00H

2039 00                      
203A                 100     STR_LOGO:

203A 2050524F        101             DB      ' PROFS. LINDOS! ',00H

203E 46532E20                
2042 4C494E44                
2046 4F532120                
204A 00                      
204B                 102     STR_LEONARDO_PEREIRA:

204B 4C656F6E        103             DB      'Leonardo Pereira',00H

204F 6172646F                
2053 20506572                
2057 65697261                
205B 00                      
205C                 104     STR_RODRIGO_ENDO:

205C 2020526F        105             DB      '  Rodrigo Endo  ',00H

2060 64726967                
2064 6F20456E                
2068 646F2020                
206C 00                      
206D                 106     STR_SENHA:

206D 53454E48        107             DB      'SENHA: ',00H

2071 413A2000                
2075                 108     STR_PRESSIONE_ENTER:

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 04/05/2017 20:14:19 PAGE     3

2075 50524553        109             DB      'PRESSIONE ENTER ',00H

2079 53494F4E                
207D 4520454E                
2081 54455220                
2085 00                      
2086                 110     STR_SENHA_VALIDA:

2086 20205345        111             DB      '  SENHA VALIDA  ',00H

208A 4E484120                
208E 56414C49                
2092 44412020                
2096 00                      
2097                 112     STR_SENHA_INVALIDA:

2097 2053454E        113             DB      ' SENHA INVALIDA ',00H

209B 48412049                
209F 4E56414C                
20A3 49444120                
20A7 00                      
20A8                 114     STR_LIBERANDO_PORTA:

20A8 4C494245        115             DB      'LIBERANDO PORTA ',00H

20AC 52414E44                
20B0 4F20504F                
20B4 52544120                
20B8 00                      
20B9                 116     STR_TRANCANDO_PORTA:

20B9 5452414E        117             DB      'TRANCANDO PORTA ',00H          

20BD 43414E44                
20C1 4F20504F                
20C5 52544120                
20C9 00                      
20CA                 118     STR_SISTEMA_BLOQUEADO:

20CA 504F5254        119             DB      'PORTA BLOQUEADA ',00H

20CE 4120424C                
20D2 4F515545                
20D6 41444120                
20DA 00                      
20DB                 120     STR_TIMEOUT:

20DB 20202020        121             DB      '    TIMEOUT     ',00H                  

20DF 54494D45                
20E3 4F555420                
20E7 20202020                
20EB 00                      
                     122                     

                     123     

                     124     

                     125     

                     126     

20EC                 127     __STARTUP__:

20EC 719A            128                     CALL    TIMER_CONFIGURA_TIMER

                     129     

20EE 780F            130                     MOV     R0, #0Fh                 

20F0 122281          131                     LCALL   ACIONA_BUZZER

                     132     

20F3 902030          133                     MOV     DPTR, #2030h     

20F6 7800            134                     MOV     R0, #00h             

20F8 7935            135                     MOV     R1, #SENHA1_1    

20FA 7A04            136                     MOV     R2, #04h                 

20FC 3159            137                     CALL    LE_SENHA

                     138             

20FE 902035          139                     MOV     DPTR, #2035h     

2101 7800            140                     MOV     R0, #00h                 

2103 7945            141                     MOV     R1, #SENHA2_1    

2105 7A04            142                     MOV     R2, #04h                 

2107 3159            143                     CALL    LE_SENHA

                     144             

2109 755003          145                     MOV     TENTATIVAS, #3h  

                     146             

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 04/05/2017 20:14:19 PAGE     4

210C                 147     MAIN:

210C 51D6            148                     CALL    INIDISP                  

210E 90203A          149                     MOV     DPTR,#STR_LOGO   

2111 717E            150                     CALL    ESC_STR1                 

                     151                     

                     152                     

2113 7901            153                     MOV             R1, #01h

2115 71B2            154                     CALL    TIMER_DELAY_1_S

                     155                     

2117 711E            156                     CALL    CLR1L    

                     157                     

2119 90204B          158                     MOV     DPTR, #STR_LEONARDO_PEREIRA      

211C 717E            159                     CALL    ESC_STR1                                         

                     160                     

211E 90205C          161                     MOV     DPTR, #STR_RODRIGO_ENDO          

2121 7184            162                     CALL    ESC_STR2                                         

                     163                     

                     164                     

2123 7901            165                     MOV             R1, #01h

2125 71B2            166                     CALL    TIMER_DELAY_1_S

                     167     

                     168                     

2127 711E            169                     CALL    CLR1L

2129 7137            170                     CALL    CLR2L

                     171                     

                     172                     

212B 902075          173                     MOV     DPTR,#STR_PRESSIONE_ENTER        

212E 717E            174                     CALL    ESC_STR1                                         

                     175                     

2130 3175            176                     ACALL   PRESS_ENT                

                     177     

2132                 178     LIMPA_LCD_E_INICIA_SISTEMA:

2132 711E            179                     CALL    CLR1L

                     180                     

                     181                     

2134 90206D          182                     MOV     DPTR,#STR_SENHA  

2137 717E            183                     CALL    ESC_STR1                 

                     184                     

                     185                     

2139 7800            186                     MOV     R0, #00h         

213B 7907            187                     MOV     R1, #07h         

213D 710C            188                     CALL    GOTOXY

                     189                     

213F 7931            190                     MOV     R1, #TECLADO_1   

2141 7B01            191                     MOV     R3, #1h                  

2143 7F04            192                     MOV     R7, #04h                 

2145                 193     LE_4_DIGITOS:

2145 780A            194                     MOV     R0, #0Ah                 

2147 719E            195                     ACALL   TIMER_DELAY_20_MS

                     196                     

2149 3194            197                     ACALL   VARREDURA_TECLADO        

214B 316B            198                     CALL    ESCREVE_ASTERISCO        

                     199                     

214D 09              200                     INC R1   

214E 0B              201                     INC R3  

                     202                     

214F DFF4            203                     DJNZ R7, LE_4_DIGITOS  

                     204                     

                     205                     

2151 780A            206                     MOV     R0, #0Ah                 

2153 719E            207                     ACALL   TIMER_DELAY_20_MS

                     208                     

2155 317E            209                     ACALL   PRESS_ENT_OU_CLR                 

                     210                     

2157 80D9            211                     JMP             LIMPA_LCD_E_INICIA_SISTEMA

                     212     

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 04/05/2017 20:14:19 PAGE     5

                     213     

                     214     

                     215     

                     216     

                     217     

                     218     

                     219     

                     220     

                     221     

                     222     

2159                 223     LE_SENHA:

2159 315F            224                     CALL    LE_SENHA_ROM

                     225             

215B 09              226                     INC     R1

                     227             

215C DAFB            228                     DJNZ    R2, LE_SENHA

                     229             

215E 22              230                     RET

                     231     

215F                 232     LE_SENHA_ROM:

215F E8              233                     MOV     A, R0

2160 93              234                     MOVC    A, @A + DPTR

2161 F7              235                     MOV             @R1, A

                     236             

2162 08              237                     INC             R0

                     238             

2163 3166            239                     CALL    CONV_ASCII_TO_NUMBER

                     240             

2165 22              241                     RET

                     242             

                     243     

                     244     

                     245     

                     246     

                     247     

                     248     

                     249     

                     250     

2166                 251     CONV_ASCII_TO_NUMBER:

2166 E7              252                     MOV     A, @R1

                     253             

2167 24D0            254                     ADD     A, #-30h

                     255             

2169 F7              256                     MOV     @R1, A

                     257             

216A 22              258                     RET

                     259             

                     260     

                     261     

                     262     

                     263     

                     264     

                     265     

                     266     

216B                 267     ESCREVE_ASTERISCO:              

216B 7805            268                     MOV     R0, #05h

216D 122281          269                     LCALL   ACIONA_BUZZER

                     270                     

2170 742A            271                     MOV     A, #2Ah  

2172 7150            272                     CALL    ESCDADO

                     273             

2174 22              274                     RET

                     275     

                     276     

                     277     

                     278     

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 04/05/2017 20:14:19 PAGE     6

                     279     

                     280     

                     281     

                     282     

                     283     

2175                 284     PRESS_ENT:

                     285                     

2175 75907F          286                     MOV             TECLADO, #01111111b

                     287                     

2178                 288     VARRE_ENT:

2178 309302          289                     JNB     COL4, CONTINUA_PROG      

                     290                     

217B 80FB            291                     JMP     VARRE_ENT

217D                 292     CONTINUA_PROG:

217D 22              293                     RET

                     294                     

                     295     

                     296     

                     297     

                     298     

                     299     

                     300     

                     301     

                     302     

217E                 303     PRESS_ENT_OU_CLR:

                     304                     

217E 75907F          305                     MOV             TECLADO, #01111111b

                     306                     

2181                 307     VARRE_ENT_OU_CLR:

2181 309105          308                     JNB     COL2, CLEAR                      

2184 309372          309                     JNB     COL4, TESTA_SENHA1       

                     310                     

2187 80F8            311                     JMP     VARRE_ENT_OU_CLR

                     312     

                     313     

                     314     

                     315     

                     316     

                     317     

                     318     

                     319     

                     320     

                     321     

2189                 322     CLEAR: 

2189 7805            323                     MOV     R0, #05h

218B 122281          324                     LCALL   ACIONA_BUZZER

                     325                     

218E D0E0            326                     POP             ACC

2190 D0E0            327                     POP             ACC

2192 809E            328                     JMP     LIMPA_LCD_E_INICIA_SISTEMA

                     329                     

                     330     

                     331     

                     332     

                     333     

                     334     

                     335     

                     336     

2194                 337     VARREDURA_TECLADO:

2194 C294            338                     CLR  LIN1

2196 D295            339                     SETB LIN2

2198 D296            340                     SETB LIN3

219A D297            341                     SETB LIN4

219C 30912D          342                     JNB  COL2, DIGITO1

219F 30922E          343                     JNB  COL3, DIGITO2

21A2 30932F          344                     JNB  COL4, DIGITO3

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 04/05/2017 20:14:19 PAGE     7

                     345                     

21A5 C295            346                     CLR  LIN2

21A7 D294            347                     SETB LIN1

21A9 30912C          348                     JNB  COL2, DIGITO4

21AC 30922D          349                     JNB  COL3, DIGITO5

21AF 30932E          350                     JNB  COL4, DIGITO6

                     351                     

21B2 C296            352                     CLR  LIN3

21B4 D295            353                     SETB LIN2

21B6 30912B          354                     JNB  COL2, DIGITO7

21B9 30922C          355                     JNB  COL3, DIGITO8

21BC 30932D          356                     JNB  COL4, DIGITO9

                     357                     

21BF C297            358                     CLR  LIN4

21C1 D296            359                     SETB LIN3

21C3 3091C3          360                     JNB  COL2, CLEAR

21C6 309227          361                     JNB  COL3, DIGITO0

21C9 80C9            362                     JMP  VARREDURA_TECLADO

                     363                     

21CB 22              364                     RET

                     365                     

                     366     

                     367     

                     368     

                     369     

                     370     

                     371     

                     372     

                     373     

21CC 7401            374     DIGITO1: MOV A, #1h

21CE 21F4            375                      AJMP GRAVA_DIGITO

21D0 7402            376     DIGITO2: MOV A, #2h

21D2 21F4            377                      AJMP GRAVA_DIGITO

21D4 7403            378     DIGITO3: MOV A, #3h

21D6 21F4            379                      AJMP GRAVA_DIGITO

21D8 7404            380     DIGITO4: MOV A, #4h

21DA 21F4            381                      AJMP GRAVA_DIGITO

21DC 7405            382     DIGITO5: MOV A, #5h

21DE 21F4            383                      AJMP GRAVA_DIGITO

21E0 7406            384     DIGITO6: MOV A, #6h

21E2 21F4            385                      AJMP GRAVA_DIGITO

21E4 7407            386     DIGITO7: MOV A, #7h

21E6 21F4            387                      AJMP GRAVA_DIGITO

21E8 7408            388     DIGITO8: MOV A, #8h

21EA 21F4            389                      AJMP GRAVA_DIGITO

21EC 7409            390     DIGITO9: MOV A, #9h

21EE 21F4            391                      AJMP GRAVA_DIGITO

21F0 7400            392     DIGITO0: MOV A, #0h

21F2 21F4            393                      AJMP GRAVA_DIGITO

                     394                      

21F4                 395     GRAVA_DIGITO:

21F4 BB017E          396                     CJNE R3, #1h, GRAVA_TECLADO_2

21F7 F7              397                     MOV @R1, A

                     398             

21F8 22              399                     RET

                     400     

                     401     

                     402     

                     403     

                     404     

                     405     

                     406     

                     407     

                     408     

21F9                 409     TESTA_SENHA1:

21F9 7805            410                     MOV     R0, #05h

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 04/05/2017 20:14:19 PAGE     8

21FB 122281          411                     LCALL   ACIONA_BUZZER

                     412                     

21FE E535            413                     MOV             A, SENHA1_1

2200 B53111          414                     CJNE    A, TECLADO_1, TESTA_SENHA2

2203 E536            415                     MOV             A, SENHA1_2

2205 B5320C          416                     CJNE    A, TECLADO_2, TESTA_SENHA2

2208 E537            417                     MOV             A, SENHA1_3

220A B53307          418                     CJNE    A, TECLADO_3, TESTA_SENHA2

220D E538            419                     MOV             A, SENHA1_4

220F B53402          420                     CJNE    A, TECLADO_4, TESTA_SENHA2

2212 8035            421                     JMP     LIMPA_LCD_E_MOSTRA_SENHA_VALIDA

                     422             

2214                 423     TESTA_SENHA2:

2214 E545            424                     MOV             A, SENHA2_1

2216 B53111          425                     CJNE    A, TECLADO_1, LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA

2219 E546            426                     MOV             A, SENHA2_2

221B B5320C          427                     CJNE    A, TECLADO_2, LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA

221E E547            428                     MOV             A, SENHA2_3

2220 B53307          429                     CJNE    A, TECLADO_3, LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA

2223 E548            430                     MOV             A, SENHA2_4

2225 B53402          431                     CJNE    A, TECLADO_4, LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA

2228 801F            432                     JMP     LIMPA_LCD_E_MOSTRA_SENHA_VALIDA

                     433                     

222A                 434     LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA:

                     435                     

222A 711E            436                     CALL    CLR1L

222C 7137            437                     CALL    CLR2L

                     438                     

222E 902097          439                     MOV     DPTR,#STR_SENHA_INVALIDA         

2231 717E            440                     CALL    ESC_STR1                                         

                     441                     

                     442                     

2233 7864            443                     MOV     R0, #064h

2235 122281          444                     LCALL   ACIONA_BUZZER

                     445                     

                     446                     

2238 7901            447                     MOV             R1, #01h

223A 71B2            448                     CALL    TIMER_DELAY_1_S

                     449                     

223C D55009          450                     DJNZ    TENTATIVAS, REINICIA_SISTEMA

                     451                     

223F 711E            452                     CALL    CLR1L

2241 9020CA          453                     MOV     DPTR,#STR_SISTEMA_BLOQUEADO      

2244 717E            454                     CALL    ESC_STR1                                         

                     455                     

2246 61BE            456                     JMP     FIM

                     457     

2248                 458     REINICIA_SISTEMA:

2248 22              459                     RET

                     460                     

2249                 461     LIMPA_LCD_E_MOSTRA_SENHA_VALIDA:

2249 755003          462                     MOV     TENTATIVAS, #3h  

                     463                     

                     464                     

224C 711E            465                     CALL    CLR1L

224E 7137            466                     CALL    CLR2L

                     467                     

2250 902086          468                     MOV     DPTR,#STR_SENHA_VALIDA   

2253 717E            469                     CALL    ESC_STR1                                 

                     470                     

                     471                     

2255 7832            472                     MOV     R0, #032h

2257 122281          473                     LCALL   ACIONA_BUZZER

                     474                     

225A 9020A8          475                     MOV     DPTR, #STR_LIBERANDO_PORTA       

225D 7184            476                     CALL    ESC_STR2                                         

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 04/05/2017 20:14:19 PAGE     9

                     477                     

                     478                     

225F 7D1A            479                     MOV     R5, #1Ah

2261 122288          480                     LCALL   ABRE_FECHADURA

                     481                     

                     482                     

2264 7903            483                     MOV             R1, #03h

2266 71B2            484                     CALL    TIMER_DELAY_1_S

                     485                     

2268 7137            486                     CALL    CLR2L                                            

226A 9020B9          487                     MOV     DPTR, #STR_TRANCANDO_PORTA       

226D 7184            488                     CALL    ESC_STR2                                         

                     489                     

                     490                     

226F 7D1A            491                     MOV     R5, #1Ah

2271 1222AF          492                     LCALL   TRANCA_FECHADURA

                     493                     

2274 22              494                     RET

                     495                      

                     496     

                     497     

                     498     

                     499     

                     500     

                     501     

                     502     

2275 BB0202          503     GRAVA_TECLADO_2: CJNE R3, #2h, GRAVA_TECLADO_3

2278 417F            504                                      AJMP GRAVA_TECLADO_X

227A BB0300          505     GRAVA_TECLADO_3: CJNE R3, #3h, GRAVA_TECLADO_4

227D 417F            506     GRAVA_TECLADO_4: AJMP GRAVA_TECLADO_X           

                     507     

227F                 508     GRAVA_TECLADO_X:

227F F7              509                      MOV @R1, A

                     510                      

2280 22              511                      RET

                     512                      

                     513     

                     514     

                     515     

                     516     

2281                 517     ACIONA_BUZZER:

2281 D2B0            518                     SETB    BUZZER

2283 719E            519                     ACALL   TIMER_DELAY_20_MS

2285 C2B0            520                     CLR     BUZZER

                     521                     

2287 22              522                     RET

                     523                     

                     524     

                     525     

                     526     

2288                 527     ABRE_FECHADURA:

2288 D2B1            528                     SETB    ESTADO_UM

228A C2B2            529                     CLR             ESTADO_DOIS

228C C2B3            530                     CLR             ESTADO_TRES

228E C2B4            531                     CLR             ESTADO_QUATRO

                     532                     

2290 7805            533                     MOV     R0, #05h

2292 719E            534                     ACALL   TIMER_DELAY_20_MS

                     535                     

2294 C2B1            536                     CLR             ESTADO_UM

2296 D2B2            537                     SETB    ESTADO_DOIS

                     538                     

2298 7805            539                     MOV     R0, #05h

229A 719E            540                     ACALL   TIMER_DELAY_20_MS

                     541                     

229C C2B2            542                     CLR             ESTADO_DOIS

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 04/05/2017 20:14:19 PAGE    10

229E D2B3            543                     SETB    ESTADO_TRES

                     544                     

22A0 7805            545                     MOV     R0, #05h

22A2 719E            546                     ACALL   TIMER_DELAY_20_MS

                     547                     

22A4 C2B3            548                     CLR             ESTADO_TRES

22A6 D2B4            549                     SETB    ESTADO_QUATRO

                     550                     

22A8 7805            551                     MOV     R0, #05h

22AA 719E            552                     ACALL   TIMER_DELAY_20_MS

                     553                     

22AC DDDA            554                     DJNZ    R5, ABRE_FECHADURA

                     555                     

22AE 22              556                     RET

                     557                     

22AF                 558     TRANCA_FECHADURA:

22AF C2B1            559                     CLR             ESTADO_UM

22B1 C2B2            560                     CLR             ESTADO_DOIS

22B3 C2B3            561                     CLR             ESTADO_TRES

22B5 D2B4            562                     SETB    ESTADO_QUATRO

                     563                     

22B7 7805            564                     MOV     R0, #05h

22B9 719E            565                     ACALL   TIMER_DELAY_20_MS

                     566                     

22BB D2B3            567                     SETB    ESTADO_TRES

22BD C2B4            568                     CLR             ESTADO_QUATRO

                     569                     

22BF 7805            570                     MOV     R0, #05h

22C1 719E            571                     ACALL   TIMER_DELAY_20_MS

                     572                     

22C3 D2B2            573                     SETB    ESTADO_DOIS

22C5 C2B3            574                     CLR             ESTADO_TRES

                     575                     

22C7 7805            576                     MOV     R0, #05h

22C9 719E            577                     ACALL   TIMER_DELAY_20_MS

                     578                     

22CB D2B1            579                     SETB    ESTADO_UM

22CD C2B2            580                     CLR             ESTADO_DOIS

                     581                     

22CF 7805            582                     MOV     R0, #05h

22D1 719E            583                     ACALL   TIMER_DELAY_20_MS

                     584                     

22D3 DDDA            585                     DJNZ    R5, TRANCA_FECHADURA

                     586     

22D5 22              587                     RET

                     588     

                     589     

                     590     

                     591             

                     592     

                     593     

                     594     

                     595     

                     596     

                     597     

                     598     

                     599     

                     600     

22D6                 601     INIDISP:                       

22D6 7838            602             MOV     R0,#38H          

22D8 7A05            603             MOV     R2,#05           

22DA 51F5            604             CALL    ESCINST          

                     605             

22DC 7838            606                     MOV     R0,#38H          

22DE 7A01            607             MOV     R2,#01           

22E0 51F5            608             CALL    ESCINST          

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 04/05/2017 20:14:19 PAGE    11

                     609             

22E2 7806            610                     MOV     R0,#06H          

22E4 7A01            611             MOV     R2,#01           

22E6 51F5            612             CALL    ESCINST          

                     613             

22E8 780C            614                     MOV     R0,#0CH          

22EA 7A01            615             MOV     R2,#01           

22EC 51F5            616             CALL    ESCINST          

                     617             

22EE 7801            618                     MOV     R0,#01H          

22F0 7A02            619             MOV     R2,#02           

22F2 51F5            620             CALL    ESCINST          

                     621             

22F4 22              622                     RET

                     623                     

                     624     

                     625     

                     626     

                     627     

                     628     

                     629     

                     630     

                     631     

                     632     

22F5                 633     ESCINST:  

22F5 C2A6            634                     CLR             RW                               

22F7 C2A5            635                     CLR     RS               

22F9 D2A7            636                     SETB    E_LCD            

                     637                     

22FB 8880            638                     MOV     P0,R0            

                     639                     

22FD C2A7            640                     CLR     E_LCD            

                     641                     

22FF 7580FF          642                     MOV             P0,#0xFF                 

                     643                     

2302 D2A6            644                     SETB    RW                               

2304 D2A7            645                     SETB    E_LCD            

                     646     

2306 2087FD          647     ESCI1:  JB      BUSYF,ESCI1                      

                     648                     

2309 C2A7            649                     CLR     E_LCD            

                     650             

230B 22              651                     RET

                     652                     

                     653     

                     654     

                     655     

                     656     

                     657     

                     658     

                     659     

                     660     

230C                 661     GOTOXY: 

230C C0E0            662                     PUSH    ACC

                     663             

230E 7480            664                     MOV     A,#80H

2310 B80102          665             CJNE    R0,#01,GT1       

                     666             

2313 74C0            667                     MOV     A,#0C0H

                     668                     

2315 49              669     GT1:    ORL     A,R1             

2316 F8              670             MOV     R0,A

2317 7A01            671             MOV     R2,#01           

                     672             

2319 51F5            673                     CALL    ESCINST          

                     674             

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 04/05/2017 20:14:19 PAGE    12

231B D0E0            675                     POP     ACC

                     676             

231D 22              677                     RET

                     678             

                     679     

                     680     

                     681     

                     682     

                     683     

                     684     

                     685     

                     686     

231E                 687     CLR1L:    

231E C0E0            688             PUSH   ACC

                     689             

2320 7800            690                     MOV    R0,#00               

2322 7900            691             MOV    R1,#00

                     692             

2324 710C            693                     CALL   GOTOXY

                     694             

2326 7910            695                     MOV    R1,#16               

                     696     

2328 7420            697     CLR1L1: MOV    A,#' '               

                     698             

232A 7150            699                     CALL   ESCDADO

                     700             

232C D9FA            701                     DJNZ   R1,CLR1L1

232E 7800            702             MOV    R0,#00               

2330 7900            703             MOV    R1,#00

                     704             

2332 710C            705                     CALL   GOTOXY

                     706             

2334 D0E0            707                     POP    ACC

                     708             

2336 22              709                     RET

                     710                     

                     711     

                     712     

                     713     

                     714     

                     715     

                     716     

                     717     

                     718     

2337                 719     CLR2L:    

2337 C0E0            720             PUSH   ACC

                     721             

2339 7801            722                     MOV    R0,#01               

233B 7900            723             MOV    R1,#00

                     724             

233D 710C            725                     CALL   GOTOXY

                     726             

233F 7910            727                     MOV    R1,#16               

                     728     

2341 7420            729     CLR2L1: MOV    A,#' '               

                     730             

2343 7150            731                     CALL   ESCDADO

                     732             

2345 D9FA            733                     DJNZ   R1,CLR2L1

2347 7801            734             MOV    R0,#01               

2349 7900            735             MOV    R1,#00

                     736             

234B 710C            737                     CALL   GOTOXY

                     738             

234D D0E0            739                     POP    ACC

                     740             

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 04/05/2017 20:14:19 PAGE    13

234F 22              741                     RET

                     742                

                     743     

                     744     

                     745     

                     746     

                     747     

                     748     

                     749     

2350                 750     ESCDADO:  

2350 C2A6            751                     CLR             RW                               

2352 D2A5            752             SETB    RS               

2354 D2A7            753             SETB    E_LCD            

                     754                     

2356 F580            755             MOV     P0,A             

                     756             

2358 C2A7            757                     CLR     E_LCD            

                     758                     

235A 7580FF          759                     MOV             P0,#0xFF                 

                     760                     

235D D2A6            761                     SETB    RW                               

235F C2A5            762                     CLR             RS                               

2361 D2A7            763                     SETB    E_LCD            

                     764     

2363 2087FD          765     ESCD1:  JB              BUSYF,ESCD1              

                     766     

2366 C2A7            767                     CLR     E_LCD            

                     768     

2368 22              769             RET

                     770                     

                     771     

                     772     

                     773     

                     774     

                     775     

                     776     

                     777     

                     778     

                     779     

2369                 780     MSTRING:  

2369 E4              781                       CLR    A

236A 93              782               MOVC   A,@A+DPTR       

                     783               

236B 6006            784                       JZ     MSTR1

                     785               

236D 122350          786                       LCALL  ESCDADO         

                     787               

2370 A3              788                       INC    DPTR

                     789               

2371 80F6            790                       SJMP   MSTRING

                     791                       

2373 22              792     MSTR1:    RET

                     793                

                     794     

                     795     

                     796     

                     797     

                     798     

                     799     

                     800     

                     801     

                     802     

2374                 803     MSTRINGX: 

2374 E0              804                       MOVX   A,@DPTR         

                     805               

2375 6006            806                       JZ     MSTR21

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 04/05/2017 20:14:19 PAGE    14

                     807               

2377 122350          808                       LCALL  ESCDADO         

                     809               

237A A3              810                       INC    DPTR

                     811               

237B 80F7            812                       SJMP   MSTRINGX

                     813     

237D 22              814     MSTR21:   RET

                     815     

                     816     

                     817     

                     818     

                     819     

                     820     

                     821     

                     822     

                     823     

                     824     

237E                 825     ESC_STR1: 

                     826                       

237E 7800            827                       MOV    R0,#00         

2380 7900            828               MOV    R1,#00

                     829               

2382 8004            830                       JMP    ESC_S

                     831               

                     832     

                     833     

                     834     

                     835     

                     836     

                     837     

                     838     

                     839     

                     840     

2384                 841     ESC_STR2: 

                     842                       

2384 7801            843                       MOV    R0,#01         

2386 7900            844               MOV    R1,#00

                     845                       

2388 12230C          846     ESC_S:    LCALL  GOTOXY          

                     847               

238B 122369          848                       LCALL  MSTRING

                     849               

238E 22              850                       RET

                     851     

                     852     

                     853     

                     854     

                     855     

                     856     

                     857     

                     858     ; DESTROI: R0,R2                                                                        //

                     859     

238F                 860     CUR_ON:   

238F 780F            861                       MOV    R0,#0FH               

2391 8002            862               SJMP   CUR1

                     863                       

2393                 864     CUR_OFF:  

2393 780C            865                       MOV    R0,#0CH               

                     866                       

2395 7A01            867     CUR1:     MOV    R2,#01

                     868               

2397 51F5            869                       CALL   ESCINST               

                     870               

2399 22              871                       RET

                     872                       

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 04/05/2017 20:14:19 PAGE    15

                     873     

                     874     

                     875     

                     876                       

239A                 877     TIMER_CONFIGURA_TIMER:

239A 758901          878                     MOV TMOD, #00000001b  

                     879             

239D 22              880                     RET

                     881             

                     882     

                     883     

                     884     

                     885     

                     886     

                     887     

                     888     

239E                 889     TIMER_DELAY_20_MS:

239E 758C56          890                     MOV TH0, #HIGH(65535 - 43350)

23A1 758AA9          891                     MOV TL0, #LOW(65535 - 43350)

                     892             

23A4 C28D            893                     CLR TF0

23A6 D28C            894                     SETB TR0

                     895             

23A8 308DFD          896                     JNB TF0, $

                     897                     

23AB C28D            898                     CLR TF0

23AD C28C            899                     CLR TR0

                     900             

23AF D8ED            901                     DJNZ R0, TIMER_DELAY_20_MS

                     902             

23B1 22              903                     RET

                     904             

                     905     

                     906     

                     907     

                     908     

                     909     

                     910     

                     911     

23B2                 912     TIMER_DELAY_1_S:

23B2 7832            913                     MOV             R0, #50d

23B4 719E            914                     CALL    TIMER_DELAY_20_MS

                     915                     

23B6 D9FA            916                     DJNZ    R1, TIMER_DELAY_1_S

                     917             

23B8 22              918                     RET

                     919     

                     920     

                     921     

                     922     

                     923     

                     924     

                     925     

                     926     

23B9                 927     INT_INT0:

23B9 32              928                     RETI

                     929     

                     930     

                     931     

                     932     

23BA                 933     INT_TIMER0:

23BA 32              934                     RETI

                     935             

                     936     

                     937     

                     938     

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 04/05/2017 20:14:19 PAGE    16

23BB                 939     INT_INT1:

23BB 32              940                     RETI

                     941     

                     942     

                     943     

                     944     

23BC                 945     INT_TIMER1:

23BC 32              946                     RETI

                     947             

                     948     

                     949     

                     950     

23BD                 951     INT_SERIAL:

23BD 32              952                     RETI

                     953             

23BE                 954     FIM:

                     955                     END

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 04/05/2017 20:14:19 PAGE    17

SYMBOL TABLE LISTING
------ ----- -------


N A M E                            T Y P E  V A L U E   ATTRIBUTES

ABRE_FECHADURA. . . . . . . . . .  C ADDR   2288H   A   
ACC . . . . . . . . . . . . . . .  D ADDR   00E0H   A   
ACIONA_BUZZER . . . . . . . . . .  C ADDR   2281H   A   
BUSYF . . . . . . . . . . . . . .  B ADDR   0080H.7 A   
BUZZER. . . . . . . . . . . . . .  B ADDR   00B0H.0 A   
CLEAR . . . . . . . . . . . . . .  C ADDR   2189H   A   
CLR1L . . . . . . . . . . . . . .  C ADDR   231EH   A   
CLR1L1. . . . . . . . . . . . . .  C ADDR   2328H   A   
CLR2L . . . . . . . . . . . . . .  C ADDR   2337H   A   
CLR2L1. . . . . . . . . . . . . .  C ADDR   2341H   A   
COL1. . . . . . . . . . . . . . .  B ADDR   0090H.0 A   
COL2. . . . . . . . . . . . . . .  B ADDR   0090H.1 A   
COL3. . . . . . . . . . . . . . .  B ADDR   0090H.2 A   
COL4. . . . . . . . . . . . . . .  B ADDR   0090H.3 A   
CONTINUA_PROG . . . . . . . . . .  C ADDR   217DH   A   
CONV_ASCII_TO_NUMBER. . . . . . .  C ADDR   2166H   A   
CUR1. . . . . . . . . . . . . . .  C ADDR   2395H   A   
CUR_OFF . . . . . . . . . . . . .  C ADDR   2393H   A   
CUR_ON. . . . . . . . . . . . . .  C ADDR   238FH   A   
DIGITO0 . . . . . . . . . . . . .  C ADDR   21F0H   A   
DIGITO1 . . . . . . . . . . . . .  C ADDR   21CCH   A   
DIGITO2 . . . . . . . . . . . . .  C ADDR   21D0H   A   
DIGITO3 . . . . . . . . . . . . .  C ADDR   21D4H   A   
DIGITO4 . . . . . . . . . . . . .  C ADDR   21D8H   A   
DIGITO5 . . . . . . . . . . . . .  C ADDR   21DCH   A   
DIGITO6 . . . . . . . . . . . . .  C ADDR   21E0H   A   
DIGITO7 . . . . . . . . . . . . .  C ADDR   21E4H   A   
DIGITO8 . . . . . . . . . . . . .  C ADDR   21E8H   A   
DIGITO9 . . . . . . . . . . . . .  C ADDR   21ECH   A   
ESCD1 . . . . . . . . . . . . . .  C ADDR   2363H   A   
ESCDADO . . . . . . . . . . . . .  C ADDR   2350H   A   
ESCI1 . . . . . . . . . . . . . .  C ADDR   2306H   A   
ESCINST . . . . . . . . . . . . .  C ADDR   22F5H   A   
ESCREVE_ASTERISCO . . . . . . . .  C ADDR   216BH   A   
ESC_S . . . . . . . . . . . . . .  C ADDR   2388H   A   
ESC_STR1. . . . . . . . . . . . .  C ADDR   237EH   A   
ESC_STR2. . . . . . . . . . . . .  C ADDR   2384H   A   
ESTADO_DOIS . . . . . . . . . . .  B ADDR   00B0H.2 A   
ESTADO_QUATRO . . . . . . . . . .  B ADDR   00B0H.4 A   
ESTADO_TRES . . . . . . . . . . .  B ADDR   00B0H.3 A   
ESTADO_UM . . . . . . . . . . . .  B ADDR   00B0H.1 A   
E_LCD . . . . . . . . . . . . . .  B ADDR   00A0H.7 A   
FIM . . . . . . . . . . . . . . .  C ADDR   23BEH   A   
GOTOXY. . . . . . . . . . . . . .  C ADDR   230CH   A   
GRAVA_DIGITO. . . . . . . . . . .  C ADDR   21F4H   A   
GRAVA_TECLADO_2 . . . . . . . . .  C ADDR   2275H   A   
GRAVA_TECLADO_3 . . . . . . . . .  C ADDR   227AH   A   
GRAVA_TECLADO_4 . . . . . . . . .  C ADDR   227DH   A   
GRAVA_TECLADO_X . . . . . . . . .  C ADDR   227FH   A   
GT1 . . . . . . . . . . . . . . .  C ADDR   2315H   A   
INIDISP . . . . . . . . . . . . .  C ADDR   22D6H   A   
INT_INT0. . . . . . . . . . . . .  C ADDR   23B9H   A   
INT_INT1. . . . . . . . . . . . .  C ADDR   23BBH   A   
INT_SERIAL. . . . . . . . . . . .  C ADDR   23BDH   A   
INT_TIMER0. . . . . . . . . . . .  C ADDR   23BAH   A   
INT_TIMER1. . . . . . . . . . . .  C ADDR   23BCH   A   
LED1. . . . . . . . . . . . . . .  B ADDR   00B0H.7 A   
LED_SEG . . . . . . . . . . . . .  B ADDR   00B0H.6 A   
LE_4_DIGITOS. . . . . . . . . . .  C ADDR   2145H   A   
LE_SENHA. . . . . . . . . . . . .  C ADDR   2159H   A   
A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 04/05/2017 20:14:19 PAGE    18

LE_SENHA_ROM. . . . . . . . . . .  C ADDR   215FH   A   
LIMPA_LCD_E_INICIA_SISTEMA. . . .  C ADDR   2132H   A   
LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA  C ADDR   222AH   A   
LIMPA_LCD_E_MOSTRA_SENHA_VALIDA .  C ADDR   2249H   A   
LIN1. . . . . . . . . . . . . . .  B ADDR   0090H.4 A   
LIN2. . . . . . . . . . . . . . .  B ADDR   0090H.5 A   
LIN3. . . . . . . . . . . . . . .  B ADDR   0090H.6 A   
LIN4. . . . . . . . . . . . . . .  B ADDR   0090H.7 A   
MAIN. . . . . . . . . . . . . . .  C ADDR   210CH   A   
MSTR1 . . . . . . . . . . . . . .  C ADDR   2373H   A   
MSTR21. . . . . . . . . . . . . .  C ADDR   237DH   A   
MSTRING . . . . . . . . . . . . .  C ADDR   2369H   A   
MSTRINGX. . . . . . . . . . . . .  C ADDR   2374H   A   
P0. . . . . . . . . . . . . . . .  D ADDR   0080H   A   
P1. . . . . . . . . . . . . . . .  D ADDR   0090H   A   
P2. . . . . . . . . . . . . . . .  D ADDR   00A0H   A   
P3. . . . . . . . . . . . . . . .  D ADDR   00B0H   A   
PRESS_ENT . . . . . . . . . . . .  C ADDR   2175H   A   
PRESS_ENT_OU_CLR. . . . . . . . .  C ADDR   217EH   A   
REINICIA_SISTEMA. . . . . . . . .  C ADDR   2248H   A   
RS. . . . . . . . . . . . . . . .  B ADDR   00A0H.5 A   
RW. . . . . . . . . . . . . . . .  B ADDR   00A0H.6 A   
SENHA1_1. . . . . . . . . . . . .  N NUMB   0035H   A   
SENHA1_2. . . . . . . . . . . . .  N NUMB   0036H   A   
SENHA1_3. . . . . . . . . . . . .  N NUMB   0037H   A   
SENHA1_4. . . . . . . . . . . . .  N NUMB   0038H   A   
SENHA2_1. . . . . . . . . . . . .  N NUMB   0045H   A   
SENHA2_2. . . . . . . . . . . . .  N NUMB   0046H   A   
SENHA2_3. . . . . . . . . . . . .  N NUMB   0047H   A   
SENHA2_4. . . . . . . . . . . . .  N NUMB   0048H   A   
SENHA_PADRAO_1. . . . . . . . . .  C ADDR   2030H   A   
SENHA_PADRAO_2. . . . . . . . . .  C ADDR   2035H   A   
STR_LEONARDO_PEREIRA. . . . . . .  C ADDR   204BH   A   
STR_LIBERANDO_PORTA . . . . . . .  C ADDR   20A8H   A   
STR_LOGO. . . . . . . . . . . . .  C ADDR   203AH   A   
STR_PRESSIONE_ENTER . . . . . . .  C ADDR   2075H   A   
STR_RODRIGO_ENDO. . . . . . . . .  C ADDR   205CH   A   
STR_SENHA . . . . . . . . . . . .  C ADDR   206DH   A   
STR_SENHA_INVALIDA. . . . . . . .  C ADDR   2097H   A   
STR_SENHA_VALIDA. . . . . . . . .  C ADDR   2086H   A   
STR_SISTEMA_BLOQUEADO . . . . . .  C ADDR   20CAH   A   
STR_TIMEOUT . . . . . . . . . . .  C ADDR   20DBH   A   
STR_TRANCANDO_PORTA . . . . . . .  C ADDR   20B9H   A   
TECLADO . . . . . . . . . . . . .  D ADDR   0090H   A   
TECLADO_1 . . . . . . . . . . . .  N NUMB   0031H   A   
TECLADO_2 . . . . . . . . . . . .  N NUMB   0032H   A   
TECLADO_3 . . . . . . . . . . . .  N NUMB   0033H   A   
TECLADO_4 . . . . . . . . . . . .  N NUMB   0034H   A   
TENTATIVAS. . . . . . . . . . . .  N NUMB   0050H   A   
TESTA_SENHA1. . . . . . . . . . .  C ADDR   21F9H   A   
TESTA_SENHA2. . . . . . . . . . .  C ADDR   2214H   A   
TF0 . . . . . . . . . . . . . . .  B ADDR   0088H.5 A   
TH0 . . . . . . . . . . . . . . .  D ADDR   008CH   A   
TIMER_CONFIGURA_TIMER . . . . . .  C ADDR   239AH   A   
TIMER_DELAY_1_S . . . . . . . . .  C ADDR   23B2H   A   
TIMER_DELAY_20_MS . . . . . . . .  C ADDR   239EH   A   
TL0 . . . . . . . . . . . . . . .  D ADDR   008AH   A   
TMOD. . . . . . . . . . . . . . .  D ADDR   0089H   A   
TR0 . . . . . . . . . . . . . . .  B ADDR   0088H.4 A   
TRANCA_FECHADURA. . . . . . . . .  C ADDR   22AFH   A   
VARREDURA_TECLADO . . . . . . . .  C ADDR   2194H   A   
VARRE_ENT . . . . . . . . . . . .  C ADDR   2178H   A   
VARRE_ENT_OU_CLR. . . . . . . . .  C ADDR   2181H   A   
__STARTUP__ . . . . . . . . . . .  C ADDR   20ECH   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
