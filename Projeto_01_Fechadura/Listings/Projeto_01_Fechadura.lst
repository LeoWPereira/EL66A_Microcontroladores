A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 16:51:02 PAGE     1


MACRO ASSEMBLER A51 V8.2.5.0
OBJECT MODULE PLACED IN .\Objects\Projeto_01_Fechadura.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE Projeto_01_Fechadura.a51 SET(SMALL) DEBUG PRINT(.\Listings\Projeto_01_F
                      echadura.lst) OBJECT(.\Objects\Projeto_01_Fechadura.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     

                       2     

                       3     

                       4     

                       5     

                       6     

                       7     

                       8     

                       9     

                      10     

                      11     

                      12     

                      13     

                      14     

                      15     

                      16     

2000                  17     org 2000h  

2000 0220CA           18     ljmp __STARTUP__

                      19     

2003                  20     org 2003h  

2003 022397           21     ljmp INT_INT0

                      22     

200B                  23     org 200Bh  

200B 022398           24     ljmp INT_TIMER0

                      25     

2013                  26     org 2013h  

2013 022399           27     ljmp INT_INT1

                      28     

201B                  29     org 201Bh  

201B 02239A           30     ljmp INT_TIMER1

                      31     

2023                  32     org 2023h  

2023 02239B           33     ljmp INT_SERIAL

                      34     

                      35     

                      36     

                      37     

                      38     

                      39     

  00A5                40     RS                      EQU     P2.5                     

  00A6                41     RW                      EQU     P2.6                     

  00A7                42     E_LCD           EQU     P2.7                     

                      43     

  0087                44     BUSYF           EQU     P0.7                     

                      45     

                      46     

  00B6                47     LED_SEG         EQU     P3.6

  00B7                48     LED1            EQU     P3.7

                      49             

                      50     

  0090                51     COL1            EQU P1.0

  0091                52     COL2            EQU P1.1

  0092                53     COL3            EQU P1.2

  0093                54     COL4            EQU P1.3

                      55     

  0094                56     LIN1            EQU P1.4

  0095                57     LIN2            EQU P1.5

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 16:51:02 PAGE     2

  0096                58     LIN3            EQU P1.6

  0097                59     LIN4            EQU P1.7

                      60             

                      61     

  00B1                62     ESTADO_UM               EQU P3.1

  00B2                63     ESTADO_DOIS     EQU P3.2

  00B3                64     ESTADO_TRES     EQU P3.3

  00B4                65     ESTADO_QUATRO   EQU P3.4

                      66             

                      67     

  00B0                68     BUZZER                  EQU P3.0

                      69             

                      70     

  0031                71     TECLADO_1       EQU 31h

  0032                72     TECLADO_2       EQU 32h

  0033                73     TECLADO_3       EQU 33h

  0034                74     TECLADO_4       EQU 34h

                      75     

                      76     

  0035                77     SENHA1_1        EQU 35h

  0036                78     SENHA1_2        EQU 36h

  0037                79     SENHA1_3        EQU 37h

  0038                80     SENHA1_4        EQU 38h

                      81     

  0045                82     SENHA2_1        EQU 45h

  0046                83     SENHA2_2        EQU 46h

  0047                84     SENHA2_3        EQU 47h

  0048                85     SENHA2_4        EQU 48h

                      86     

  0050                87     TENTATIVAS  EQU 50h

                      88                     

                      89     

                      90     

                      91     

                      92     

2030                  93     org 2030h

2030                  94     SENHA_PADRAO_1:

2030 32383132         95                     db      '2812', 00H

2034 00                      
2035                  96     SENHA_PADRAO_2:

2035 30393132         97                     db      '0912', 00H

2039 00                      
203A                  98     STR_LOGO:

203A 2050524F         99             DB      ' PROFS. LINDOS! ',00H

203E 46532E20                
2042 4C494E44                
2046 4F532120                
204A 00                      
204B                 100     STR_LEONARDO_PEREIRA:

204B 4C656F6E        101             DB      'Leonardo Pereira',00H

204F 6172646F                
2053 20506572                
2057 65697261                
205B 00                      
205C                 102     STR_RODRIGO_ENDO:

205C 2020526F        103             DB      '  Rodrigo Endo  ',00H

2060 64726967                
2064 6F20456E                
2068 646F2020                
206C 00                      
206D                 104     STR_ENTER:

206D 50524553        105             DB      'PRESSIONE  ENTER',00H

2071 53494F4E                
2075 45202045                
2079 4E544552                
207D 00                      
A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 16:51:02 PAGE     3

207E                 106     STR_SENHA:

207E 53454E48        107             DB      'SENHA: ',00H

2082 413A2000                
2086                 108     STR_SENHA_VALIDA:

2086 20205345        109             DB      '  SENHA VALIDA  ',00H

208A 4E484120                
208E 56414C49                
2092 44412020                
2096 00                      
2097                 110     STR_SENHA_INVALIDA:

2097 2053454E        111             DB      ' SENHA INVALIDA ',00H

209B 48412049                
209F 4E56414C                
20A3 49444120                
20A7 00                      
20A8                 112     STR_LIBERANDO_PORTA:

20A8 4C494245        113             DB      'LIBERANDO PORTA ',00H

20AC 52414E44                
20B0 4F20504F                
20B4 52544120                
20B8 00                      
20B9                 114     STR_TRANCANDO_PORTA:

20B9 5452414E        115             DB      'TRANCANDO PORTA ',00H          

20BD 43414E44                
20C1 4F20504F                
20C5 52544120                
20C9 00                      
                     116                     

                     117     

                     118     

                     119     

                     120     

20CA                 121     __STARTUP__:

20CA 7178            122                     CALL    TIMER_CONFIGURA_TIMER

                     123     

20CC 7805            124                     MOV     R0, #05h

20CE 122247          125                     LCALL   ACIONA_BUZZER

                     126     

20D1 902030          127                     MOV     DPTR, #2030h     

20D4 7800            128                     MOV     R0, #00h             

20D6 7935            129                     MOV     R1, #SENHA1_1    

20D8 7A04            130                     MOV     R2, #04h                 

20DA 3130            131                     CALL    LE_SENHA

                     132             

20DC 902035          133                     MOV     DPTR, #2035h     

20DF 7800            134                     MOV     R0, #00h                 

20E1 7945            135                     MOV     R1, #SENHA2_1    

20E3 7A04            136                     MOV     R2, #04h                 

20E5 3130            137                     CALL    LE_SENHA

                     138             

20E7 755003          139                     MOV     TENTATIVAS, #3h

20EA C2B0            140                     CLR             BUZZER

                     141             

20EC                 142     MAIN:

20EC 51B4            143                     CALL    INIDISP  

20EE 90203A          144                     MOV     DPTR,#STR_LOGO   

20F1 715C            145                     CALL    ESC_STR1                 

                     146                     

                     147                     

20F3 7901            148                     MOV             R1, #01h

20F5 7190            149                     CALL    TIMER_DELAY_1_S

                     150                     

20F7 51FC            151                     CALL    CLR1L    

                     152                     

20F9 90204B          153                     MOV     DPTR, #STR_LEONARDO_PEREIRA      

20FC 715C            154                     CALL    ESC_STR1                                         

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 16:51:02 PAGE     4

                     155                     

20FE 90205C          156                     MOV     DPTR, #STR_RODRIGO_ENDO          

2101 7162            157                     CALL    ESC_STR2                                         

                     158                     

                     159                     

2103 7901            160                     MOV             R1, #01h

2105 7190            161                     CALL    TIMER_DELAY_1_S

                     162     

2107                 163     LIMPA_LCD_E_INICIA_SISTEMA:

                     164                     

2107 51FC            165                     CALL    CLR1L

2109 7115            166                     CALL    CLR2L

                     167                     

210B 90207E          168                     MOV     DPTR,#STR_SENHA  

210E 715C            169                     CALL    ESC_STR1                 

                     170                     

2110 7800            171                     MOV     R0, #00h         

2112 7907            172                     MOV     R1, #07h         

2114 51EA            173                     CALL    GOTOXY

                     174                     

2116 7931            175                     MOV     R1, #TECLADO_1   

2118 7B01            176                     MOV     R3, #1h                  

211A 7F04            177                     MOV     R7, #04h                 

211C                 178     LE_4_DIGITOS:

211C 780A            179                     MOV     R0, #0Ah

211E 717C            180                     ACALL   TIMER_DELAY_20_MS

                     181                     

2120 3167            182                     ACALL   VARREDURA_TECLADO

2122 3142            183                     CALL    ESCREVE_ASTERISCO

                     184                     

2124 09              185                     INC R1

2125 0B              186                     INC R3

                     187                     

2126 DFF4            188                     DJNZ R7, LE_4_DIGITOS

                     189                     

                     190                     

2128 780A            191                     MOV     R0, #0Ah

212A 717C            192                     ACALL   TIMER_DELAY_20_MS

                     193                     

212C 314C            194                     ACALL   PRESS_ENT

                     195                     

212E 80D7            196                     JMP             LIMPA_LCD_E_INICIA_SISTEMA

                     197     

                     198     

                     199     

                     200     

                     201     

                     202     

                     203     

                     204     

                     205     

                     206     

                     207     

2130                 208     LE_SENHA:

2130 3136            209             call LE_SENHA_ROM

                     210             

2132 09              211             INC R1

                     212             

2133 DAFB            213             djnz R2, LE_SENHA

                     214             

2135 22              215             RET

                     216     

2136                 217     LE_SENHA_ROM:

2136 E8              218             mov A, R0

2137 93              219             movc A, @A + DPTR

2138 F7              220             mov @R1, A

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 16:51:02 PAGE     5

                     221             

2139 08              222             inc R0

                     223             

213A 313D            224             call CONV_ASCII_TO_NUMBER

                     225             

213C 22              226             RET

                     227             

                     228     

                     229     

                     230     

                     231     

                     232     

                     233     

                     234     

                     235     

213D                 236     CONV_ASCII_TO_NUMBER:

213D E7              237                     MOV     A, @R1

                     238             

213E 24D0            239                     ADD     A, #-30h

                     240             

2140 F7              241                     MOV     @R1, A

                     242             

2141 22              243                     RET

                     244             

                     245     

                     246     

                     247     

                     248     

                     249     

                     250     

                     251     

2142                 252     ESCREVE_ASTERISCO:              

2142 7805            253                     MOV     R0, #05h

2144 122247          254                     LCALL   ACIONA_BUZZER

                     255                     

2147 742A            256                     MOV     A, #2Ah

2149 712E            257                     CALL    ESCDADO

                     258             

214B 22              259                     RET

                     260                     

                     261     

                     262     

                     263     

                     264     

                     265     

                     266     

                     267     

                     268     

214C                 269     PRESS_ENT:

214C D294            270                     SETB    LIN1

214E D295            271                     SETB    LIN2

2150 D296            272                     SETB    LIN3

2152 C297            273                     CLR     LIN4

2154 309105          274                     JNB     COL2, CLEAR                      

2157 309372          275                     JNB     COL4, TESTA_SENHA1       

215A 80F0            276                     JMP     PRESS_ENT

                     277     

                     278     

                     279     

                     280     

                     281     

                     282     

                     283     

                     284     

                     285     

                     286     

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 16:51:02 PAGE     6

215C                 287     CLEAR: 

215C 7805            288                     MOV     R0, #05h

215E 122247          289                     LCALL   ACIONA_BUZZER

                     290                     

2161 D0E0            291                     POP             ACC

2163 D0E0            292                     POP             ACC

2165 80A0            293                     JMP     LIMPA_LCD_E_INICIA_SISTEMA

                     294                     

                     295     

                     296     

                     297     

                     298     

                     299     

                     300     

                     301     

2167                 302     VARREDURA_TECLADO:

2167 C294            303                     CLR  LIN1

2169 D295            304                     SETB LIN2

216B D296            305                     SETB LIN3

216D D297            306                     SETB LIN4

216F 30912D          307                     JNB  COL2, DIGITO1

2172 30922E          308                     JNB  COL3, DIGITO2

2175 30932F          309                     JNB  COL4, DIGITO3

                     310                     

2178 C295            311                     CLR  LIN2

217A D294            312                     SETB LIN1

217C 30912C          313                     JNB  COL2, DIGITO4

217F 30922D          314                     JNB  COL3, DIGITO5

2182 30932E          315                     JNB  COL4, DIGITO6

                     316                     

2185 C296            317                     CLR  LIN3

2187 D295            318                     SETB LIN2

2189 30912B          319                     JNB  COL2, DIGITO7

218C 30922C          320                     JNB  COL3, DIGITO8

218F 30932D          321                     JNB  COL4, DIGITO9

                     322                     

2192 C297            323                     CLR  LIN4

2194 D296            324                     SETB LIN3

2196 3091C3          325                     JNB  COL2, CLEAR

2199 309227          326                     JNB  COL3, DIGITO0

219C 80C9            327                     JMP  VARREDURA_TECLADO

                     328                     

219E 22              329                     RET

                     330                     

                     331     

                     332     

                     333     

                     334     

                     335     

                     336     

                     337     

                     338     

219F 7401            339     DIGITO1: MOV A, #1h

21A1 21C7            340                      AJMP GRAVA_DIGITO

21A3 7402            341     DIGITO2: MOV A, #2h

21A5 21C7            342                      AJMP GRAVA_DIGITO

21A7 7403            343     DIGITO3: MOV A, #3h

21A9 21C7            344                      AJMP GRAVA_DIGITO

21AB 7404            345     DIGITO4: MOV A, #4h

21AD 21C7            346                      AJMP GRAVA_DIGITO

21AF 7405            347     DIGITO5: MOV A, #5h

21B1 21C7            348                      AJMP GRAVA_DIGITO

21B3 7406            349     DIGITO6: MOV A, #6h

21B5 21C7            350                      AJMP GRAVA_DIGITO

21B7 7407            351     DIGITO7: MOV A, #7h

21B9 21C7            352                      AJMP GRAVA_DIGITO

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 16:51:02 PAGE     7

21BB 7408            353     DIGITO8: MOV A, #8h

21BD 21C7            354                      AJMP GRAVA_DIGITO

21BF 7409            355     DIGITO9: MOV A, #9h

21C1 21C7            356                      AJMP GRAVA_DIGITO

21C3 7400            357     DIGITO0: MOV A, #0h

21C5 21C7            358                      AJMP GRAVA_DIGITO

                     359                      

21C7                 360     GRAVA_DIGITO:

21C7 BB016F          361                     CJNE R3, #1h, GRAVA_TECLADO_2

21CA F7              362                     MOV @R1, A

                     363             

21CB 22              364                     RET

                     365     

                     366     

                     367     

                     368     

                     369     

                     370     

                     371     

                     372     

                     373     

21CC                 374     TESTA_SENHA1:

21CC 7805            375                     MOV     R0, #05h

21CE 122247          376                     LCALL   ACIONA_BUZZER

                     377                     

21D1 E535            378                     MOV             A, SENHA1_1

21D3 B53111          379                     CJNE    A, TECLADO_1, TESTA_SENHA2

21D6 E536            380                     MOV             A, SENHA1_2

21D8 B5320C          381                     CJNE    A, TECLADO_2, TESTA_SENHA2

21DB E537            382                     MOV             A, SENHA1_3

21DD B53307          383                     CJNE    A, TECLADO_3, TESTA_SENHA2

21E0 E538            384                     MOV             A, SENHA1_4

21E2 B53402          385                     CJNE    A, TECLADO_4, TESTA_SENHA2

21E5 802A            386                     JMP     LIMPA_LCD_E_MOSTRA_SENHA_VALIDA

                     387             

21E7                 388     TESTA_SENHA2:

21E7 E545            389                     MOV             A, SENHA2_1

21E9 B53111          390                     CJNE    A, TECLADO_1, LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA

21EC E546            391                     MOV             A, SENHA2_2

21EE B5320C          392                     CJNE    A, TECLADO_2, LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA

21F1 E547            393                     MOV             A, SENHA2_3

21F3 B53307          394                     CJNE    A, TECLADO_3, LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA

21F6 E548            395                     MOV             A, SENHA2_4

21F8 B53402          396                     CJNE    A, TECLADO_4, LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA

21FB 8014            397                     JMP     LIMPA_LCD_E_MOSTRA_SENHA_VALIDA

                     398                     

21FD                 399     LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA:

                     400                     

21FD 51FC            401                     CALL    CLR1L

21FF 7115            402                     CALL    CLR2L

                     403                     

2201 902097          404                     MOV     DPTR,#STR_SENHA_INVALIDA         

2204 715C            405                     CALL    ESC_STR1                                         

                     406                     

                     407                     

2206 7864            408                     MOV     R0, #064h

2208 122247          409                     LCALL   ACIONA_BUZZER

                     410                     

                     411                     

220B 7901            412                     MOV             R1, #01h

220D 7190            413                     CALL    TIMER_DELAY_1_S

                     414                     

220F 2107            415                     JMP     LIMPA_LCD_E_INICIA_SISTEMA

                     416                     

2211                 417     LIMPA_LCD_E_MOSTRA_SENHA_VALIDA:

                     418                     

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 16:51:02 PAGE     8

2211 51FC            419                     CALL    CLR1L

2213 7115            420                     CALL    CLR2L

                     421                     

2215 902086          422                     MOV     DPTR,#STR_SENHA_VALIDA   

2218 715C            423                     CALL    ESC_STR1                                 

                     424                     

                     425                     

221A 7832            426                     MOV     R0, #032h

221C 122247          427                     LCALL   ACIONA_BUZZER

                     428                     

221F 9020A8          429                     MOV     DPTR, #STR_LIBERANDO_PORTA       

2222 7162            430                     CALL    ESC_STR2                                         

                     431                     

2224 7D1A            432                     MOV     R5, #1Ah

2226 12224E          433                     LCALL   ABRE_FECHADURA

                     434                     

                     435                     

2229 7903            436                     MOV             R1, #03h

222B 7190            437                     CALL    TIMER_DELAY_1_S

                     438                     

222D 9020B9          439                     MOV     DPTR, #STR_TRANCANDO_PORTA       

2230 7162            440                     CALL    ESC_STR2                                         

                     441                     

2232 7D1A            442                     MOV     R5, #1Ah

2234 122281          443                     LCALL   TRANCA_FECHADURA

                     444                     

2237 2107            445                     JMP     LIMPA_LCD_E_INICIA_SISTEMA

                     446                      

                     447     

                     448     

                     449     

                     450     

                     451     

                     452     

                     453     

2239 BB0202          454     GRAVA_TECLADO_2: CJNE R3, #2h, GRAVA_TECLADO_3

223C 4145            455                                      AJMP GRAVA_TECLADO_X

223E BB0302          456     GRAVA_TECLADO_3: CJNE R3, #3h, GRAVA_TECLADO_4

2241 4145            457                                      AJMP GRAVA_TECLADO_X           

2243 4145            458     GRAVA_TECLADO_4: AJMP GRAVA_TECLADO_X

                     459     

2245                 460     GRAVA_TECLADO_X:

2245 F7              461                      MOV @R1, A

                     462                      

2246 22              463                      RET

                     464                      

                     465     

                     466     

                     467     

                     468     

2247                 469     ACIONA_BUZZER:

2247 D2B0            470                     SETB    BUZZER

2249 717C            471                     ACALL   TIMER_DELAY_20_MS

224B C2B0            472                     CLR     BUZZER

                     473                     

224D 22              474                     RET

                     475                     

                     476     

                     477     

                     478     

224E                 479     ABRE_FECHADURA:

224E C2B2            480                     CLR             ESTADO_DOIS

2250 C2B3            481                     CLR             ESTADO_TRES

2252 C2B4            482                     CLR             ESTADO_QUATRO

2254 D2B1            483                     SETB    ESTADO_UM

                     484                     

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 16:51:02 PAGE     9

2256 7805            485                     MOV     R0, #05h

2258 717C            486                     ACALL   TIMER_DELAY_20_MS

                     487                     

225A D2B2            488                     SETB    ESTADO_DOIS

225C C2B3            489                     CLR             ESTADO_TRES

225E C2B4            490                     CLR             ESTADO_QUATRO

2260 C2B1            491                     CLR             ESTADO_UM

                     492                     

2262 7805            493                     MOV     R0, #05h

2264 717C            494                     ACALL   TIMER_DELAY_20_MS

                     495                     

2266 C2B2            496                     CLR             ESTADO_DOIS

2268 D2B3            497                     SETB    ESTADO_TRES

226A C2B4            498                     CLR             ESTADO_QUATRO

226C C2B1            499                     CLR             ESTADO_UM

                     500                     

226E 7805            501                     MOV     R0, #05h

2270 717C            502                     ACALL   TIMER_DELAY_20_MS

                     503                     

2272 C2B2            504                     CLR             ESTADO_DOIS

2274 C2B3            505                     CLR             ESTADO_TRES

2276 D2B4            506                     SETB    ESTADO_QUATRO

2278 C2B1            507                     CLR             ESTADO_UM

                     508                     

227A 7805            509                     MOV     R0, #05h

227C 717C            510                     ACALL   TIMER_DELAY_20_MS

                     511                     

227E DDCE            512                     DJNZ    R5, ABRE_FECHADURA

                     513                     

2280 22              514                     RET

                     515                     

2281                 516     TRANCA_FECHADURA:

2281 C2B2            517                     CLR             ESTADO_DOIS

2283 C2B3            518                     CLR             ESTADO_TRES

2285 D2B4            519                     SETB    ESTADO_QUATRO

2287 C2B1            520                     CLR             ESTADO_UM

                     521                     

2289 7805            522                     MOV     R0, #05h

228B 717C            523                     ACALL   TIMER_DELAY_20_MS

                     524                     

228D C2B2            525                     CLR             ESTADO_DOIS

228F D2B3            526                     SETB    ESTADO_TRES

2291 C2B4            527                     CLR             ESTADO_QUATRO

2293 C2B1            528                     CLR             ESTADO_UM

                     529                     

2295 7805            530                     MOV     R0, #05h

2297 717C            531                     ACALL   TIMER_DELAY_20_MS

                     532                     

2299 D2B2            533                     SETB    ESTADO_DOIS

229B C2B3            534                     CLR             ESTADO_TRES

229D C2B4            535                     CLR             ESTADO_QUATRO

229F C2B1            536                     CLR             ESTADO_UM

                     537                     

22A1 7805            538                     MOV     R0, #05h

22A3 717C            539                     ACALL   TIMER_DELAY_20_MS

                     540                     

22A5 C2B2            541                     CLR             ESTADO_DOIS

22A7 C2B3            542                     CLR             ESTADO_TRES

22A9 C2B4            543                     CLR             ESTADO_QUATRO

22AB D2B1            544                     SETB    ESTADO_UM

                     545                     

22AD 7805            546                     MOV     R0, #05h

22AF 717C            547                     ACALL   TIMER_DELAY_20_MS

                     548                     

22B1 DDCE            549                     DJNZ    R5, TRANCA_FECHADURA

                     550     

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 16:51:02 PAGE    10

22B3 22              551                     RET

                     552     

                     553     

                     554     

                     555             

                     556     

                     557     

                     558     

                     559     

                     560     

                     561     

                     562     

                     563     

                     564     

22B4                 565     INIDISP:                       

22B4 7838            566             MOV     R0,#38H          

22B6 7A05            567             MOV     R2,#05           

22B8 51D3            568             CALL    ESCINST          

                     569             

22BA 7838            570                     MOV     R0,#38H          

22BC 7A01            571             MOV     R2,#01           

22BE 51D3            572             CALL    ESCINST          

                     573             

22C0 7806            574                     MOV     R0,#06H          

22C2 7A01            575             MOV     R2,#01           

22C4 51D3            576             CALL    ESCINST          

                     577             

22C6 780C            578                     MOV     R0,#0CH          

22C8 7A01            579             MOV     R2,#01           

22CA 51D3            580             CALL    ESCINST          

                     581             

22CC 7801            582                     MOV     R0,#01H          

22CE 7A02            583             MOV     R2,#02           

22D0 51D3            584             CALL    ESCINST          

                     585             

22D2 22              586                     RET

                     587                     

                     588     

                     589     

                     590     

                     591     

                     592     

                     593     

                     594     

                     595     

                     596     

22D3                 597     ESCINST:  

22D3 C2A6            598                     CLR             RW                               

22D5 C2A5            599                     CLR     RS               

22D7 D2A7            600                     SETB    E_LCD            

                     601                     

22D9 8880            602                     MOV     P0,R0            

                     603                     

22DB C2A7            604                     CLR     E_LCD            

                     605                     

22DD 7580FF          606                     MOV             P0,#0xFF                 

                     607                     

22E0 D2A6            608                     SETB    RW                               

22E2 D2A7            609                     SETB    E_LCD            

                     610     

22E4 2087FD          611     ESCI1:  JB      BUSYF,ESCI1                      

                     612                     

22E7 C2A7            613                     CLR     E_LCD            

                     614             

22E9 22              615                     RET

                     616                     

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 16:51:02 PAGE    11

                     617     

                     618     

                     619     

                     620     

                     621     

                     622     

                     623     

                     624     

22EA                 625     GOTOXY: 

22EA C0E0            626                     PUSH    ACC

                     627             

22EC 7480            628                     MOV     A,#80H

22EE B80102          629             CJNE    R0,#01,GT1       

                     630             

22F1 74C0            631                     MOV     A,#0C0H

                     632                     

22F3 49              633     GT1:    ORL     A,R1             

22F4 F8              634             MOV     R0,A

22F5 7A01            635             MOV     R2,#01           

                     636             

22F7 51D3            637                     CALL    ESCINST          

                     638             

22F9 D0E0            639                     POP     ACC

                     640             

22FB 22              641                     RET

                     642             

                     643     

                     644     

                     645     

                     646     

                     647     

                     648     

                     649     

                     650     

22FC                 651     CLR1L:    

22FC C0E0            652             PUSH   ACC

                     653             

22FE 7800            654                     MOV    R0,#00               

2300 7900            655             MOV    R1,#00

                     656             

2302 51EA            657                     CALL   GOTOXY

                     658             

2304 7910            659                     MOV    R1,#16               

                     660     

2306 7420            661     CLR1L1: MOV    A,#' '               

                     662             

2308 712E            663                     CALL   ESCDADO

                     664             

230A D9FA            665                     DJNZ   R1,CLR1L1

230C 7800            666             MOV    R0,#00               

230E 7900            667             MOV    R1,#00

                     668             

2310 51EA            669                     CALL   GOTOXY

                     670             

2312 D0E0            671                     POP    ACC

                     672             

2314 22              673                     RET

                     674                     

                     675     

                     676     

                     677     

                     678     

                     679     

                     680     

                     681     

                     682     

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 16:51:02 PAGE    12

2315                 683     CLR2L:    

2315 C0E0            684             PUSH   ACC

                     685             

2317 7801            686                     MOV    R0,#01               

2319 7900            687             MOV    R1,#00

                     688             

231B 51EA            689                     CALL   GOTOXY

                     690             

231D 7910            691                     MOV    R1,#16               

                     692     

231F 7420            693     CLR2L1: MOV    A,#' '               

                     694             

2321 712E            695                     CALL   ESCDADO

                     696             

2323 D9FA            697                     DJNZ   R1,CLR2L1

2325 7801            698             MOV    R0,#01               

2327 7900            699             MOV    R1,#00

                     700             

2329 51EA            701                     CALL   GOTOXY

                     702             

232B D0E0            703                     POP    ACC

                     704             

232D 22              705                     RET

                     706                

                     707     

                     708     

                     709     

                     710     

                     711     

                     712     

                     713     

232E                 714     ESCDADO:  

232E C2A6            715                     CLR             RW                               

2330 D2A5            716             SETB    RS               

2332 D2A7            717             SETB    E_LCD            

                     718                     

2334 F580            719             MOV     P0,A             

                     720             

2336 C2A7            721                     CLR     E_LCD            

                     722                     

2338 7580FF          723                     MOV             P0,#0xFF                 

                     724                     

233B D2A6            725                     SETB    RW                               

233D C2A5            726                     CLR             RS                               

233F D2A7            727                     SETB    E_LCD            

                     728     

2341 2087FD          729     ESCD1:  JB              BUSYF,ESCD1              

                     730     

2344 C2A7            731                     CLR     E_LCD            

                     732     

2346 22              733             RET

                     734                     

                     735     

                     736     

                     737     

                     738     

                     739     

                     740     

                     741     

                     742     

                     743     

2347                 744     MSTRING:  

2347 E4              745                       CLR    A

2348 93              746               MOVC   A,@A+DPTR       

                     747               

2349 6006            748                       JZ     MSTR1

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 16:51:02 PAGE    13

                     749               

234B 12232E          750                       LCALL  ESCDADO         

                     751               

234E A3              752                       INC    DPTR

                     753               

234F 80F6            754                       SJMP   MSTRING

                     755                       

2351 22              756     MSTR1:    RET

                     757                

                     758     

                     759     

                     760     

                     761     

                     762     

                     763     

                     764     

                     765     

                     766     

2352                 767     MSTRINGX: 

2352 E0              768                       MOVX   A,@DPTR         

                     769               

2353 6006            770                       JZ     MSTR21

                     771               

2355 12232E          772                       LCALL  ESCDADO         

                     773               

2358 A3              774                       INC    DPTR

                     775               

2359 80F7            776                       SJMP   MSTRINGX

                     777     

235B 22              778     MSTR21:   RET

                     779     

                     780     

                     781     

                     782     

                     783     

                     784     

                     785     

                     786     

                     787     

                     788     

235C                 789     ESC_STR1: 

                     790                       

235C 7800            791                       MOV    R0,#00         

235E 7900            792               MOV    R1,#00

                     793               

2360 8004            794                       JMP    ESC_S

                     795               

                     796     

                     797     

                     798     

                     799     

                     800     

                     801     

                     802     

                     803     

                     804     

2362                 805     ESC_STR2: 

                     806                       

2362 7801            807                       MOV    R0,#01         

2364 7900            808               MOV    R1,#00

                     809                       

2366 1222EA          810     ESC_S:    LCALL  GOTOXY          

                     811               

2369 122347          812                       LCALL  MSTRING

                     813               

236C 22              814                       RET

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 16:51:02 PAGE    14

                     815     

                     816     

                     817     

                     818     

                     819     

                     820     

                     821     

                     822     ; DESTROI: R0,R2                                                                        //

                     823     

236D                 824     CUR_ON:   

236D 780F            825                       MOV    R0,#0FH               

236F 8002            826               SJMP   CUR1

                     827                       

2371                 828     CUR_OFF:  

2371 780C            829                       MOV    R0,#0CH               

                     830                       

2373 7A01            831     CUR1:     MOV    R2,#01

                     832               

2375 51D3            833                       CALL   ESCINST               

                     834               

2377 22              835                       RET

                     836                       

                     837     

                     838     

                     839     

                     840                       

2378                 841     TIMER_CONFIGURA_TIMER:

2378 758901          842                     MOV TMOD, #01h  

                     843             

237B 22              844                     RET

                     845             

                     846     

                     847     

                     848     

                     849     

                     850     

                     851     

                     852     

237C                 853     TIMER_DELAY_20_MS:

237C 758C56          854                     MOV TH0, #HIGH(65535 - 43350)

237F 758AA9          855                     MOV TL0, #LOW(65535 - 43350)

                     856             

2382 C28D            857                     CLR TF0

2384 D28C            858                     SETB TR0

                     859             

2386 308DFD          860                     JNB TF0, $

                     861                     

2389 C28D            862                     CLR TF0

238B C28C            863                     CLR TR0

                     864             

238D D8ED            865                     DJNZ R0, TIMER_DELAY_20_MS

                     866             

238F 22              867                     RET

                     868             

                     869     

                     870     

                     871     

                     872     

                     873     

                     874     

                     875     

2390                 876     TIMER_DELAY_1_S:

2390 7832            877                     MOV             R0, #50d

2392 717C            878                     CALL    TIMER_DELAY_20_MS

                     879                     

2394 D9FA            880                     DJNZ    R1, TIMER_DELAY_1_S

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 16:51:02 PAGE    15

                     881             

2396 22              882                     RET

                     883     

                     884     

                     885     

                     886     

                     887     

                     888     

                     889     

                     890     

2397                 891     INT_INT0:

2397 32              892                     RETI

                     893     

                     894     

                     895     

                     896     

2398                 897     INT_TIMER0:

2398 32              898                     RETI

                     899             

                     900     

                     901     

                     902     

2399                 903     INT_INT1:

2399 32              904                     RETI

                     905     

                     906     

                     907     

                     908     

239A                 909     INT_TIMER1:

239A 32              910                     RETI

                     911             

                     912     

                     913     

                     914     

239B                 915     INT_SERIAL:

239B 32              916                     RETI

                     917             

239C                 918     FIM:

                     919                     END

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 16:51:02 PAGE    16

SYMBOL TABLE LISTING
------ ----- -------


N A M E                            T Y P E  V A L U E   ATTRIBUTES

ABRE_FECHADURA. . . . . . . . . .  C ADDR   224EH   A   
ACC . . . . . . . . . . . . . . .  D ADDR   00E0H   A   
ACIONA_BUZZER . . . . . . . . . .  C ADDR   2247H   A   
BUSYF . . . . . . . . . . . . . .  B ADDR   0080H.7 A   
BUZZER. . . . . . . . . . . . . .  B ADDR   00B0H.0 A   
CLEAR . . . . . . . . . . . . . .  C ADDR   215CH   A   
CLR1L . . . . . . . . . . . . . .  C ADDR   22FCH   A   
CLR1L1. . . . . . . . . . . . . .  C ADDR   2306H   A   
CLR2L . . . . . . . . . . . . . .  C ADDR   2315H   A   
CLR2L1. . . . . . . . . . . . . .  C ADDR   231FH   A   
COL1. . . . . . . . . . . . . . .  B ADDR   0090H.0 A   
COL2. . . . . . . . . . . . . . .  B ADDR   0090H.1 A   
COL3. . . . . . . . . . . . . . .  B ADDR   0090H.2 A   
COL4. . . . . . . . . . . . . . .  B ADDR   0090H.3 A   
CONV_ASCII_TO_NUMBER. . . . . . .  C ADDR   213DH   A   
CUR1. . . . . . . . . . . . . . .  C ADDR   2373H   A   
CUR_OFF . . . . . . . . . . . . .  C ADDR   2371H   A   
CUR_ON. . . . . . . . . . . . . .  C ADDR   236DH   A   
DIGITO0 . . . . . . . . . . . . .  C ADDR   21C3H   A   
DIGITO1 . . . . . . . . . . . . .  C ADDR   219FH   A   
DIGITO2 . . . . . . . . . . . . .  C ADDR   21A3H   A   
DIGITO3 . . . . . . . . . . . . .  C ADDR   21A7H   A   
DIGITO4 . . . . . . . . . . . . .  C ADDR   21ABH   A   
DIGITO5 . . . . . . . . . . . . .  C ADDR   21AFH   A   
DIGITO6 . . . . . . . . . . . . .  C ADDR   21B3H   A   
DIGITO7 . . . . . . . . . . . . .  C ADDR   21B7H   A   
DIGITO8 . . . . . . . . . . . . .  C ADDR   21BBH   A   
DIGITO9 . . . . . . . . . . . . .  C ADDR   21BFH   A   
ESCD1 . . . . . . . . . . . . . .  C ADDR   2341H   A   
ESCDADO . . . . . . . . . . . . .  C ADDR   232EH   A   
ESCI1 . . . . . . . . . . . . . .  C ADDR   22E4H   A   
ESCINST . . . . . . . . . . . . .  C ADDR   22D3H   A   
ESCREVE_ASTERISCO . . . . . . . .  C ADDR   2142H   A   
ESC_S . . . . . . . . . . . . . .  C ADDR   2366H   A   
ESC_STR1. . . . . . . . . . . . .  C ADDR   235CH   A   
ESC_STR2. . . . . . . . . . . . .  C ADDR   2362H   A   
ESTADO_DOIS . . . . . . . . . . .  B ADDR   00B0H.2 A   
ESTADO_QUATRO . . . . . . . . . .  B ADDR   00B0H.4 A   
ESTADO_TRES . . . . . . . . . . .  B ADDR   00B0H.3 A   
ESTADO_UM . . . . . . . . . . . .  B ADDR   00B0H.1 A   
E_LCD . . . . . . . . . . . . . .  B ADDR   00A0H.7 A   
FIM . . . . . . . . . . . . . . .  C ADDR   239CH   A   
GOTOXY. . . . . . . . . . . . . .  C ADDR   22EAH   A   
GRAVA_DIGITO. . . . . . . . . . .  C ADDR   21C7H   A   
GRAVA_TECLADO_2 . . . . . . . . .  C ADDR   2239H   A   
GRAVA_TECLADO_3 . . . . . . . . .  C ADDR   223EH   A   
GRAVA_TECLADO_4 . . . . . . . . .  C ADDR   2243H   A   
GRAVA_TECLADO_X . . . . . . . . .  C ADDR   2245H   A   
GT1 . . . . . . . . . . . . . . .  C ADDR   22F3H   A   
INIDISP . . . . . . . . . . . . .  C ADDR   22B4H   A   
INT_INT0. . . . . . . . . . . . .  C ADDR   2397H   A   
INT_INT1. . . . . . . . . . . . .  C ADDR   2399H   A   
INT_SERIAL. . . . . . . . . . . .  C ADDR   239BH   A   
INT_TIMER0. . . . . . . . . . . .  C ADDR   2398H   A   
INT_TIMER1. . . . . . . . . . . .  C ADDR   239AH   A   
LED1. . . . . . . . . . . . . . .  B ADDR   00B0H.7 A   
LED_SEG . . . . . . . . . . . . .  B ADDR   00B0H.6 A   
LE_4_DIGITOS. . . . . . . . . . .  C ADDR   211CH   A   
LE_SENHA. . . . . . . . . . . . .  C ADDR   2130H   A   
LE_SENHA_ROM. . . . . . . . . . .  C ADDR   2136H   A   
A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 16:51:02 PAGE    17

LIMPA_LCD_E_INICIA_SISTEMA. . . .  C ADDR   2107H   A   
LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA  C ADDR   21FDH   A   
LIMPA_LCD_E_MOSTRA_SENHA_VALIDA .  C ADDR   2211H   A   
LIN1. . . . . . . . . . . . . . .  B ADDR   0090H.4 A   
LIN2. . . . . . . . . . . . . . .  B ADDR   0090H.5 A   
LIN3. . . . . . . . . . . . . . .  B ADDR   0090H.6 A   
LIN4. . . . . . . . . . . . . . .  B ADDR   0090H.7 A   
MAIN. . . . . . . . . . . . . . .  C ADDR   20ECH   A   
MSTR1 . . . . . . . . . . . . . .  C ADDR   2351H   A   
MSTR21. . . . . . . . . . . . . .  C ADDR   235BH   A   
MSTRING . . . . . . . . . . . . .  C ADDR   2347H   A   
MSTRINGX. . . . . . . . . . . . .  C ADDR   2352H   A   
P0. . . . . . . . . . . . . . . .  D ADDR   0080H   A   
P1. . . . . . . . . . . . . . . .  D ADDR   0090H   A   
P2. . . . . . . . . . . . . . . .  D ADDR   00A0H   A   
P3. . . . . . . . . . . . . . . .  D ADDR   00B0H   A   
PRESS_ENT . . . . . . . . . . . .  C ADDR   214CH   A   
RS. . . . . . . . . . . . . . . .  B ADDR   00A0H.5 A   
RW. . . . . . . . . . . . . . . .  B ADDR   00A0H.6 A   
SENHA1_1. . . . . . . . . . . . .  N NUMB   0035H   A   
SENHA1_2. . . . . . . . . . . . .  N NUMB   0036H   A   
SENHA1_3. . . . . . . . . . . . .  N NUMB   0037H   A   
SENHA1_4. . . . . . . . . . . . .  N NUMB   0038H   A   
SENHA2_1. . . . . . . . . . . . .  N NUMB   0045H   A   
SENHA2_2. . . . . . . . . . . . .  N NUMB   0046H   A   
SENHA2_3. . . . . . . . . . . . .  N NUMB   0047H   A   
SENHA2_4. . . . . . . . . . . . .  N NUMB   0048H   A   
SENHA_PADRAO_1. . . . . . . . . .  C ADDR   2030H   A   
SENHA_PADRAO_2. . . . . . . . . .  C ADDR   2035H   A   
STR_ENTER . . . . . . . . . . . .  C ADDR   206DH   A   
STR_LEONARDO_PEREIRA. . . . . . .  C ADDR   204BH   A   
STR_LIBERANDO_PORTA . . . . . . .  C ADDR   20A8H   A   
STR_LOGO. . . . . . . . . . . . .  C ADDR   203AH   A   
STR_RODRIGO_ENDO. . . . . . . . .  C ADDR   205CH   A   
STR_SENHA . . . . . . . . . . . .  C ADDR   207EH   A   
STR_SENHA_INVALIDA. . . . . . . .  C ADDR   2097H   A   
STR_SENHA_VALIDA. . . . . . . . .  C ADDR   2086H   A   
STR_TRANCANDO_PORTA . . . . . . .  C ADDR   20B9H   A   
TECLADO_1 . . . . . . . . . . . .  N NUMB   0031H   A   
TECLADO_2 . . . . . . . . . . . .  N NUMB   0032H   A   
TECLADO_3 . . . . . . . . . . . .  N NUMB   0033H   A   
TECLADO_4 . . . . . . . . . . . .  N NUMB   0034H   A   
TENTATIVAS. . . . . . . . . . . .  N NUMB   0050H   A   
TESTA_SENHA1. . . . . . . . . . .  C ADDR   21CCH   A   
TESTA_SENHA2. . . . . . . . . . .  C ADDR   21E7H   A   
TF0 . . . . . . . . . . . . . . .  B ADDR   0088H.5 A   
TH0 . . . . . . . . . . . . . . .  D ADDR   008CH   A   
TIMER_CONFIGURA_TIMER . . . . . .  C ADDR   2378H   A   
TIMER_DELAY_1_S . . . . . . . . .  C ADDR   2390H   A   
TIMER_DELAY_20_MS . . . . . . . .  C ADDR   237CH   A   
TL0 . . . . . . . . . . . . . . .  D ADDR   008AH   A   
TMOD. . . . . . . . . . . . . . .  D ADDR   0089H   A   
TR0 . . . . . . . . . . . . . . .  B ADDR   0088H.4 A   
TRANCA_FECHADURA. . . . . . . . .  C ADDR   2281H   A   
VARREDURA_TECLADO . . . . . . . .  C ADDR   2167H   A   
__STARTUP__ . . . . . . . . . . .  C ADDR   20CAH   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
