A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/25/2017 11:12:50 PAGE     1


MACRO ASSEMBLER A51 V8.2.5.0
OBJECT MODULE PLACED IN .\Objects\Projeto_01_Fechadura.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE Projeto_01_Fechadura.a51 SET(SMALL) DEBUG PRINT(.\Listings\Projeto_01_F
                      echadura.lst) OBJECT(.\Objects\Projeto_01_Fechadura.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     

                       2     

                       3     

                       4     

                       5     

                       6     

                       7     

                       8     

                       9     

                      10     

                      11     

                      12     

                      13     

                      14     

                      15     

                      16     

2000                  17     org 2000h  

2000 0220CA           18     ljmp __STARTUP__

                      19     

2003                  20     org 2003h  

2003 0222EE           21     ljmp INT_INT0

                      22     

200B                  23     org 200Bh  

200B 0222EF           24     ljmp INT_TIMER0

                      25     

2013                  26     org 2013h  

2013 0222F0           27     ljmp INT_INT1

                      28     

201B                  29     org 201Bh  

201B 0222F1           30     ljmp INT_TIMER1

                      31     

2023                  32     org 2023h  

2023 0222F2           33     ljmp INT_SERIAL

                      34     

                      35     

                      36     

                      37     

                      38     

                      39     

  00A5                40     RS                      EQU     P2.5                     

  00A7                41     E_LCD           EQU     P2.7                     

  00A6                42     RW                      EQU     P2.6                     

  0087                43     BUSYF           EQU     P0.7                     

                      44     

                      45     

  00B7                46     LED1            EQU     P3.7

  00B6                47     LED_SEG         EQU     P3.6

                      48             

                      49     

  00B0                50     COL1            EQU P3.0

  00B1                51     COL2            EQU P3.1

  00B2                52     COL3            EQU P3.2

  00B3                53     COL4            EQU P3.3

                      54     

  00B4                55     LIN1            EQU P3.4

  00B5                56     LIN2            EQU P3.5

  00B6                57     LIN3            EQU P3.6

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/25/2017 11:12:50 PAGE     2

  00B7                58     LIN4            EQU P3.7

                      59             

                      60     

  0031                61     TECLADO_1       EQU 31h

  0032                62     TECLADO_2       EQU 32h

  0033                63     TECLADO_3       EQU 33h

  0034                64     TECLADO_4       EQU 34h

                      65             

                      66     

  0037                67     COUNTER         EQU 37h

                      68     

                      69     

  0041                70     SENHA1_1        EQU 41h

  0042                71     SENHA1_2        EQU 42h

  0043                72     SENHA1_3        EQU 43h

  0044                73     SENHA1_4        EQU 44h

                      74     

  0045                75     SENHA2_1        EQU 45h

  0046                76     SENHA2_2        EQU 46h

  0047                77     SENHA2_3        EQU 47h

  0048                78     SENHA2_4        EQU 48h

                      79     

  0049                80     TENTATIVAS  EQU 49h

                      81                     

                      82     

                      83     

                      84     

                      85     

2030                  86     org 2030h

2030                  87     SENHA_PADRAO_1:

2030 32383132         88                     db      '2812', 00H

2034 00                      
2035                  89     SENHA_PADRAO_2:

2035 30393132         90                     db      '0912', 00H

2039 00                      
203A                  91     STR_LOGO:

203A 2050524F         92             DB      ' PROFS. LINDOS! ',00H

203E 46532E20                
2042 4C494E44                
2046 4F532120                
204A 00                      
204B                  93     STR_LEONARDO_PEREIRA:

204B 4C656F6E         94             DB      'Leonardo Pereira',00H

204F 6172646F                
2053 20506572                
2057 65697261                
205B 00                      
205C                  95     STR_RODRIGO_ENDO:

205C 2020526F         96             DB      '  Rodrigo Endo  ',00H

2060 64726967                
2064 6F20456E                
2068 646F2020                
206C 00                      
206D                  97     STR_ENTER:

206D 50524553         98             DB      'PRESSIONE  ENTER',00H

2071 53494F4E                
2075 45202045                
2079 4E544552                
207D 00                      
207E                  99     STR_SENHA:

207E 53454E48        100             DB      'SENHA: ',00H

2082 413A2000                
2086                 101     STR_SENHA_VALIDA:

2086 20205345        102             DB      '  SENHA VALIDA  ',00H

208A 4E484120                
208E 56414C49                
A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/25/2017 11:12:50 PAGE     3

2092 44412020                
2096 00                      
2097                 103     STR_SENHA_INVALIDA:

2097 2053454E        104             DB      ' SENHA INVALIDA ',00H

209B 48412049                
209F 4E56414C                
20A3 49444120                
20A7 00                      
20A8                 105     STR_LIBERA:

20A8 20504F52        106             DB      ' PORTA LIBERADA ',00H

20AC 5441204C                
20B0 49424552                
20B4 41444120                
20B8 00                      
20B9                 107     STR_TRANCA:

20B9 20504F52        108             DB      ' PORTA TRANCADA ',00H          

20BD 54412054                
20C1 52414E43                
20C5 41444120                
20C9 00                      
                     109                     

                     110     

                     111     

                     112     

                     113     

20CA                 114     __STARTUP__:

20CA 51CF            115                     CALL    TIMER_CONFIGURA_TIMER

                     116     

20CC 902030          117                     MOV     DPTR, #2030h     

20CF 7800            118                     MOV     R0, #00h             

20D1 7941            119                     MOV     R1, #SENHA1_1    

20D3 7A04            120                     MOV     R2, #04h                 

20D5 3129            121                     CALL    LE_SENHA

                     122             

20D7 902035          123                     MOV     DPTR, #2035h     

20DA 7800            124                     MOV     R0, #00h                 

20DC 7945            125                     MOV     R1, #SENHA2_1    

20DE 7A04            126                     MOV     R2, #04h                 

20E0 3129            127                     CALL    LE_SENHA

                     128             

20E2 754903          129                     MOV     TENTATIVAS, #3h

                     130             

20E5                 131     MAIN:

20E5 510B            132                     CALL    INIDISP  

20E7 90203A          133                     MOV     DPTR,#STR_LOGO   

20EA 51B3            134                     CALL    ESC_STR1                 

                     135                     

                     136                     

20EC 7901            137                     MOV             R1, #01h

20EE 51E7            138                     CALL    TIMER_DELAY_1_S

                     139                     

20F0 5153            140                     CALL    CLR1L    

                     141                     

20F2 90204B          142                     MOV     DPTR, #STR_LEONARDO_PEREIRA      

20F5 51B3            143                     CALL    ESC_STR1                                         

                     144                     

20F7 90205C          145                     MOV     DPTR, #STR_RODRIGO_ENDO          

20FA 51B9            146                     CALL    ESC_STR2                                         

                     147                     

                     148                     

20FC 7901            149                     MOV             R1, #01h

20FE 51E7            150                     CALL    TIMER_DELAY_1_S

                     151     

2100                 152     LIMPA_LCD_E_INICIA_SISTEMA:

                     153                     

2100 5153            154                     CALL    CLR1L

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/25/2017 11:12:50 PAGE     4

2102 516C            155                     CALL    CLR2L

                     156                     

2104 90207E          157                     MOV     DPTR,#STR_SENHA  

2107 51B3            158                     CALL    ESC_STR1                 

                     159                     

2109 7800            160                     MOV     R0, #00h         

210B 7907            161                     MOV     R1, #07h         

210D 5141            162                     CALL    GOTOXY

                     163                     

210F 7931            164                     MOV     R1, #TECLADO_1   

2111 7B01            165                     MOV     R3, #1h                  

2113 7F04            166                     MOV     R7, #04h                 

2115                 167     LE_4_DIGITOS:

2115 7805            168                     MOV     R0, #05h

2117 51D3            169                     ACALL   TIMER_DELAY_20_MS

2119 3156            170                     ACALL   VARREDURA_TECLADO

211B 313B            171                     CALL    ESCREVE_ASTERISCO

                     172                     

211D 09              173                     INC R1

211E 0B              174                     INC R3

                     175                     

211F DFF4            176                     DJNZ R7, LE_4_DIGITOS

                     177                     

                     178                     

2121 7805            179                     MOV     R0, #05h

2123 51D3            180                     ACALL   TIMER_DELAY_20_MS

                     181                     

2125 3140            182                     ACALL   PRESS_ENT

                     183                     

2127 80D7            184                     JMP             LIMPA_LCD_E_INICIA_SISTEMA

                     185     

                     186     

                     187     

                     188     

                     189     

                     190     

                     191     

                     192     

                     193     

                     194     

                     195     

2129                 196     LE_SENHA:

2129 312F            197             call LE_SENHA_ROM

                     198             

212B 09              199             INC R1

                     200             

212C DAFB            201             djnz R2, LE_SENHA

                     202             

212E 22              203             RET

                     204     

212F                 205     LE_SENHA_ROM:

212F E8              206             mov A, R0

2130 93              207             movc A, @A + DPTR

2131 F7              208             mov @R1, A

                     209             

2132 08              210             inc R0

                     211             

2133 3136            212             call CONV_ASCII_TO_NUMBER

                     213             

2135 22              214             RET

                     215             

                     216     

                     217     

                     218     

                     219     

                     220     

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/25/2017 11:12:50 PAGE     5

                     221     

                     222     

                     223     

2136                 224     CONV_ASCII_TO_NUMBER:

2136 E7              225                     MOV     A, @R1

                     226             

2137 24D0            227                     ADD     A, #-30h

                     228             

2139 F7              229                     MOV     @R1, A

                     230             

213A 22              231                     RET

                     232             

                     233     

                     234     

                     235     

                     236     

                     237     

                     238     

                     239     

213B                 240     ESCREVE_ASTERISCO:              

213B 742A            241                     MOV     A, #2Ah

213D 5185            242                     CALL    ESCDADO

                     243             

213F 22              244                     RET

                     245                     

                     246     

                     247     

                     248     

                     249     

                     250     

                     251     

                     252     

                     253     

2140                 254     PRESS_ENT:

2140 D2B4            255                     SETB    LIN1

2142 D2B5            256                     SETB    LIN2

2144 D2B6            257                     SETB    LIN3

2146 C2B7            258                     CLR     LIN4

2148 30B345          259                     JNB     COL4, TESTA_SENHA1       

214B 30B102          260                     JNB     COL2, CLEAR                      

214E 80F0            261                     JMP     PRESS_ENT

                     262     

                     263     

                     264     

                     265     

                     266     

                     267     

                     268     

                     269     

                     270     

                     271     

2150                 272     CLEAR: 

2150 D0E0            273                     POP             ACC

2152 D0E0            274                     POP             ACC

2154 80AA            275                     JMP     LIMPA_LCD_E_INICIA_SISTEMA

                     276                     

                     277     

                     278     

                     279     

                     280     

                     281     

                     282     

                     283     

2156                 284     VARREDURA_TECLADO:

2156 C2B4            285                     CLR  LIN1

2158 D2B5            286                     SETB LIN2

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/25/2017 11:12:50 PAGE     6

215A D2B6            287                     SETB LIN3

215C D2B7            288                     SETB LIN4

215E 30B0DA          289                     JNB      COL1, ESCREVE_ASTERISCO

2161 806D            290                     JMP  DIGITO1 

2163 30B26E          291                     JNB  COL3, DIGITO2

2166 30B36F          292                     JNB  COL4, DIGITO3

                     293                     

2169 C2B5            294                     CLR  LIN2

216B D2B4            295                     SETB LIN1

216D 30B16C          296                     JNB  COL2, DIGITO4

2170 30B26D          297                     JNB  COL3, DIGITO5

2173 30B36E          298                     JNB  COL4, DIGITO6

                     299                     

2176 C2B6            300                     CLR  LIN3

2178 D2B5            301                     SETB LIN2

217A 30B16B          302                     JNB  COL2, DIGITO7

217D 30B26C          303                     JNB  COL3, DIGITO8

2180 30B36D          304                     JNB  COL4, DIGITO9

                     305                     

2183 C2B7            306                     CLR  LIN4

2185 D2B6            307                     SETB LIN3

2187 30B1B1          308                     JNB  COL2, ESCREVE_ASTERISCO

218A 30B267          309                     JNB  COL3, DIGITO0

218D 80C7            310                     JMP  VARREDURA_TECLADO

                     311                     

218F 22              312                     RET

                     313     

                     314     

                     315     

                     316     

                     317     

                     318     

                     319     

                     320     

                     321     

2190                 322     TESTA_SENHA1:

2190 E541            323                     MOV             A, SENHA1_1

2192 B53111          324                     CJNE    A, TECLADO_1, TESTA_SENHA2

2195 E542            325                     MOV             A, SENHA1_2

2197 B5320C          326                     CJNE    A, TECLADO_2, TESTA_SENHA2

219A E543            327                     MOV             A, SENHA1_3

219C B53307          328                     CJNE    A, TECLADO_3, TESTA_SENHA2

219F E544            329                     MOV             A, SENHA1_4

21A1 B53402          330                     CJNE    A, TECLADO_4, TESTA_SENHA2

21A4 8021            331                     JMP     LIMPA_LCD_E_MOSTRA_SENHA_VALIDA

                     332             

21A6                 333     TESTA_SENHA2:

21A6 E545            334                     MOV             A, SENHA2_1

21A8 B53111          335                     CJNE    A, TECLADO_1, LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA

21AB E546            336                     MOV             A, SENHA2_2

21AD B5320C          337                     CJNE    A, TECLADO_2, LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA

21B0 E547            338                     MOV             A, SENHA2_3

21B2 B53307          339                     CJNE    A, TECLADO_3, LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA

21B5 E548            340                     MOV             A, SENHA2_4

21B7 B53402          341                     CJNE    A, TECLADO_4, LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA

21BA 800B            342                     JMP     LIMPA_LCD_E_MOSTRA_SENHA_VALIDA

                     343                     

21BC                 344     LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA:

                     345                     

21BC 5153            346                     CALL    CLR1L

21BE 516C            347                     CALL    CLR2L

                     348                     

21C0 902097          349                     MOV     DPTR,#STR_SENHA_INVALIDA         

21C3 51B3            350                     CALL    ESC_STR1                                         

                     351                     

21C5 2100            352                     JMP     LIMPA_LCD_E_INICIA_SISTEMA

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/25/2017 11:12:50 PAGE     7

                     353                     

21C7                 354     LIMPA_LCD_E_MOSTRA_SENHA_VALIDA:

                     355                     

21C7 5153            356                     CALL    CLR1L

21C9 516C            357                     CALL    CLR2L

                     358                     

21CB 902086          359                     MOV     DPTR,#STR_SENHA_VALIDA   

21CE 51B3            360                     CALL    ESC_STR1                                 

                     361                     

                     362     

                     363     

                     364     

                     365     

                     366     

                     367     

                     368     

                     369     

21D0 7401            370     DIGITO1: MOV A, #1h

21D2 21F8            371                      AJMP GRAVA_DIGITO

21D4 7402            372     DIGITO2: MOV A, #2h

21D6 21F8            373                      AJMP GRAVA_DIGITO

21D8 7403            374     DIGITO3: MOV A, #3h

21DA 21F8            375                      AJMP GRAVA_DIGITO

21DC 7404            376     DIGITO4: MOV A, #4h

21DE 21F8            377                      AJMP GRAVA_DIGITO

21E0 7405            378     DIGITO5: MOV A, #5h

21E2 21F8            379                      AJMP GRAVA_DIGITO

21E4 7406            380     DIGITO6: MOV A, #6h

21E6 21F8            381                      AJMP GRAVA_DIGITO

21E8 7407            382     DIGITO7: MOV A, #7h

21EA 21F8            383                      AJMP GRAVA_DIGITO

21EC 7408            384     DIGITO8: MOV A, #8h

21EE 21F8            385                      AJMP GRAVA_DIGITO

21F0 7409            386     DIGITO9: MOV A, #9h

21F2 21F8            387                      AJMP GRAVA_DIGITO

21F4 7400            388     DIGITO0: MOV A, #0h

21F6 21F8            389                      AJMP GRAVA_DIGITO

                     390                      

21F8                 391     GRAVA_DIGITO:

21F8 BB0102          392                     CJNE R3, #1h, GRAVA_TECLADO_2

21FB F7              393                     MOV @R1, A

                     394             

21FC 22              395                     RET

                     396                      

                     397     

                     398     

                     399     

                     400     

                     401     

                     402     

                     403     

21FD BB0202          404     GRAVA_TECLADO_2: CJNE R3, #2h, GRAVA_TECLADO_3

2200 4109            405                                      AJMP GRAVA_TECLADO_X

2202 BB0302          406     GRAVA_TECLADO_3: CJNE R3, #3h, GRAVA_TECLADO_4

2205 4109            407                                      AJMP GRAVA_TECLADO_X           

2207 4109            408     GRAVA_TECLADO_4: AJMP GRAVA_TECLADO_X

                     409     

2209                 410     GRAVA_TECLADO_X:

2209 F7              411                      MOV @R1, A

                     412                      

220A 22              413                      RET

                     414     

                     415     

                     416     

                     417             

                     418     

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/25/2017 11:12:50 PAGE     8

                     419     

                     420     

                     421     

                     422     

                     423     

                     424     

                     425     

                     426     

220B                 427     INIDISP:                       

220B 7838            428             MOV     R0,#38H          

220D 7A05            429             MOV     R2,#05           

220F 512A            430             CALL    ESCINST          

                     431             

2211 7838            432                     MOV     R0,#38H          

2213 7A01            433             MOV     R2,#01           

2215 512A            434             CALL    ESCINST          

                     435             

2217 7806            436                     MOV     R0,#06H          

2219 7A01            437             MOV     R2,#01           

221B 512A            438             CALL    ESCINST          

                     439             

221D 780C            440                     MOV     R0,#0CH          

221F 7A01            441             MOV     R2,#01           

2221 512A            442             CALL    ESCINST          

                     443             

2223 7801            444                     MOV     R0,#01H          

2225 7A02            445             MOV     R2,#02           

2227 512A            446             CALL    ESCINST          

                     447             

2229 22              448                     RET

                     449                     

                     450     

                     451     

                     452     

                     453     

                     454     

                     455     

                     456     

                     457     

                     458     

222A                 459     ESCINST:  

222A C2A6            460                     CLR             RW                               

222C C2A5            461                     CLR     RS               

222E D2A7            462                     SETB    E_LCD            

                     463                     

2230 8880            464                     MOV     P0,R0            

                     465                     

2232 C2A7            466                     CLR     E_LCD            

                     467                     

2234 7580FF          468                     MOV             P0,#0xFF                 

                     469                     

2237 D2A6            470                     SETB    RW                               

2239 D2A7            471                     SETB    E_LCD            

                     472     

223B 2087FD          473     ESCI1:  JB      BUSYF,ESCI1                      

                     474                     

223E C2A7            475                     CLR     E_LCD            

                     476             

2240 22              477                     RET

                     478                     

                     479     

                     480     

                     481     

                     482     

                     483     

                     484     

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/25/2017 11:12:50 PAGE     9

                     485     

                     486     

2241                 487     GOTOXY: 

2241 C0E0            488                     PUSH    ACC

                     489             

2243 7480            490                     MOV     A,#80H

2245 B80102          491             CJNE    R0,#01,GT1       

                     492             

2248 74C0            493                     MOV     A,#0C0H

                     494                     

224A 49              495     GT1:    ORL     A,R1             

224B F8              496             MOV     R0,A

224C 7A01            497             MOV     R2,#01           

                     498             

224E 512A            499                     CALL    ESCINST          

                     500             

2250 D0E0            501                     POP     ACC

                     502             

2252 22              503                     RET

                     504             

                     505     

                     506     

                     507     

                     508     

                     509     

                     510     

                     511     

                     512     

2253                 513     CLR1L:    

2253 C0E0            514             PUSH   ACC

                     515             

2255 7800            516                     MOV    R0,#00               

2257 7900            517             MOV    R1,#00

                     518             

2259 5141            519                     CALL   GOTOXY

                     520             

225B 7910            521                     MOV    R1,#16               

                     522     

225D 7420            523     CLR1L1: MOV    A,#' '               

                     524             

225F 5185            525                     CALL   ESCDADO

                     526             

2261 D9FA            527                     DJNZ   R1,CLR1L1

2263 7800            528             MOV    R0,#00               

2265 7900            529             MOV    R1,#00

                     530             

2267 5141            531                     CALL   GOTOXY

                     532             

2269 D0E0            533                     POP    ACC

                     534             

226B 22              535                     RET

                     536                     

                     537     

                     538     

                     539     

                     540     

                     541     

                     542     

                     543     

                     544     

226C                 545     CLR2L:    

226C C0E0            546             PUSH   ACC

                     547             

226E 7801            548                     MOV    R0,#01               

2270 7900            549             MOV    R1,#00

                     550             

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/25/2017 11:12:50 PAGE    10

2272 5141            551                     CALL   GOTOXY

                     552             

2274 7910            553                     MOV    R1,#16               

                     554     

2276 7420            555     CLR2L1: MOV    A,#' '               

                     556             

2278 5185            557                     CALL   ESCDADO

                     558             

227A D9FA            559                     DJNZ   R1,CLR2L1

227C 7801            560             MOV    R0,#01               

227E 7900            561             MOV    R1,#00

                     562             

2280 5141            563                     CALL   GOTOXY

                     564             

2282 D0E0            565                     POP    ACC

                     566             

2284 22              567                     RET

                     568                

                     569     

                     570     

                     571     

                     572     

                     573     

                     574     

                     575     

2285                 576     ESCDADO:  

2285 C2A6            577                     CLR             RW                               

2287 D2A5            578             SETB    RS               

2289 D2A7            579             SETB    E_LCD            

                     580                     

228B F580            581             MOV     P0,A             

                     582             

228D C2A7            583                     CLR     E_LCD            

                     584                     

228F 7580FF          585                     MOV             P0,#0xFF                 

                     586                     

2292 D2A6            587                     SETB    RW                               

2294 C2A5            588                     CLR             RS                               

2296 D2A7            589                     SETB    E_LCD            

                     590     

2298 2087FD          591     ESCD1:  JB              BUSYF,ESCD1              

                     592     

229B C2A7            593                     CLR     E_LCD            

                     594     

229D 22              595             RET

                     596                     

                     597     

                     598     

                     599     

                     600     

                     601     

                     602     

                     603     

                     604     

                     605     

229E                 606     MSTRING:  

229E E4              607                       CLR    A

229F 93              608               MOVC   A,@A+DPTR       

                     609               

22A0 6006            610                       JZ     MSTR1

                     611               

22A2 122285          612                       LCALL  ESCDADO         

                     613               

22A5 A3              614                       INC    DPTR

                     615               

22A6 80F6            616                       SJMP   MSTRING

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/25/2017 11:12:50 PAGE    11

                     617                       

22A8 22              618     MSTR1:    RET

                     619                

                     620     

                     621     

                     622     

                     623     

                     624     

                     625     

                     626     

                     627     

                     628     

22A9                 629     MSTRINGX: 

22A9 E0              630                       MOVX   A,@DPTR         

                     631               

22AA 6006            632                       JZ     MSTR21

                     633               

22AC 122285          634                       LCALL  ESCDADO         

                     635               

22AF A3              636                       INC    DPTR

                     637               

22B0 80F7            638                       SJMP   MSTRINGX

                     639     

22B2 22              640     MSTR21:   RET

                     641     

                     642     

                     643     

                     644     

                     645     

                     646     

                     647     

                     648     

                     649     

                     650     

22B3                 651     ESC_STR1: 

                     652                       

22B3 7800            653                       MOV    R0,#00         

22B5 7900            654               MOV    R1,#00

                     655               

22B7 8004            656                       JMP    ESC_S

                     657               

                     658     

                     659     

                     660     

                     661     

                     662     

                     663     

                     664     

                     665     

                     666     

22B9                 667     ESC_STR2: 

                     668                       

22B9 7801            669                       MOV    R0,#01         

22BB 7900            670               MOV    R1,#00

                     671                       

22BD 122241          672     ESC_S:    LCALL  GOTOXY          

                     673               

22C0 12229E          674                       LCALL  MSTRING

                     675               

22C3 22              676                       RET

                     677     

                     678     

                     679     

                     680     

                     681     

                     682     

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/25/2017 11:12:50 PAGE    12

                     683     

                     684     ; DESTROI: R0,R2                                                                        //

                     685     

22C4                 686     CUR_ON:   

22C4 780F            687                       MOV    R0,#0FH               

22C6 8002            688               SJMP   CUR1

                     689                       

22C8                 690     CUR_OFF:  

22C8 780C            691                       MOV    R0,#0CH               

                     692                       

22CA 7A01            693     CUR1:     MOV    R2,#01

                     694               

22CC 512A            695                       CALL   ESCINST               

                     696               

22CE 22              697                       RET

                     698                       

                     699     

                     700     

                     701     

                     702                       

22CF                 703     TIMER_CONFIGURA_TIMER:

22CF 758901          704                     MOV TMOD, #01h  

                     705             

22D2 22              706                     RET

                     707             

                     708     

                     709     

                     710     

                     711     

                     712     

                     713     

                     714     

22D3                 715     TIMER_DELAY_20_MS:

22D3 758C2F          716                     MOV TH0, #HIGH(65535 - 53350)

22D6 758A99          717                     MOV TL0, #LOW(65535 - 53350)

                     718             

22D9 C28D            719                     CLR TF0

22DB D28C            720                     SETB TR0

                     721             

22DD 308DFD          722                     JNB TF0, $

                     723                     

22E0 C28D            724                     CLR TF0

22E2 C28C            725                     CLR TR0

                     726             

22E4 D8ED            727                     DJNZ R0, TIMER_DELAY_20_MS

                     728             

22E6 22              729                     RET

                     730             

                     731     

                     732     

                     733     

                     734     

                     735     

                     736     

                     737     

22E7                 738     TIMER_DELAY_1_S:

22E7 7832            739                     MOV             R0, #50d

22E9 51D3            740                     CALL    TIMER_DELAY_20_MS

                     741                     

22EB D9FA            742                     DJNZ    R1, TIMER_DELAY_1_S

                     743             

22ED 22              744                     RET

                     745     

                     746     

                     747     

                     748     

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/25/2017 11:12:50 PAGE    13

                     749     

                     750     

                     751     

                     752     

22EE                 753     INT_INT0:

22EE 32              754                     RETI

                     755     

                     756     

                     757     

                     758     

22EF                 759     INT_TIMER0:

22EF 32              760                     RETI

                     761             

                     762     

                     763     

                     764     

22F0                 765     INT_INT1:

22F0 32              766                     RETI

                     767     

                     768     

                     769     

                     770     

22F1                 771     INT_TIMER1:

22F1 32              772                     RETI

                     773             

                     774     

                     775     

                     776     

22F2                 777     INT_SERIAL:

22F2 32              778                     RETI

                     779             

22F3                 780     FIM:

                     781                     END

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/25/2017 11:12:50 PAGE    14

SYMBOL TABLE LISTING
------ ----- -------


N A M E                            T Y P E  V A L U E   ATTRIBUTES

ACC . . . . . . . . . . . . . . .  D ADDR   00E0H   A   
BUSYF . . . . . . . . . . . . . .  B ADDR   0080H.7 A   
CLEAR . . . . . . . . . . . . . .  C ADDR   2150H   A   
CLR1L . . . . . . . . . . . . . .  C ADDR   2253H   A   
CLR1L1. . . . . . . . . . . . . .  C ADDR   225DH   A   
CLR2L . . . . . . . . . . . . . .  C ADDR   226CH   A   
CLR2L1. . . . . . . . . . . . . .  C ADDR   2276H   A   
COL1. . . . . . . . . . . . . . .  B ADDR   00B0H.0 A   
COL2. . . . . . . . . . . . . . .  B ADDR   00B0H.1 A   
COL3. . . . . . . . . . . . . . .  B ADDR   00B0H.2 A   
COL4. . . . . . . . . . . . . . .  B ADDR   00B0H.3 A   
CONV_ASCII_TO_NUMBER. . . . . . .  C ADDR   2136H   A   
COUNTER . . . . . . . . . . . . .  N NUMB   0037H   A   
CUR1. . . . . . . . . . . . . . .  C ADDR   22CAH   A   
CUR_OFF . . . . . . . . . . . . .  C ADDR   22C8H   A   
CUR_ON. . . . . . . . . . . . . .  C ADDR   22C4H   A   
DIGITO0 . . . . . . . . . . . . .  C ADDR   21F4H   A   
DIGITO1 . . . . . . . . . . . . .  C ADDR   21D0H   A   
DIGITO2 . . . . . . . . . . . . .  C ADDR   21D4H   A   
DIGITO3 . . . . . . . . . . . . .  C ADDR   21D8H   A   
DIGITO4 . . . . . . . . . . . . .  C ADDR   21DCH   A   
DIGITO5 . . . . . . . . . . . . .  C ADDR   21E0H   A   
DIGITO6 . . . . . . . . . . . . .  C ADDR   21E4H   A   
DIGITO7 . . . . . . . . . . . . .  C ADDR   21E8H   A   
DIGITO8 . . . . . . . . . . . . .  C ADDR   21ECH   A   
DIGITO9 . . . . . . . . . . . . .  C ADDR   21F0H   A   
ESCD1 . . . . . . . . . . . . . .  C ADDR   2298H   A   
ESCDADO . . . . . . . . . . . . .  C ADDR   2285H   A   
ESCI1 . . . . . . . . . . . . . .  C ADDR   223BH   A   
ESCINST . . . . . . . . . . . . .  C ADDR   222AH   A   
ESCREVE_ASTERISCO . . . . . . . .  C ADDR   213BH   A   
ESC_S . . . . . . . . . . . . . .  C ADDR   22BDH   A   
ESC_STR1. . . . . . . . . . . . .  C ADDR   22B3H   A   
ESC_STR2. . . . . . . . . . . . .  C ADDR   22B9H   A   
E_LCD . . . . . . . . . . . . . .  B ADDR   00A0H.7 A   
FIM . . . . . . . . . . . . . . .  C ADDR   22F3H   A   
GOTOXY. . . . . . . . . . . . . .  C ADDR   2241H   A   
GRAVA_DIGITO. . . . . . . . . . .  C ADDR   21F8H   A   
GRAVA_TECLADO_2 . . . . . . . . .  C ADDR   21FDH   A   
GRAVA_TECLADO_3 . . . . . . . . .  C ADDR   2202H   A   
GRAVA_TECLADO_4 . . . . . . . . .  C ADDR   2207H   A   
GRAVA_TECLADO_X . . . . . . . . .  C ADDR   2209H   A   
GT1 . . . . . . . . . . . . . . .  C ADDR   224AH   A   
INIDISP . . . . . . . . . . . . .  C ADDR   220BH   A   
INT_INT0. . . . . . . . . . . . .  C ADDR   22EEH   A   
INT_INT1. . . . . . . . . . . . .  C ADDR   22F0H   A   
INT_SERIAL. . . . . . . . . . . .  C ADDR   22F2H   A   
INT_TIMER0. . . . . . . . . . . .  C ADDR   22EFH   A   
INT_TIMER1. . . . . . . . . . . .  C ADDR   22F1H   A   
LED1. . . . . . . . . . . . . . .  B ADDR   00B0H.7 A   
LED_SEG . . . . . . . . . . . . .  B ADDR   00B0H.6 A   
LE_4_DIGITOS. . . . . . . . . . .  C ADDR   2115H   A   
LE_SENHA. . . . . . . . . . . . .  C ADDR   2129H   A   
LE_SENHA_ROM. . . . . . . . . . .  C ADDR   212FH   A   
LIMPA_LCD_E_INICIA_SISTEMA. . . .  C ADDR   2100H   A   
LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA  C ADDR   21BCH   A   
LIMPA_LCD_E_MOSTRA_SENHA_VALIDA .  C ADDR   21C7H   A   
LIN1. . . . . . . . . . . . . . .  B ADDR   00B0H.4 A   
LIN2. . . . . . . . . . . . . . .  B ADDR   00B0H.5 A   
LIN3. . . . . . . . . . . . . . .  B ADDR   00B0H.6 A   
A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/25/2017 11:12:50 PAGE    15

LIN4. . . . . . . . . . . . . . .  B ADDR   00B0H.7 A   
MAIN. . . . . . . . . . . . . . .  C ADDR   20E5H   A   
MSTR1 . . . . . . . . . . . . . .  C ADDR   22A8H   A   
MSTR21. . . . . . . . . . . . . .  C ADDR   22B2H   A   
MSTRING . . . . . . . . . . . . .  C ADDR   229EH   A   
MSTRINGX. . . . . . . . . . . . .  C ADDR   22A9H   A   
P0. . . . . . . . . . . . . . . .  D ADDR   0080H   A   
P2. . . . . . . . . . . . . . . .  D ADDR   00A0H   A   
P3. . . . . . . . . . . . . . . .  D ADDR   00B0H   A   
PRESS_ENT . . . . . . . . . . . .  C ADDR   2140H   A   
RS. . . . . . . . . . . . . . . .  B ADDR   00A0H.5 A   
RW. . . . . . . . . . . . . . . .  B ADDR   00A0H.6 A   
SENHA1_1. . . . . . . . . . . . .  N NUMB   0041H   A   
SENHA1_2. . . . . . . . . . . . .  N NUMB   0042H   A   
SENHA1_3. . . . . . . . . . . . .  N NUMB   0043H   A   
SENHA1_4. . . . . . . . . . . . .  N NUMB   0044H   A   
SENHA2_1. . . . . . . . . . . . .  N NUMB   0045H   A   
SENHA2_2. . . . . . . . . . . . .  N NUMB   0046H   A   
SENHA2_3. . . . . . . . . . . . .  N NUMB   0047H   A   
SENHA2_4. . . . . . . . . . . . .  N NUMB   0048H   A   
SENHA_PADRAO_1. . . . . . . . . .  C ADDR   2030H   A   
SENHA_PADRAO_2. . . . . . . . . .  C ADDR   2035H   A   
STR_ENTER . . . . . . . . . . . .  C ADDR   206DH   A   
STR_LEONARDO_PEREIRA. . . . . . .  C ADDR   204BH   A   
STR_LIBERA. . . . . . . . . . . .  C ADDR   20A8H   A   
STR_LOGO. . . . . . . . . . . . .  C ADDR   203AH   A   
STR_RODRIGO_ENDO. . . . . . . . .  C ADDR   205CH   A   
STR_SENHA . . . . . . . . . . . .  C ADDR   207EH   A   
STR_SENHA_INVALIDA. . . . . . . .  C ADDR   2097H   A   
STR_SENHA_VALIDA. . . . . . . . .  C ADDR   2086H   A   
STR_TRANCA. . . . . . . . . . . .  C ADDR   20B9H   A   
TECLADO_1 . . . . . . . . . . . .  N NUMB   0031H   A   
TECLADO_2 . . . . . . . . . . . .  N NUMB   0032H   A   
TECLADO_3 . . . . . . . . . . . .  N NUMB   0033H   A   
TECLADO_4 . . . . . . . . . . . .  N NUMB   0034H   A   
TENTATIVAS. . . . . . . . . . . .  N NUMB   0049H   A   
TESTA_SENHA1. . . . . . . . . . .  C ADDR   2190H   A   
TESTA_SENHA2. . . . . . . . . . .  C ADDR   21A6H   A   
TF0 . . . . . . . . . . . . . . .  B ADDR   0088H.5 A   
TH0 . . . . . . . . . . . . . . .  D ADDR   008CH   A   
TIMER_CONFIGURA_TIMER . . . . . .  C ADDR   22CFH   A   
TIMER_DELAY_1_S . . . . . . . . .  C ADDR   22E7H   A   
TIMER_DELAY_20_MS . . . . . . . .  C ADDR   22D3H   A   
TL0 . . . . . . . . . . . . . . .  D ADDR   008AH   A   
TMOD. . . . . . . . . . . . . . .  D ADDR   0089H   A   
TR0 . . . . . . . . . . . . . . .  B ADDR   0088H.4 A   
VARREDURA_TECLADO . . . . . . . .  C ADDR   2156H   A   
__STARTUP__ . . . . . . . . . . .  C ADDR   20CAH   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
