A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 15:24:08 PAGE     1


MACRO ASSEMBLER A51 V8.2.5.0
OBJECT MODULE PLACED IN .\Objects\Projeto_01_Fechadura.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE Projeto_01_Fechadura.a51 SET(SMALL) DEBUG PRINT(.\Listings\Projeto_01_F
                      echadura.lst) OBJECT(.\Objects\Projeto_01_Fechadura.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     

                       2     

                       3     

                       4     

                       5     

                       6     

                       7     

                       8     

                       9     

                      10     

                      11     

                      12     

                      13     

                      14     

                      15     

                      16     

2000                  17     org 2000h  

2000 0220CA           18     ljmp __STARTUP__

                      19     

2003                  20     org 2003h  

2003 0222FC           21     ljmp INT_INT0

                      22     

200B                  23     org 200Bh  

200B 0222FD           24     ljmp INT_TIMER0

                      25     

2013                  26     org 2013h  

2013 0222FE           27     ljmp INT_INT1

                      28     

201B                  29     org 201Bh  

201B 0222FF           30     ljmp INT_TIMER1

                      31     

2023                  32     org 2023h  

2023 022300           33     ljmp INT_SERIAL

                      34     

                      35     

                      36     

                      37     

                      38     

                      39     

  00A5                40     RS                      EQU     P2.5                     

  00A6                41     RW                      EQU     P2.6                     

  00A7                42     E_LCD           EQU     P2.7                     

                      43     

  0087                44     BUSYF           EQU     P0.7                     

                      45     

                      46     

  00B6                47     LED_SEG         EQU     P3.6

  00B7                48     LED1            EQU     P3.7

                      49             

                      50     

  0090                51     COL1            EQU P1.0

  0091                52     COL2            EQU P1.1

  0092                53     COL3            EQU P1.2

  0093                54     COL4            EQU P1.3

                      55     

  0094                56     LIN1            EQU P1.4

  0095                57     LIN2            EQU P1.5

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 15:24:08 PAGE     2

  0096                58     LIN3            EQU P1.6

  0097                59     LIN4            EQU P1.7

                      60             

                      61     

  00A0                62     ESTADO_UM               EQU P2.0

  00A1                63     ESTADO_DOIS     EQU P2.1

  00A2                64     ESTADO_TRES     EQU P2.2

  00A3                65     ESTADO_QUATRO   EQU P2.3

                      66             

                      67     

  00B0                68     BUZZER                  EQU P3.0

                      69             

                      70     

  0031                71     TECLADO_1       EQU 31h

  0032                72     TECLADO_2       EQU 32h

  0033                73     TECLADO_3       EQU 33h

  0034                74     TECLADO_4       EQU 34h

                      75     

                      76     

  0035                77     SENHA1_1        EQU 35h

  0036                78     SENHA1_2        EQU 36h

  0037                79     SENHA1_3        EQU 37h

  0038                80     SENHA1_4        EQU 38h

                      81     

  0045                82     SENHA2_1        EQU 45h

  0046                83     SENHA2_2        EQU 46h

  0047                84     SENHA2_3        EQU 47h

  0048                85     SENHA2_4        EQU 48h

                      86     

  0050                87     TENTATIVAS  EQU 50h

                      88                     

                      89     

                      90     

                      91     

                      92     

2030                  93     org 2030h

2030                  94     SENHA_PADRAO_1:

2030 32383132         95                     db      '2812', 00H

2034 00                      
2035                  96     SENHA_PADRAO_2:

2035 30393132         97                     db      '0912', 00H

2039 00                      
203A                  98     STR_LOGO:

203A 2050524F         99             DB      ' PROFS. LINDOS! ',00H

203E 46532E20                
2042 4C494E44                
2046 4F532120                
204A 00                      
204B                 100     STR_LEONARDO_PEREIRA:

204B 4C656F6E        101             DB      'Leonardo Pereira',00H

204F 6172646F                
2053 20506572                
2057 65697261                
205B 00                      
205C                 102     STR_RODRIGO_ENDO:

205C 2020526F        103             DB      '  Rodrigo Endo  ',00H

2060 64726967                
2064 6F20456E                
2068 646F2020                
206C 00                      
206D                 104     STR_ENTER:

206D 50524553        105             DB      'PRESSIONE  ENTER',00H

2071 53494F4E                
2075 45202045                
2079 4E544552                
207D 00                      
A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 15:24:08 PAGE     3

207E                 106     STR_SENHA:

207E 53454E48        107             DB      'SENHA: ',00H

2082 413A2000                
2086                 108     STR_SENHA_VALIDA:

2086 20205345        109             DB      '  SENHA VALIDA  ',00H

208A 4E484120                
208E 56414C49                
2092 44412020                
2096 00                      
2097                 110     STR_SENHA_INVALIDA:

2097 2053454E        111             DB      ' SENHA INVALIDA ',00H

209B 48412049                
209F 4E56414C                
20A3 49444120                
20A7 00                      
20A8                 112     STR_LIBERA:

20A8 20504F52        113             DB      ' PORTA LIBERADA ',00H

20AC 5441204C                
20B0 49424552                
20B4 41444120                
20B8 00                      
20B9                 114     STR_TRANCA:

20B9 20504F52        115             DB      ' PORTA TRANCADA ',00H          

20BD 54412054                
20C1 52414E43                
20C5 41444120                
20C9 00                      
                     116                     

                     117     

                     118     

                     119     

                     120     

20CA                 121     __STARTUP__:

20CA D2B0            122                     SETB    BUZZER

20CC 51DD            123                     CALL    TIMER_CONFIGURA_TIMER

                     124     

20CE 902030          125                     MOV     DPTR, #2030h     

20D1 7800            126                     MOV     R0, #00h             

20D3 7935            127                     MOV     R1, #SENHA1_1    

20D5 7A04            128                     MOV     R2, #04h                 

20D7 312F            129                     CALL    LE_SENHA

                     130             

20D9 902035          131                     MOV     DPTR, #2035h     

20DC 7800            132                     MOV     R0, #00h                 

20DE 7945            133                     MOV     R1, #SENHA2_1    

20E0 7A04            134                     MOV     R2, #04h                 

20E2 312F            135                     CALL    LE_SENHA

                     136             

20E4 755003          137                     MOV     TENTATIVAS, #3h

20E7 C2B0            138                     CLR             BUZZER

                     139             

20E9                 140     MAIN:

20E9 5119            141                     CALL    INIDISP  

20EB 90203A          142                     MOV     DPTR,#STR_LOGO   

20EE 51C1            143                     CALL    ESC_STR1                 

                     144                     

                     145                     

20F0 7901            146                     MOV             R1, #01h

20F2 51F5            147                     CALL    TIMER_DELAY_1_S

                     148                     

20F4 5161            149                     CALL    CLR1L    

                     150                     

20F6 90204B          151                     MOV     DPTR, #STR_LEONARDO_PEREIRA      

20F9 51C1            152                     CALL    ESC_STR1                                         

                     153                     

20FB 90205C          154                     MOV     DPTR, #STR_RODRIGO_ENDO          

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 15:24:08 PAGE     4

20FE 51C7            155                     CALL    ESC_STR2                                         

                     156                     

                     157                     

2100 7901            158                     MOV             R1, #01h

2102 51F5            159                     CALL    TIMER_DELAY_1_S

                     160     

2104                 161     LIMPA_LCD_E_INICIA_SISTEMA:

                     162                     

2104 5161            163                     CALL    CLR1L

2106 517A            164                     CALL    CLR2L

                     165                     

2108 90207E          166                     MOV     DPTR,#STR_SENHA  

210B 51C1            167                     CALL    ESC_STR1                 

                     168                     

210D 7800            169                     MOV     R0, #00h         

210F 7907            170                     MOV     R1, #07h         

2111 514F            171                     CALL    GOTOXY

                     172                     

2113 7931            173                     MOV     R1, #TECLADO_1   

2115 7B01            174                     MOV     R3, #1h                  

2117 7F04            175                     MOV     R7, #04h                 

2119                 176     LE_4_DIGITOS:

2119 780A            177                     MOV     R0, #0Ah

211B 51E1            178                     ACALL   TIMER_DELAY_20_MS

211D 315C            179                     ACALL   VARREDURA_TECLADO

211F 3141            180                     CALL    ESCREVE_ASTERISCO

                     181                     

2121 09              182                     INC R1

2122 0B              183                     INC R3

                     184                     

2123 D2B0            185                     SETB    BUZZER

                     186                     

2125 DFF2            187                     DJNZ R7, LE_4_DIGITOS

                     188                     

                     189                     

2127 780A            190                     MOV     R0, #0Ah

2129 51E1            191                     ACALL   TIMER_DELAY_20_MS

                     192                     

212B 3146            193                     ACALL   PRESS_ENT

                     194                     

212D 80D5            195                     JMP             LIMPA_LCD_E_INICIA_SISTEMA

                     196     

                     197     

                     198     

                     199     

                     200     

                     201     

                     202     

                     203     

                     204     

                     205     

                     206     

212F                 207     LE_SENHA:

212F 3135            208             call LE_SENHA_ROM

                     209             

2131 09              210             INC R1

                     211             

2132 DAFB            212             djnz R2, LE_SENHA

                     213             

2134 22              214             RET

                     215     

2135                 216     LE_SENHA_ROM:

2135 E8              217             mov A, R0

2136 93              218             movc A, @A + DPTR

2137 F7              219             mov @R1, A

                     220             

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 15:24:08 PAGE     5

2138 08              221             inc R0

                     222             

2139 313C            223             call CONV_ASCII_TO_NUMBER

                     224             

213B 22              225             RET

                     226             

                     227     

                     228     

                     229     

                     230     

                     231     

                     232     

                     233     

                     234     

213C                 235     CONV_ASCII_TO_NUMBER:

213C E7              236                     MOV     A, @R1

                     237             

213D 24D0            238                     ADD     A, #-30h

                     239             

213F F7              240                     MOV     @R1, A

                     241             

2140 22              242                     RET

                     243             

                     244     

                     245     

                     246     

                     247     

                     248     

                     249     

                     250     

2141                 251     ESCREVE_ASTERISCO:              

2141 742A            252                     MOV     A, #2Ah

2143 5193            253                     CALL    ESCDADO

                     254             

2145 22              255                     RET

                     256                     

                     257     

                     258     

                     259     

                     260     

                     261     

                     262     

                     263     

                     264     

2146                 265     PRESS_ENT:

2146 D294            266                     SETB    LIN1

2148 D295            267                     SETB    LIN2

214A D296            268                     SETB    LIN3

214C C297            269                     CLR     LIN4

214E 309105          270                     JNB     COL2, CLEAR                      

2151 309340          271                     JNB     COL4, TESTA_SENHA1       

2154 80F0            272                     JMP     PRESS_ENT

                     273     

                     274     

                     275     

                     276     

                     277     

                     278     

                     279     

                     280     

                     281     

                     282     

2156                 283     CLEAR: 

2156 D0E0            284                     POP             ACC

2158 D0E0            285                     POP             ACC

215A 80A8            286                     JMP     LIMPA_LCD_E_INICIA_SISTEMA

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 15:24:08 PAGE     6

                     287                     

                     288     

                     289     

                     290     

                     291     

                     292     

                     293     

                     294     

215C                 295     VARREDURA_TECLADO:

215C C294            296                     CLR  LIN1

215E D295            297                     SETB LIN2

2160 D296            298                     SETB LIN3

2162 D297            299                     SETB LIN4

2164 309177          300                     JNB  COL2, DIGITO1

2167 309278          301                     JNB  COL3, DIGITO2

216A 309379          302                     JNB  COL4, DIGITO3

                     303                     

216D C295            304                     CLR  LIN2

216F D294            305                     SETB LIN1

2171 309176          306                     JNB  COL2, DIGITO4

2174 309277          307                     JNB  COL3, DIGITO5

2177 309378          308                     JNB  COL4, DIGITO6

                     309                     

217A C296            310                     CLR  LIN3

217C D295            311                     SETB LIN2

217E 309175          312                     JNB  COL2, DIGITO7

2181 309276          313                     JNB  COL3, DIGITO8

2184 309377          314                     JNB  COL4, DIGITO9

                     315                     

2187 C297            316                     CLR  LIN4

2189 D296            317                     SETB LIN3

218B 3091C8          318                     JNB  COL2, CLEAR

218E 309271          319                     JNB  COL3, DIGITO0

2191 80C9            320                     JMP  VARREDURA_TECLADO

                     321                     

2193 22              322                     RET

                     323     

                     324     

                     325     

                     326     

                     327     

                     328     

                     329     

                     330     

                     331     

2194                 332     TESTA_SENHA1:

2194 E535            333                     MOV             A, SENHA1_1

2196 B53111          334                     CJNE    A, TECLADO_1, TESTA_SENHA2

2199 E536            335                     MOV             A, SENHA1_2

219B B5320C          336                     CJNE    A, TECLADO_2, TESTA_SENHA2

219E E537            337                     MOV             A, SENHA1_3

21A0 B53307          338                     CJNE    A, TECLADO_3, TESTA_SENHA2

21A3 E538            339                     MOV             A, SENHA1_4

21A5 B53402          340                     CJNE    A, TECLADO_4, TESTA_SENHA2

21A8 8025            341                     JMP     LIMPA_LCD_E_MOSTRA_SENHA_VALIDA

                     342             

21AA                 343     TESTA_SENHA2:

21AA E545            344                     MOV             A, SENHA2_1

21AC B53111          345                     CJNE    A, TECLADO_1, LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA

21AF E546            346                     MOV             A, SENHA2_2

21B1 B5320C          347                     CJNE    A, TECLADO_2, LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA

21B4 E547            348                     MOV             A, SENHA2_3

21B6 B53307          349                     CJNE    A, TECLADO_3, LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA

21B9 E548            350                     MOV             A, SENHA2_4

21BB B53402          351                     CJNE    A, TECLADO_4, LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA

21BE 800F            352                     JMP     LIMPA_LCD_E_MOSTRA_SENHA_VALIDA

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 15:24:08 PAGE     7

                     353                     

21C0                 354     LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA:

                     355                     

21C0 5161            356                     CALL    CLR1L

21C2 517A            357                     CALL    CLR2L

                     358                     

21C4 902097          359                     MOV     DPTR,#STR_SENHA_INVALIDA         

21C7 51C1            360                     CALL    ESC_STR1                                         

                     361                     

                     362                     

21C9 7901            363                     MOV             R1, #01h

21CB 51F5            364                     CALL    TIMER_DELAY_1_S

                     365                     

21CD 2104            366                     JMP     LIMPA_LCD_E_INICIA_SISTEMA

                     367                     

21CF                 368     LIMPA_LCD_E_MOSTRA_SENHA_VALIDA:

                     369                     

21CF 5161            370                     CALL    CLR1L

21D1 517A            371                     CALL    CLR2L

                     372                     

21D3 902086          373                     MOV     DPTR,#STR_SENHA_VALIDA   

21D6 51C1            374                     CALL    ESC_STR1                                 

                     375                     

                     376                     

21D8 7901            377                     MOV             R1, #01h

21DA 51F5            378                     CALL    TIMER_DELAY_1_S

                     379                     

21DC 2104            380                     JMP     LIMPA_LCD_E_INICIA_SISTEMA

                     381                     

                     382     

                     383     

                     384     

                     385     

                     386     

                     387     

                     388     

                     389     

21DE 7401            390     DIGITO1: MOV A, #1h

21E0 4106            391                      AJMP GRAVA_DIGITO

21E2 7402            392     DIGITO2: MOV A, #2h

21E4 4106            393                      AJMP GRAVA_DIGITO

21E6 7403            394     DIGITO3: MOV A, #3h

21E8 4106            395                      AJMP GRAVA_DIGITO

21EA 7404            396     DIGITO4: MOV A, #4h

21EC 4106            397                      AJMP GRAVA_DIGITO

21EE 7405            398     DIGITO5: MOV A, #5h

21F0 4106            399                      AJMP GRAVA_DIGITO

21F2 7406            400     DIGITO6: MOV A, #6h

21F4 4106            401                      AJMP GRAVA_DIGITO

21F6 7407            402     DIGITO7: MOV A, #7h

21F8 4106            403                      AJMP GRAVA_DIGITO

21FA 7408            404     DIGITO8: MOV A, #8h

21FC 4106            405                      AJMP GRAVA_DIGITO

21FE 7409            406     DIGITO9: MOV A, #9h

2200 4106            407                      AJMP GRAVA_DIGITO

2202 7400            408     DIGITO0: MOV A, #0h

2204 4106            409                      AJMP GRAVA_DIGITO

                     410                      

2206                 411     GRAVA_DIGITO:

2206 BB0102          412                     CJNE R3, #1h, GRAVA_TECLADO_2

2209 F7              413                     MOV @R1, A

                     414             

220A 22              415                     RET

                     416                      

                     417     

                     418     

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 15:24:08 PAGE     8

                     419     

                     420     

                     421     

                     422     

                     423     

220B BB0202          424     GRAVA_TECLADO_2: CJNE R3, #2h, GRAVA_TECLADO_3

220E 4117            425                                      AJMP GRAVA_TECLADO_X

2210 BB0302          426     GRAVA_TECLADO_3: CJNE R3, #3h, GRAVA_TECLADO_4

2213 4117            427                                      AJMP GRAVA_TECLADO_X           

2215 4117            428     GRAVA_TECLADO_4: AJMP GRAVA_TECLADO_X

                     429     

2217                 430     GRAVA_TECLADO_X:

2217 F7              431                      MOV @R1, A

                     432                      

2218 22              433                      RET

                     434     

                     435     

                     436     

                     437             

                     438     

                     439     

                     440     

                     441     

                     442     

                     443     

                     444     

                     445     

                     446     

2219                 447     INIDISP:                       

2219 7838            448             MOV     R0,#38H          

221B 7A05            449             MOV     R2,#05           

221D 5138            450             CALL    ESCINST          

                     451             

221F 7838            452                     MOV     R0,#38H          

2221 7A01            453             MOV     R2,#01           

2223 5138            454             CALL    ESCINST          

                     455             

2225 7806            456                     MOV     R0,#06H          

2227 7A01            457             MOV     R2,#01           

2229 5138            458             CALL    ESCINST          

                     459             

222B 780C            460                     MOV     R0,#0CH          

222D 7A01            461             MOV     R2,#01           

222F 5138            462             CALL    ESCINST          

                     463             

2231 7801            464                     MOV     R0,#01H          

2233 7A02            465             MOV     R2,#02           

2235 5138            466             CALL    ESCINST          

                     467             

2237 22              468                     RET

                     469                     

                     470     

                     471     

                     472     

                     473     

                     474     

                     475     

                     476     

                     477     

                     478     

2238                 479     ESCINST:  

2238 C2A6            480                     CLR             RW                               

223A C2A5            481                     CLR     RS               

223C D2A7            482                     SETB    E_LCD            

                     483                     

223E 8880            484                     MOV     P0,R0            

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 15:24:08 PAGE     9

                     485                     

2240 C2A7            486                     CLR     E_LCD            

                     487                     

2242 7580FF          488                     MOV             P0,#0xFF                 

                     489                     

2245 D2A6            490                     SETB    RW                               

2247 D2A7            491                     SETB    E_LCD            

                     492     

2249 2087FD          493     ESCI1:  JB      BUSYF,ESCI1                      

                     494                     

224C C2A7            495                     CLR     E_LCD            

                     496             

224E 22              497                     RET

                     498                     

                     499     

                     500     

                     501     

                     502     

                     503     

                     504     

                     505     

                     506     

224F                 507     GOTOXY: 

224F C0E0            508                     PUSH    ACC

                     509             

2251 7480            510                     MOV     A,#80H

2253 B80102          511             CJNE    R0,#01,GT1       

                     512             

2256 74C0            513                     MOV     A,#0C0H

                     514                     

2258 49              515     GT1:    ORL     A,R1             

2259 F8              516             MOV     R0,A

225A 7A01            517             MOV     R2,#01           

                     518             

225C 5138            519                     CALL    ESCINST          

                     520             

225E D0E0            521                     POP     ACC

                     522             

2260 22              523                     RET

                     524             

                     525     

                     526     

                     527     

                     528     

                     529     

                     530     

                     531     

                     532     

2261                 533     CLR1L:    

2261 C0E0            534             PUSH   ACC

                     535             

2263 7800            536                     MOV    R0,#00               

2265 7900            537             MOV    R1,#00

                     538             

2267 514F            539                     CALL   GOTOXY

                     540             

2269 7910            541                     MOV    R1,#16               

                     542     

226B 7420            543     CLR1L1: MOV    A,#' '               

                     544             

226D 5193            545                     CALL   ESCDADO

                     546             

226F D9FA            547                     DJNZ   R1,CLR1L1

2271 7800            548             MOV    R0,#00               

2273 7900            549             MOV    R1,#00

                     550             

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 15:24:08 PAGE    10

2275 514F            551                     CALL   GOTOXY

                     552             

2277 D0E0            553                     POP    ACC

                     554             

2279 22              555                     RET

                     556                     

                     557     

                     558     

                     559     

                     560     

                     561     

                     562     

                     563     

                     564     

227A                 565     CLR2L:    

227A C0E0            566             PUSH   ACC

                     567             

227C 7801            568                     MOV    R0,#01               

227E 7900            569             MOV    R1,#00

                     570             

2280 514F            571                     CALL   GOTOXY

                     572             

2282 7910            573                     MOV    R1,#16               

                     574     

2284 7420            575     CLR2L1: MOV    A,#' '               

                     576             

2286 5193            577                     CALL   ESCDADO

                     578             

2288 D9FA            579                     DJNZ   R1,CLR2L1

228A 7801            580             MOV    R0,#01               

228C 7900            581             MOV    R1,#00

                     582             

228E 514F            583                     CALL   GOTOXY

                     584             

2290 D0E0            585                     POP    ACC

                     586             

2292 22              587                     RET

                     588                

                     589     

                     590     

                     591     

                     592     

                     593     

                     594     

                     595     

2293                 596     ESCDADO:  

2293 C2A6            597                     CLR             RW                               

2295 D2A5            598             SETB    RS               

2297 D2A7            599             SETB    E_LCD            

                     600                     

2299 F580            601             MOV     P0,A             

                     602             

229B C2A7            603                     CLR     E_LCD            

                     604                     

229D 7580FF          605                     MOV             P0,#0xFF                 

                     606                     

22A0 D2A6            607                     SETB    RW                               

22A2 C2A5            608                     CLR             RS                               

22A4 D2A7            609                     SETB    E_LCD            

                     610     

22A6 2087FD          611     ESCD1:  JB              BUSYF,ESCD1              

                     612     

22A9 C2A7            613                     CLR     E_LCD            

                     614     

22AB 22              615             RET

                     616                     

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 15:24:08 PAGE    11

                     617     

                     618     

                     619     

                     620     

                     621     

                     622     

                     623     

                     624     

                     625     

22AC                 626     MSTRING:  

22AC E4              627                       CLR    A

22AD 93              628               MOVC   A,@A+DPTR       

                     629               

22AE 6006            630                       JZ     MSTR1

                     631               

22B0 122293          632                       LCALL  ESCDADO         

                     633               

22B3 A3              634                       INC    DPTR

                     635               

22B4 80F6            636                       SJMP   MSTRING

                     637                       

22B6 22              638     MSTR1:    RET

                     639                

                     640     

                     641     

                     642     

                     643     

                     644     

                     645     

                     646     

                     647     

                     648     

22B7                 649     MSTRINGX: 

22B7 E0              650                       MOVX   A,@DPTR         

                     651               

22B8 6006            652                       JZ     MSTR21

                     653               

22BA 122293          654                       LCALL  ESCDADO         

                     655               

22BD A3              656                       INC    DPTR

                     657               

22BE 80F7            658                       SJMP   MSTRINGX

                     659     

22C0 22              660     MSTR21:   RET

                     661     

                     662     

                     663     

                     664     

                     665     

                     666     

                     667     

                     668     

                     669     

                     670     

22C1                 671     ESC_STR1: 

                     672                       

22C1 7800            673                       MOV    R0,#00         

22C3 7900            674               MOV    R1,#00

                     675               

22C5 8004            676                       JMP    ESC_S

                     677               

                     678     

                     679     

                     680     

                     681     

                     682     

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 15:24:08 PAGE    12

                     683     

                     684     

                     685     

                     686     

22C7                 687     ESC_STR2: 

                     688                       

22C7 7801            689                       MOV    R0,#01         

22C9 7900            690               MOV    R1,#00

                     691                       

22CB 12224F          692     ESC_S:    LCALL  GOTOXY          

                     693               

22CE 1222AC          694                       LCALL  MSTRING

                     695               

22D1 22              696                       RET

                     697     

                     698     

                     699     

                     700     

                     701     

                     702     

                     703     

                     704     ; DESTROI: R0,R2                                                                        //

                     705     

22D2                 706     CUR_ON:   

22D2 780F            707                       MOV    R0,#0FH               

22D4 8002            708               SJMP   CUR1

                     709                       

22D6                 710     CUR_OFF:  

22D6 780C            711                       MOV    R0,#0CH               

                     712                       

22D8 7A01            713     CUR1:     MOV    R2,#01

                     714               

22DA 5138            715                       CALL   ESCINST               

                     716               

22DC 22              717                       RET

                     718                       

                     719     

                     720     

                     721     

                     722                       

22DD                 723     TIMER_CONFIGURA_TIMER:

22DD 758901          724                     MOV TMOD, #01h  

                     725             

22E0 22              726                     RET

                     727             

                     728     

                     729     

                     730     

                     731     

                     732     

                     733     

                     734     

22E1                 735     TIMER_DELAY_20_MS:

22E1 758C2F          736                     MOV TH0, #HIGH(65535 - 53350)

22E4 758A99          737                     MOV TL0, #LOW(65535 - 53350)

                     738             

22E7 C28D            739                     CLR TF0

22E9 D28C            740                     SETB TR0

                     741             

22EB 308DFD          742                     JNB TF0, $

                     743                     

22EE C28D            744                     CLR TF0

22F0 C28C            745                     CLR TR0

                     746             

22F2 D8ED            747                     DJNZ R0, TIMER_DELAY_20_MS

                     748             

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 15:24:08 PAGE    13

22F4 22              749                     RET

                     750             

                     751     

                     752     

                     753     

                     754     

                     755     

                     756     

                     757     

22F5                 758     TIMER_DELAY_1_S:

22F5 7832            759                     MOV             R0, #50d

22F7 51E1            760                     CALL    TIMER_DELAY_20_MS

                     761                     

22F9 D9FA            762                     DJNZ    R1, TIMER_DELAY_1_S

                     763             

22FB 22              764                     RET

                     765     

                     766     

                     767     

                     768     

                     769     

                     770     

                     771     

                     772     

22FC                 773     INT_INT0:

22FC 32              774                     RETI

                     775     

                     776     

                     777     

                     778     

22FD                 779     INT_TIMER0:

22FD 32              780                     RETI

                     781             

                     782     

                     783     

                     784     

22FE                 785     INT_INT1:

22FE 32              786                     RETI

                     787     

                     788     

                     789     

                     790     

22FF                 791     INT_TIMER1:

22FF 32              792                     RETI

                     793             

                     794     

                     795     

                     796     

2300                 797     INT_SERIAL:

2300 32              798                     RETI

                     799             

2301                 800     FIM:

                     801                     END

A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 15:24:08 PAGE    14

SYMBOL TABLE LISTING
------ ----- -------


N A M E                            T Y P E  V A L U E   ATTRIBUTES

ACC . . . . . . . . . . . . . . .  D ADDR   00E0H   A   
BUSYF . . . . . . . . . . . . . .  B ADDR   0080H.7 A   
BUZZER. . . . . . . . . . . . . .  B ADDR   00B0H.0 A   
CLEAR . . . . . . . . . . . . . .  C ADDR   2156H   A   
CLR1L . . . . . . . . . . . . . .  C ADDR   2261H   A   
CLR1L1. . . . . . . . . . . . . .  C ADDR   226BH   A   
CLR2L . . . . . . . . . . . . . .  C ADDR   227AH   A   
CLR2L1. . . . . . . . . . . . . .  C ADDR   2284H   A   
COL1. . . . . . . . . . . . . . .  B ADDR   0090H.0 A   
COL2. . . . . . . . . . . . . . .  B ADDR   0090H.1 A   
COL3. . . . . . . . . . . . . . .  B ADDR   0090H.2 A   
COL4. . . . . . . . . . . . . . .  B ADDR   0090H.3 A   
CONV_ASCII_TO_NUMBER. . . . . . .  C ADDR   213CH   A   
CUR1. . . . . . . . . . . . . . .  C ADDR   22D8H   A   
CUR_OFF . . . . . . . . . . . . .  C ADDR   22D6H   A   
CUR_ON. . . . . . . . . . . . . .  C ADDR   22D2H   A   
DIGITO0 . . . . . . . . . . . . .  C ADDR   2202H   A   
DIGITO1 . . . . . . . . . . . . .  C ADDR   21DEH   A   
DIGITO2 . . . . . . . . . . . . .  C ADDR   21E2H   A   
DIGITO3 . . . . . . . . . . . . .  C ADDR   21E6H   A   
DIGITO4 . . . . . . . . . . . . .  C ADDR   21EAH   A   
DIGITO5 . . . . . . . . . . . . .  C ADDR   21EEH   A   
DIGITO6 . . . . . . . . . . . . .  C ADDR   21F2H   A   
DIGITO7 . . . . . . . . . . . . .  C ADDR   21F6H   A   
DIGITO8 . . . . . . . . . . . . .  C ADDR   21FAH   A   
DIGITO9 . . . . . . . . . . . . .  C ADDR   21FEH   A   
ESCD1 . . . . . . . . . . . . . .  C ADDR   22A6H   A   
ESCDADO . . . . . . . . . . . . .  C ADDR   2293H   A   
ESCI1 . . . . . . . . . . . . . .  C ADDR   2249H   A   
ESCINST . . . . . . . . . . . . .  C ADDR   2238H   A   
ESCREVE_ASTERISCO . . . . . . . .  C ADDR   2141H   A   
ESC_S . . . . . . . . . . . . . .  C ADDR   22CBH   A   
ESC_STR1. . . . . . . . . . . . .  C ADDR   22C1H   A   
ESC_STR2. . . . . . . . . . . . .  C ADDR   22C7H   A   
ESTADO_DOIS . . . . . . . . . . .  B ADDR   00A0H.1 A   
ESTADO_QUATRO . . . . . . . . . .  B ADDR   00A0H.3 A   
ESTADO_TRES . . . . . . . . . . .  B ADDR   00A0H.2 A   
ESTADO_UM . . . . . . . . . . . .  B ADDR   00A0H.0 A   
E_LCD . . . . . . . . . . . . . .  B ADDR   00A0H.7 A   
FIM . . . . . . . . . . . . . . .  C ADDR   2301H   A   
GOTOXY. . . . . . . . . . . . . .  C ADDR   224FH   A   
GRAVA_DIGITO. . . . . . . . . . .  C ADDR   2206H   A   
GRAVA_TECLADO_2 . . . . . . . . .  C ADDR   220BH   A   
GRAVA_TECLADO_3 . . . . . . . . .  C ADDR   2210H   A   
GRAVA_TECLADO_4 . . . . . . . . .  C ADDR   2215H   A   
GRAVA_TECLADO_X . . . . . . . . .  C ADDR   2217H   A   
GT1 . . . . . . . . . . . . . . .  C ADDR   2258H   A   
INIDISP . . . . . . . . . . . . .  C ADDR   2219H   A   
INT_INT0. . . . . . . . . . . . .  C ADDR   22FCH   A   
INT_INT1. . . . . . . . . . . . .  C ADDR   22FEH   A   
INT_SERIAL. . . . . . . . . . . .  C ADDR   2300H   A   
INT_TIMER0. . . . . . . . . . . .  C ADDR   22FDH   A   
INT_TIMER1. . . . . . . . . . . .  C ADDR   22FFH   A   
LED1. . . . . . . . . . . . . . .  B ADDR   00B0H.7 A   
LED_SEG . . . . . . . . . . . . .  B ADDR   00B0H.6 A   
LE_4_DIGITOS. . . . . . . . . . .  C ADDR   2119H   A   
LE_SENHA. . . . . . . . . . . . .  C ADDR   212FH   A   
LE_SENHA_ROM. . . . . . . . . . .  C ADDR   2135H   A   
LIMPA_LCD_E_INICIA_SISTEMA. . . .  C ADDR   2104H   A   
LIMPA_LCD_E_MOSTRA_SENHA_INVALIDA  C ADDR   21C0H   A   
A51 MACRO ASSEMBLER  PROJETO_01_FECHADURA                                                 03/31/2017 15:24:08 PAGE    15

LIMPA_LCD_E_MOSTRA_SENHA_VALIDA .  C ADDR   21CFH   A   
LIN1. . . . . . . . . . . . . . .  B ADDR   0090H.4 A   
LIN2. . . . . . . . . . . . . . .  B ADDR   0090H.5 A   
LIN3. . . . . . . . . . . . . . .  B ADDR   0090H.6 A   
LIN4. . . . . . . . . . . . . . .  B ADDR   0090H.7 A   
MAIN. . . . . . . . . . . . . . .  C ADDR   20E9H   A   
MSTR1 . . . . . . . . . . . . . .  C ADDR   22B6H   A   
MSTR21. . . . . . . . . . . . . .  C ADDR   22C0H   A   
MSTRING . . . . . . . . . . . . .  C ADDR   22ACH   A   
MSTRINGX. . . . . . . . . . . . .  C ADDR   22B7H   A   
P0. . . . . . . . . . . . . . . .  D ADDR   0080H   A   
P1. . . . . . . . . . . . . . . .  D ADDR   0090H   A   
P2. . . . . . . . . . . . . . . .  D ADDR   00A0H   A   
P3. . . . . . . . . . . . . . . .  D ADDR   00B0H   A   
PRESS_ENT . . . . . . . . . . . .  C ADDR   2146H   A   
RS. . . . . . . . . . . . . . . .  B ADDR   00A0H.5 A   
RW. . . . . . . . . . . . . . . .  B ADDR   00A0H.6 A   
SENHA1_1. . . . . . . . . . . . .  N NUMB   0035H   A   
SENHA1_2. . . . . . . . . . . . .  N NUMB   0036H   A   
SENHA1_3. . . . . . . . . . . . .  N NUMB   0037H   A   
SENHA1_4. . . . . . . . . . . . .  N NUMB   0038H   A   
SENHA2_1. . . . . . . . . . . . .  N NUMB   0045H   A   
SENHA2_2. . . . . . . . . . . . .  N NUMB   0046H   A   
SENHA2_3. . . . . . . . . . . . .  N NUMB   0047H   A   
SENHA2_4. . . . . . . . . . . . .  N NUMB   0048H   A   
SENHA_PADRAO_1. . . . . . . . . .  C ADDR   2030H   A   
SENHA_PADRAO_2. . . . . . . . . .  C ADDR   2035H   A   
STR_ENTER . . . . . . . . . . . .  C ADDR   206DH   A   
STR_LEONARDO_PEREIRA. . . . . . .  C ADDR   204BH   A   
STR_LIBERA. . . . . . . . . . . .  C ADDR   20A8H   A   
STR_LOGO. . . . . . . . . . . . .  C ADDR   203AH   A   
STR_RODRIGO_ENDO. . . . . . . . .  C ADDR   205CH   A   
STR_SENHA . . . . . . . . . . . .  C ADDR   207EH   A   
STR_SENHA_INVALIDA. . . . . . . .  C ADDR   2097H   A   
STR_SENHA_VALIDA. . . . . . . . .  C ADDR   2086H   A   
STR_TRANCA. . . . . . . . . . . .  C ADDR   20B9H   A   
TECLADO_1 . . . . . . . . . . . .  N NUMB   0031H   A   
TECLADO_2 . . . . . . . . . . . .  N NUMB   0032H   A   
TECLADO_3 . . . . . . . . . . . .  N NUMB   0033H   A   
TECLADO_4 . . . . . . . . . . . .  N NUMB   0034H   A   
TENTATIVAS. . . . . . . . . . . .  N NUMB   0050H   A   
TESTA_SENHA1. . . . . . . . . . .  C ADDR   2194H   A   
TESTA_SENHA2. . . . . . . . . . .  C ADDR   21AAH   A   
TF0 . . . . . . . . . . . . . . .  B ADDR   0088H.5 A   
TH0 . . . . . . . . . . . . . . .  D ADDR   008CH   A   
TIMER_CONFIGURA_TIMER . . . . . .  C ADDR   22DDH   A   
TIMER_DELAY_1_S . . . . . . . . .  C ADDR   22F5H   A   
TIMER_DELAY_20_MS . . . . . . . .  C ADDR   22E1H   A   
TL0 . . . . . . . . . . . . . . .  D ADDR   008AH   A   
TMOD. . . . . . . . . . . . . . .  D ADDR   0089H   A   
TR0 . . . . . . . . . . . . . . .  B ADDR   0088H.4 A   
VARREDURA_TECLADO . . . . . . . .  C ADDR   215CH   A   
__STARTUP__ . . . . . . . . . . .  C ADDR   20CAH   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
